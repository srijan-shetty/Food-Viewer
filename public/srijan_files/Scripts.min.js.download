/*
 *  getQueryParameters.js
 *  Copyright (c) 2014 Nicholas Ortenzio
 *  The MIT License (MIT)
 *
 */
/*!
 * Bootstrap v3.3.4 (http://getbootstrap.com)
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if(jQuery.extend({getQueryParameters:function(e){return(e||document.location.search).replace(/(^\?)/,"").split("&").map(function(e){return e=e.split("="),this[e[0]]=e[1],this}.bind({}))[0]}}),_.mixin({traverse:function(e,t){var n=[];return _.forEach(e,function(e){n.push(e);var i=e[t];_.isArray(i)&&(n=n.concat(_.traverse(i,t)))}),n}}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),/* ========================================================================
 * Bootstrap: transition.js v3.3.4
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var o=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(o,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),/* ========================================================================
 * Bootstrap: alert.js v3.3.4
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),o=n.data("bs.alert");o||n.data("bs.alert",o=new i(this)),"string"==typeof t&&o[t].call(n)})}var n='[data-dismiss="alert"]',i=function(t){e(t).on("click",n,this.close)};i.VERSION="3.3.4",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){a.detach().trigger("closed.bs.alert").remove()}var o=e(this),r=o.attr("data-target");r||(r=o.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var a=e(r);t&&t.preventDefault(),a.length||(a=o.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var o=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){return e.fn.alert=o,this},e(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),/* ========================================================================
 * Bootstrap: button.js v3.3.4
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.button"),r="object"==typeof t&&t;o||i.data("bs.button",o=new n(this,r)),"toggle"==t?o.toggle():t&&o.setState(t)})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.4",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,o=i.is("input")?"val":"html",r=i.data();t+="Text",null==r.resetText&&i.data("resetText",i[o]()),setTimeout(e.proxy(function(){i[o](null==r[t]?this.options[t]:r[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?e=!1:t.find(".active").removeClass("active")),e&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active"));e&&this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=e(n.target);i.hasClass("btn")||(i=i.closest(".btn")),t.call(i,"toggle"),n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),/* ========================================================================
 * Bootstrap: carousel.js v3.3.4
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.carousel"),r=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t),a="string"==typeof t?t:r.slide;o||i.data("bs.carousel",o=new n(this,r)),"number"==typeof t?o.to(t):a?o[a]():r.interval&&o.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),i="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(i&&!this.options.wrap)return t;var o="prev"==e?-1:1,r=(n+o)%this.$items.length;return this.$items.eq(r)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,i){var o=this.$element.find(".item.active"),r=i||this.getItemForDirection(t,o),a=this.interval,s="next"==t?"left":"right",l=this;if(r.hasClass("active"))return this.sliding=!1;var c=r[0],u=e.Event("slide.bs.carousel",{relatedTarget:c,direction:s});if(this.$element.trigger(u),!u.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(r)]);d&&d.addClass("active")}var f=e.Event("slid.bs.carousel",{relatedTarget:c,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(r.addClass(t),r[0].offsetWidth,o.addClass(s),r.addClass(s),o.one("bsTransitionEnd",function(){r.removeClass([t,s].join(" ")).addClass("active"),o.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(f)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(o.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(f)),a&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var o=function(n){var i,o=e(this),r=e(o.attr("data-target")||(i=o.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(r.hasClass("carousel")){var a=e.extend({},r.data(),o.data()),s=o.attr("data-slide-to");s&&(a.interval=!1),t.call(r,a),s&&r.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",o).on("click.bs.carousel.data-api","[data-slide-to]",o),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: collapse.js v3.3.4
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),o=n.data("bs.collapse"),r=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!o&&r.toggle&&/show|hide/.test(t)&&(r.toggle=!1),o||n.data("bs.collapse",o=new i(this,r)),"string"==typeof t&&o[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.4",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,o=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(o&&o.length&&(t=o.data("bs.collapse"),t&&t.transitioning))){var r=e.Event("show.bs.collapse");if(this.$element.trigger(r),!r.isDefaultPrevented()){o&&o.length&&(n.call(o,"hide"),t||o.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[a](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var o=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(o,this)).emulateTransitionEnd(i.TRANSITION_DURATION):o.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var o=e(i);this.addAriaAndCollapsedClass(t(o),o)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var o=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=o,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var o=e(this);o.attr("data-target")||i.preventDefault();var r=t(o),a=r.data("bs.collapse"),s=a?"toggle":o.data();n.call(r,s)})}(jQuery),/* ========================================================================
 * Bootstrap: dropdown.js v3.3.4
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){t&&3===t.which||(e(o).remove(),e(r).each(function(){var i=e(this),o=n(i),r={relatedTarget:this};o.hasClass("open")&&(o.trigger(t=e.Event("hide.bs.dropdown",r)),t.isDefaultPrevented()||(i.attr("aria-expanded","false"),o.removeClass("open").trigger("hidden.bs.dropdown",r)))}))}function n(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof t&&i[t].call(n)})}var o=".dropdown-backdrop",r='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.4",a.prototype.toggle=function(i){var o=e(this);if(!o.is(".disabled, :disabled")){var r=n(o),a=r.hasClass("open");if(t(),!a){"ontouchstart"in document.documentElement&&!r.closest(".navbar-nav").length&&e('<div class="dropdown-backdrop"/>').insertAfter(e(this)).on("click",t);var s={relatedTarget:this};if(r.trigger(i=e.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;o.trigger("focus").attr("aria-expanded","true"),r.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(t){if(/(38|40|27|32)/.test(t.which)&&!/input|textarea/i.test(t.target.tagName)){var i=e(this);if(t.preventDefault(),t.stopPropagation(),!i.is(".disabled, :disabled")){var o=n(i),a=o.hasClass("open");if(!a&&27!=t.which||a&&27==t.which)return 27==t.which&&o.find(r).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=o.find('[role="menu"]'+s+', [role="listbox"]'+s);if(l.length){var c=l.index(t.target);38==t.which&&c>0&&c--,40==t.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",t).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",r,a.prototype.toggle).on("keydown.bs.dropdown.data-api",r,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),/* ========================================================================
 * Bootstrap: modal.js v3.3.4
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t,i){return this.each(function(){var o=e(this),r=o.data("bs.modal"),a=e.extend({},n.DEFAULTS,o.data(),"object"==typeof t&&t);r||o.data("bs.modal",r=new n(this,a)),"string"==typeof t?r[t](i):a.show&&r.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.4",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,o=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(o),this.isShown||o.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var o=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),o&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var r=e.Event("shown.bs.modal",{relatedTarget:t});o?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,o=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=e.support.transition&&o;if(this.$backdrop=e('<div class="modal-backdrop '+o+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;r?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),o=i.attr("href"),r=e(i.attr("data-target")||o&&o.replace(/.*(?=#[^\s]+$)/,"")),a=r.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(o)&&o},r.data(),i.data());i.is("a")&&n.preventDefault(),r.one("show.bs.modal",function(e){e.isDefaultPrevented()||r.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(r,a,this)})}(jQuery),/* ========================================================================
 * Bootstrap: tooltip.js v3.3.4
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.tooltip"),r="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||i.data("bs.tooltip",o=new n(this,r)),"string"==typeof t&&o[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",e,t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var o=this.options.trigger.split(" "),r=o.length;r--;){var a=o[r];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var o=this,r=this.tip(),a=this.getUID(this.type);this.setContent(),r.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(s);c&&(s=s.replace(l,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var u=this.getPosition(),d=r[0].offsetWidth,f=r[0].offsetHeight;if(c){var h=s,p=this.options.container?e(this.options.container):this.$element.parent(),m=this.getPosition(p);s="bottom"==s&&u.bottom+f>m.bottom?"top":"top"==s&&u.top-f<m.top?"bottom":"right"==s&&u.right+d>m.width?"left":"left"==s&&u.left-d<m.left?"right":s,r.removeClass(h).addClass(s)}var g=this.getCalculatedOffset(s,u,d,f);this.applyPlacement(g,s);var v=function(){var e=o.hoverState;o.$element.trigger("shown.bs."+o.type),o.hoverState=null,"out"==e&&o.leave(o)};e.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),o=i[0].offsetWidth,r=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top=t.top+a,t.left=t.left+s,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=r&&(t.top=t.top+r-c);var u=this.getViewportAdjustedDelta(n,t,l,c);u.left?t.left+=u.left:t.top+=u.top;var d=/top|bottom/.test(n),f=d?2*u.left-o+l:2*u.top-r+c,h=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(f,i[0][h],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function i(){"in"!=o.hoverState&&r.detach(),o.$element.removeAttr("aria-describedby").trigger("hidden.bs."+o.type),t&&t()}var o=this,r=e(this.$tip),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(r.removeClass("in"),e.support.transition&&r.hasClass("fade")?r.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,o=n.getBoundingClientRect();null==o.width&&(o=e.extend({},o,{width:o.right-o.left,height:o.bottom-o.top}));var r=i?{top:0,left:0}:t.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},o,a,s,r)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var o={top:0,left:0};if(!this.$viewport)return o;var r=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-r-a.scroll,l=t.top+r-a.scroll+i;s<a.top?o.top=a.top-s:l>a.top+a.height&&(o.top=a.top+a.height-l)}else{var c=t.left-r,u=t.left+r+n;c<a.left?o.left=a.left-c:u>a.width&&(o.left=a.left+a.width-u)}return o},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){return this.$tip=this.$tip||e(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type)})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),/* ========================================================================
 * Bootstrap: popover.js v3.3.4
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.popover"),r="object"==typeof t&&t;(o||!/destroy|hide/.test(t))&&(o||i.data("bs.popover",o=new n(this,r)),"string"==typeof t&&o[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.4",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.4
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(n,i){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),o=i.data("bs.scrollspy"),r="object"==typeof n&&n;o||i.data("bs.scrollspy",o=new t(this,r)),"string"==typeof n&&o[n]()})}t.VERSION="3.3.4",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),o=t.data("target")||t.attr("href"),r=/^#./.test(o)&&e(o);return r&&r.length&&r.is(":visible")&&[[r[n]().top+i,o]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),o=this.offsets,r=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return a!=(e=r[r.length-1])&&this.activate(e);if(a&&t<o[0])return this.activeTarget=null,this.clear();for(e=o.length;e--;)a!=r[e]&&t>=o[e]&&(void 0===o[e+1]||t<o[e+1])&&this.activate(r[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),/* ========================================================================
 * Bootstrap: tab.js v3.3.4
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.tab");o||i.data("bs.tab",o=new n(this)),"string"==typeof t&&o[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var o=n.find(".active:last a"),r=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:o[0]});if(o.trigger(r),t.trigger(a),!a.isDefaultPrevented()&&!r.isDefaultPrevented()){var s=e(i);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){o.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:o[0]})})}}},n.prototype.activate=function(t,i,o){function r(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),o&&o()}var a=i.find("> .active"),s=o&&e.support.transition&&(a.length&&a.hasClass("fade")||!!i.find("> .fade").length);a.length&&s?a.one("bsTransitionEnd",r).emulateTransitionEnd(n.TRANSITION_DURATION):r(),a.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var o=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',o).on("click.bs.tab.data-api",'[data-toggle="pill"]',o)}(jQuery),/* ========================================================================
 * Bootstrap: affix.js v3.3.4
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2015 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */
+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),o=i.data("bs.affix"),r="object"==typeof t&&t;o||i.data("bs.affix",o=new n(this,r)),"string"==typeof t&&o[t]()})}var n=function(t,i){this.options=e.extend({},n.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.4",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,i){var o=this.$target.scrollTop(),r=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return n>o?"top":!1;if("bottom"==this.affixed)return null!=n?o+this.unpin<=r.top?!1:"bottom":e-i>=o+a?!1:"bottom";var s=null==this.affixed,l=s?o:r.top,c=s?a:t;return null!=n&&n>=o?"top":null!=i&&l+c>=e-i?"bottom":!1},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,o=i.top,r=i.bottom,a=e(document.body).height();"object"!=typeof i&&(r=o=i),"function"==typeof o&&(o=i.top(this.$element)),"function"==typeof r&&(r=i.bottom(this.$element));var s=this.getState(a,t,o,r);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),c=e.Event(l+".bs.affix");if(this.$element.trigger(c),c.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-t-r})}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),t.call(n,i)})})}(jQuery),/**
 * @license AngularJS v1.3.0
 * (c) 2010-2014 Google, Inc. http://angularjs.org
 * License: MIT
 */
function(e,t,n){"use strict";function i(e,n,i){o.directive(e,["$parse","$swipe",function(o,r){var a=75,s=.3,l=30;return function(c,u,d){function f(e){if(!h)return!1;var t=Math.abs(e.y-h.y),i=(e.x-h.x)*n;return p&&a>t&&i>0&&i>l&&s>t/i}var h,p,m=o(d[e]),g=["touch"];t.isDefined(d.ngSwipeDisableMouse)||g.push("mouse"),r.bind(u,{start:function(e,t){h=e,p=!0},cancel:function(e){p=!1},end:function(e,t){f(e)&&c.$apply(function(){u.triggerHandler(i),m(c,{$event:t})})}},g)}}])}var o=t.module("ngTouch",[]);o.factory("$swipe",[function(){function e(e){var t=e.touches&&e.touches.length?e.touches:[e],n=e.changedTouches&&e.changedTouches[0]||e.originalEvent&&e.originalEvent.changedTouches&&e.originalEvent.changedTouches[0]||t[0].originalEvent||t[0];return{x:n.clientX,y:n.clientY}}function n(e,n){var i=[];return t.forEach(e,function(e){var t=o[e][n];t&&i.push(t)}),i.join(" ")}var i=10,o={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"}};return{bind:function(t,o,r){var a,s,l,c,u=!1;r=r||["mouse","touch"],t.on(n(r,"start"),function(t){l=e(t),u=!0,a=0,s=0,c=l,o.start&&o.start(l,t)});var d=n(r,"cancel");d&&t.on(d,function(e){u=!1,o.cancel&&o.cancel(e)}),t.on(n(r,"move"),function(t){if(u&&l){var n=e(t);if(a+=Math.abs(n.x-c.x),s+=Math.abs(n.y-c.y),c=n,!(i>a&&i>s))return s>a?(u=!1,void(o.cancel&&o.cancel(t))):(t.preventDefault(),void(o.move&&o.move(n,t)))}}),t.on(n(r,"end"),function(t){u&&(u=!1,o.end&&o.end(e(t),t))})}}}]),o.config(["$provide",function(e){e.decorator("ngClickDirective",["$delegate",function(e){return e.shift(),e}])}]),o.directive("ngClick",["$parse","$timeout","$rootElement",function(e,n,i){function o(e,t,n,i){return Math.abs(e-n)<m&&Math.abs(t-i)<m}function r(e,t,n){for(var i=0;i<e.length;i+=2)if(o(e[i],e[i+1],t,n))return e.splice(i,i+2),!0;return!1}function a(e){if(!(Date.now()-c>p)){var t=e.touches&&e.touches.length?e.touches:[e],n=t[0].clientX,i=t[0].clientY;1>n&&1>i||d&&d[0]===n&&d[1]===i||(d&&(d=null),"label"===e.target.tagName.toLowerCase()&&(d=[n,i]),r(u,n,i)||(e.stopPropagation(),e.preventDefault(),e.target&&e.target.blur()))}}function s(e){var t=e.touches&&e.touches.length?e.touches:[e],i=t[0].clientX,o=t[0].clientY;u.push(i,o),n(function(){for(var e=0;e<u.length;e+=2)if(u[e]==i&&u[e+1]==o)return void u.splice(e,e+2)},p,!1)}function l(e,t){u||(i[0].addEventListener("click",a,!0),i[0].addEventListener("touchstart",s,!0),u=[]),c=Date.now(),r(u,e,t)}var c,u,d,f=750,h=12,p=2500,m=25,g="ng-click-active";return function(n,i,o){function r(){p=!1,i.removeClass(g)}var a,s,c,u,d=e(o.ngClick),p=!1;i.on("touchstart",function(e){p=!0,a=e.target?e.target:e.srcElement,3==a.nodeType&&(a=a.parentNode),i.addClass(g),s=Date.now();var t=e.touches&&e.touches.length?e.touches:[e],n=t[0].originalEvent||t[0];c=n.clientX,u=n.clientY}),i.on("touchmove",function(e){r()}),i.on("touchcancel",function(e){r()}),i.on("touchend",function(e){var n=Date.now()-s,d=e.changedTouches&&e.changedTouches.length?e.changedTouches:e.touches&&e.touches.length?e.touches:[e],m=d[0].originalEvent||d[0],g=m.clientX,v=m.clientY,y=Math.sqrt(Math.pow(g-c,2)+Math.pow(v-u,2));p&&f>n&&h>y&&(l(g,v),a&&a.blur(),t.isDefined(o.disabled)&&o.disabled!==!1||i.triggerHandler("click",[e])),r()}),i.onclick=function(e){},i.on("click",function(e,t){n.$apply(function(){d(n,{$event:t||e})})}),i.on("mousedown",function(e){i.addClass(g)}),i.on("mousemove mouseup",function(e){i.removeClass(g)})}}]),i("ngSwipeLeft",-1,"swipeleft"),i("ngSwipeRight",1,"swiperight")}(window,window.angular),function(){"use strict";function e(e,t){return e.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:"",format:null}).constant("moment",t).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(t,n,i,o,r){return function(a,s,l){function c(){var e;if(o.serverTime){var t=(new Date).getTime(),i=t-x+o.serverTime;e=n(i)}else e=n();return e}function u(){g&&(t.clearTimeout(g),g=null)}function d(e){if(s.text(e.from(c(),y)),b&&!s.attr("title")&&s.attr("title",e.local().format(b)),!k){var n=Math.abs(c().diff(e,"minute")),i=3600;1>n?i=1:60>n?i=30:180>n&&(i=300),g=t.setTimeout(function(){d(e)},1e3*i)}}function f(e){S&&s.attr("datetime",e)}function h(){if(u(),p){var e=i.preprocessDate(p,w,v);d(e),f(e.toISOString())}}var p,m,g=null,v=r.format,y=o.withoutSuffix,b=o.titleFormat,x=(new Date).getTime(),w=r.preprocess,C=l.amTimeAgo.replace(/^::/,""),k=0===l.amTimeAgo.indexOf("::"),S="TIME"===s[0].nodeName.toUpperCase();m=a.$watch(C,function(e){return"undefined"==typeof e||null===e||""===e?(u(),void(p&&(s.text(""),f(""),p=null))):(p=e,h(),void(void 0!==e&&k&&m()))}),e.isDefined(l.amWithoutSuffix)&&a.$watch(l.amWithoutSuffix,function(e){"boolean"==typeof e?(y=e,h()):y=o.withoutSuffix}),l.$observe("amFormat",function(e){"undefined"!=typeof e&&(v=e,h())}),l.$observe("amPreprocess",function(e){w=e,h()}),a.$on("$destroy",function(){u()}),a.$on("amMoment:localeChanged",function(){h()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(t,n,i,o){var r=this;this.preprocessors={utc:t.utc,unix:t.unix},this.changeLocale=function(i){var o=(t.locale||t.lang)(i);return e.isDefined(i)&&(n.$broadcast("amMoment:localeChanged"),n.$broadcast("amMoment:languageChange")),o},this.changeLanguage=function(e){return i.warn("angular-moment: Usage of amMoment.changeLanguage() is deprecated. Please use changeLocale()"),r.changeLocale(e)},this.preprocessDate=function(n,r,a){return e.isUndefined(r)&&(r=o.preprocess),this.preprocessors[r]?this.preprocessors[r](n,a):(r&&i.warn("angular-moment: Ignoring unsupported value for preprocess: "+r),!isNaN(parseFloat(n))&&isFinite(n)?t(parseInt(n,10)):t(n,a))},this.applyTimezone=function(e){var t=o.timezone;return e&&t&&(e.tz?e=e.tz(t):i.warn("angular-moment: timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?")),e}}]).filter("amCalendar",["moment","amMoment",function(e,t){return function(n,i){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,i);var o=e(n);return o.isValid()?t.applyTimezone(o).calendar():""}}]).filter("amDateFormat",["moment","amMoment",function(e,t){return function(n,i,o){if("undefined"==typeof n||null===n)return"";n=t.preprocessDate(n,o);var r=e(n);return r.isValid()?t.applyTimezone(r).format(i):""}}]).filter("amDurationFormat",["moment",function(e){return function(t,n,i){return"undefined"==typeof t||null===t?"":e.duration(t,n).humanize(i)}}])}e(angular,window.moment)}(),/*
 * angular-ui-bootstrap
 * http://angular-ui.github.io/bootstrap/

 * Version: 0.12.0 - 2014-11-16
 * License: MIT
 */
angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.transition","ui.bootstrap.collapse","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.bindHtml","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.position","ui.bootstrap.datepicker","ui.bootstrap.dropdown","ui.bootstrap.modal","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["template/accordion/accordion-group.html","template/accordion/accordion.html","template/alert/alert.html","template/carousel/carousel.html","template/carousel/slide.html","template/datepicker/datepicker.html","template/datepicker/day.html","template/datepicker/month.html","template/datepicker/popup.html","template/datepicker/year.html","template/modal/backdrop.html","template/modal/window.html","template/pagination/pager.html","template/pagination/pagination.html","template/tooltip/tooltip-html-unsafe-popup.html","template/tooltip/tooltip-popup.html","template/popover/popover.html","template/progressbar/bar.html","template/progressbar/progress.html","template/progressbar/progressbar.html","template/rating/rating.html","template/tabs/tab.html","template/tabs/tabset.html","template/timepicker/timepicker.html","template/typeahead/typeahead-match.html","template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.transition",[]).factory("$transition",["$q","$timeout","$rootScope",function(e,t,n){function i(e){for(var t in e)if(void 0!==r.style[t])return e[t]}var o=function(i,r,a){a=a||{};var s=e.defer(),l=o[a.animation?"animationEndEventName":"transitionEndEventName"],c=function(e){n.$apply(function(){i.unbind(l,c),s.resolve(i)})};return l&&i.bind(l,c),t(function(){angular.isString(r)?i.addClass(r):angular.isFunction(r)?r(i):angular.isObject(r)&&i.css(r),l||s.resolve(i)}),s.promise.cancel=function(){l&&i.unbind(l,c),s.reject("Transition cancelled")},s.promise},r=document.createElement("trans"),a={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd",transition:"transitionend"},s={WebkitTransition:"webkitAnimationEnd",MozTransition:"animationend",OTransition:"oAnimationEnd",transition:"animationend"};return o.transitionEndEventName=i(a),o.animationEndEventName=i(s),o}]),angular.module("ui.bootstrap.collapse",["ui.bootstrap.transition"]).directive("collapse",["$transition",function(e){return{link:function(t,n,i){function o(t){function i(){c===o&&(c=void 0)}var o=e(n,t);return c&&c.cancel(),c=o,o.then(i,i),o}function r(){u?(u=!1,a()):(n.removeClass("collapse").addClass("collapsing"),o({height:n[0].scrollHeight+"px"}).then(a))}function a(){n.removeClass("collapsing"),n.addClass("collapse in"),n.css({height:"auto"})}function s(){if(u)u=!1,l(),n.css({height:0});else{n.css({height:n[0].scrollHeight+"px"});n[0].offsetWidth;n.removeClass("collapse in").addClass("collapsing"),o({height:0}).then(l)}}function l(){n.removeClass("collapsing"),n.addClass("collapse")}var c,u=!0;t.$watch(i.collapse,function(e){e?s():r()})}}}]),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse"]).constant("accordionConfig",{closeOthers:!0}).controller("AccordionController",["$scope","$attrs","accordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(i){var o=angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers;o&&angular.forEach(this.groups,function(e){e!==i&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(n){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("accordion",function(){return{restrict:"EA",controller:"AccordionController",transclude:!0,replace:!1,templateUrl:"template/accordion/accordion.html"}}).directive("accordionGroup",function(){return{require:"^accordion",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/accordion/accordion-group.html",scope:{heading:"@",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,i){i.addGroup(e),e.$watch("isOpen",function(t){t&&i.closeOthers(e)}),e.toggleOpen=function(){e.isDisabled||(e.isOpen=!e.isOpen)}}}}).directive("accordionHeading",function(){return{restrict:"EA",transclude:!0,template:"",replace:!0,require:"^accordionGroup",link:function(e,t,n,i,o){i.setHeading(o(e,function(){}))}}}).directive("accordionTransclude",function(){return{require:"^accordionGroup",link:function(e,t,n,i){e.$watch(function(){return i[n.accordionTransclude]},function(e){e&&(t.html(""),t.append(e))})}}}),angular.module("ui.bootstrap.alert",[]).controller("AlertController",["$scope","$attrs",function(e,t){e.closeable="close"in t,this.close=e.close}]).directive("alert",function(){return{restrict:"EA",controller:"AlertController",templateUrl:"template/alert/alert.html",transclude:!0,replace:!0,scope:{type:"@",close:"&"}}}).directive("dismissOnTimeout",["$timeout",function(e){return{require:"alert",link:function(t,n,i,o){e(function(){o.close()},parseInt(i.dismissOnTimeout,10))}}}]),angular.module("ui.bootstrap.bindHtml",[]).directive("bindHtmlUnsafe",function(){return function(e,t,n){t.addClass("ng-binding").data("$binding",n.bindHtmlUnsafe),e.$watch(n.bindHtmlUnsafe,function(e){t.html(e||"")})}}),angular.module("ui.bootstrap.buttons",[]).constant("buttonConfig",{activeClass:"active",toggleEvent:"click"}).controller("ButtonsController",["buttonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("btnRadio",function(){return{require:["btnRadio","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){var o=i[0],r=i[1];r.$render=function(){t.toggleClass(o.activeClass,angular.equals(r.$modelValue,e.$eval(n.btnRadio)))},t.bind(o.toggleEvent,function(){var i=t.hasClass(o.activeClass);(!i||angular.isDefined(n.uncheckable))&&e.$apply(function(){r.$setViewValue(i?null:e.$eval(n.btnRadio)),r.$render()})})}}}).directive("btnCheckbox",function(){return{require:["btnCheckbox","ngModel"],controller:"ButtonsController",link:function(e,t,n,i){function o(){return a(n.btnCheckboxTrue,!0)}function r(){return a(n.btnCheckboxFalse,!1)}function a(t,n){var i=e.$eval(t);return angular.isDefined(i)?i:n}var s=i[0],l=i[1];l.$render=function(){t.toggleClass(s.activeClass,angular.equals(l.$modelValue,o()))},t.bind(s.toggleEvent,function(){e.$apply(function(){l.$setViewValue(t.hasClass(s.activeClass)?r():o()),l.$render()})})}}}),angular.module("ui.bootstrap.carousel",["ui.bootstrap.transition"]).controller("CarouselController",["$scope","$timeout","$interval","$transition",function(e,t,n,i){function o(){r();var t=+e.interval;!isNaN(t)&&t>0&&(s=n(a,t))}function r(){s&&(n.cancel(s),s=null)}function a(){var t=+e.interval;l&&!isNaN(t)&&t>0?e.next():e.pause()}var s,l,c=this,u=c.slides=e.slides=[],d=-1;c.currentSlide=null;var f=!1;c.select=e.select=function(n,r){function a(){if(!f){if(c.currentSlide&&angular.isString(r)&&!e.noTransition&&n.$element){n.$element.addClass(r);n.$element[0].offsetWidth;angular.forEach(u,function(e){angular.extend(e,{direction:"",entering:!1,leaving:!1,active:!1})}),angular.extend(n,{direction:r,active:!0,entering:!0}),angular.extend(c.currentSlide||{},{direction:r,leaving:!0}),e.$currentTransition=i(n.$element,{}),function(t,n){e.$currentTransition.then(function(){s(t,n)},function(){s(t,n)})}(n,c.currentSlide)}else s(n,c.currentSlide);c.currentSlide=n,d=l,o()}}function s(t,n){angular.extend(t,{direction:"",active:!0,leaving:!1,entering:!1}),angular.extend(n||{},{direction:"",active:!1,leaving:!1,entering:!1}),e.$currentTransition=null}var l=u.indexOf(n);void 0===r&&(r=l>d?"next":"prev"),n&&n!==c.currentSlide&&(e.$currentTransition?(e.$currentTransition.cancel(),t(a)):a())},e.$on("$destroy",function(){f=!0}),c.indexOfSlide=function(e){return u.indexOf(e)},e.next=function(){var t=(d+1)%u.length;return e.$currentTransition?void 0:c.select(u[t],"next")},e.prev=function(){var t=0>d-1?u.length-1:d-1;return e.$currentTransition?void 0:c.select(u[t],"prev")},e.isActive=function(e){return c.currentSlide===e},e.$watch("interval",o),e.$on("$destroy",r),e.play=function(){l||(l=!0,o())},e.pause=function(){e.noPause||(l=!1,r())},c.addSlide=function(t,n){t.$element=n,u.push(t),1===u.length||t.active?(c.select(u[u.length-1]),1==u.length&&e.play()):t.active=!1},c.removeSlide=function(e){var t=u.indexOf(e);u.splice(t,1),u.length>0&&e.active?t>=u.length?c.select(u[t-1]):c.select(u[t]):d>t&&d--}}]).directive("carousel",[function(){return{restrict:"EA",transclude:!0,replace:!0,controller:"CarouselController",require:"carousel",templateUrl:"template/carousel/carousel.html",scope:{interval:"=",noTransition:"=",noPause:"="}}}]).directive("slide",function(){return{require:"^carousel",restrict:"EA",transclude:!0,replace:!0,templateUrl:"template/carousel/slide.html",scope:{active:"=?"},link:function(e,t,n,i){i.addSlide(e,t),e.$on("$destroy",function(){i.removeSlide(e)}),e.$watch("active",function(t){t&&i.select(e)})}}}),angular.module("ui.bootstrap.dateparser",[]).service("dateParser",["$locale","orderByFilter",function(e,t){function n(e){var n=[],i=e.split("");return angular.forEach(o,function(t,o){var r=e.indexOf(o);if(r>-1){e=e.split(""),i[r]="("+t.regex+")",e[r]="$";for(var a=r+1,s=r+o.length;s>a;a++)i[a]="",e[a]="$";e=e.join(""),n.push({index:r,apply:t.apply})}}),{regex:new RegExp("^"+i.join("")+"$"),map:t(n,"index")}}function i(e,t,n){return 1===t&&n>28?29===n&&(e%4===0&&e%100!==0||e%400===0):3===t||5===t||8===t||10===t?31>n:!0}this.parsers={};var o={yyyy:{regex:"\\d{4}",apply:function(e){this.year=+e}},yy:{regex:"\\d{2}",apply:function(e){this.year=+e+2e3}},y:{regex:"\\d{1,4}",apply:function(e){this.year=+e}},MMMM:{regex:e.DATETIME_FORMATS.MONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.MONTH.indexOf(t)}},MMM:{regex:e.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(t){this.month=e.DATETIME_FORMATS.SHORTMONTH.indexOf(t)}},MM:{regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1}},M:{regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1}},dd:{regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},d:{regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e}},EEEE:{regex:e.DATETIME_FORMATS.DAY.join("|")},EEE:{regex:e.DATETIME_FORMATS.SHORTDAY.join("|")}};this.parse=function(t,o){if(!angular.isString(t)||!o)return t;o=e.DATETIME_FORMATS[o]||o,this.parsers[o]||(this.parsers[o]=n(o));var r=this.parsers[o],a=r.regex,s=r.map,l=t.match(a);if(l&&l.length){for(var c,u={year:1900,month:0,date:1,hours:0},d=1,f=l.length;f>d;d++){var h=s[d-1];h.apply&&h.apply.call(u,l[d])}return i(u.year,u.month,u.date)&&(c=new Date(u.year,u.month,u.date,u.hours)),c}}}]),angular.module("ui.bootstrap.position",[]).factory("$position",["$document","$window",function(e,t){function n(e,n){return e.currentStyle?e.currentStyle[n]:t.getComputedStyle?t.getComputedStyle(e)[n]:e.style[n]}function i(e){return"static"===(n(e,"position")||"static")}var o=function(t){for(var n=e[0],o=t.offsetParent||n;o&&o!==n&&i(o);)o=o.offsetParent;return o||n};return{position:function(t){var n=this.offset(t),i={top:0,left:0},r=o(t[0]);r!=e[0]&&(i=this.offset(angular.element(r)),i.top+=r.clientTop-r.scrollTop,i.left+=r.clientLeft-r.scrollLeft);var a=t[0].getBoundingClientRect();return{width:a.width||t.prop("offsetWidth"),height:a.height||t.prop("offsetHeight"),top:n.top-i.top,left:n.left-i.left}},offset:function(n){var i=n[0].getBoundingClientRect();return{width:i.width||n.prop("offsetWidth"),height:i.height||n.prop("offsetHeight"),top:i.top+(t.pageYOffset||e[0].documentElement.scrollTop),left:i.left+(t.pageXOffset||e[0].documentElement.scrollLeft)}},positionElements:function(e,t,n,i){var o,r,a,s,l=n.split("-"),c=l[0],u=l[1]||"center";o=i?this.offset(e):this.position(e),r=t.prop("offsetWidth"),a=t.prop("offsetHeight");var d={center:function(){return o.left+o.width/2-r/2},left:function(){return o.left},right:function(){return o.left+o.width}},f={center:function(){return o.top+o.height/2-a/2},top:function(){return o.top},bottom:function(){return o.top+o.height}};switch(c){case"right":s={top:f[u](),left:d[c]()};break;case"left":s={top:f[u](),left:o.left-r};break;case"bottom":s={top:f[c](),left:d[u]()};break;default:s={top:o.top-a,left:d[u]()}}return s}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).constant("datepickerConfig",{formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",datepickerMode:"day",minMode:"day",maxMode:"year",showWeeks:!0,startingDay:0,yearRange:20,minDate:null,maxDate:null}).controller("DatepickerController",["$scope","$attrs","$parse","$interpolate","$timeout","$log","dateFilter","datepickerConfig",function(e,t,n,i,o,r,a,s){var l=this,c={$setViewValue:angular.noop};this.modes=["day","month","year"],angular.forEach(["formatDay","formatMonth","formatYear","formatDayHeader","formatDayTitle","formatMonthTitle","minMode","maxMode","showWeeks","startingDay","yearRange"],function(n,o){l[n]=angular.isDefined(t[n])?8>o?i(t[n])(e.$parent):e.$parent.$eval(t[n]):s[n]}),angular.forEach(["minDate","maxDate"],function(i){t[i]?e.$parent.$watch(n(t[i]),function(e){l[i]=e?new Date(e):null,l.refreshView()}):l[i]=s[i]?new Date(s[i]):null}),e.datepickerMode=e.datepickerMode||s.datepickerMode,e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),this.activeDate=angular.isDefined(t.initDate)?e.$parent.$eval(t.initDate):new Date,e.isActive=function(t){return 0===l.compare(t.date,l.activeDate)?(e.activeDateId=t.uid,!0):!1},this.init=function(e){c=e,c.$render=function(){l.render()}},this.render=function(){if(c.$modelValue){var e=new Date(c.$modelValue),t=!isNaN(e);t?this.activeDate=e:r.error('Datepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.'),c.$setValidity("date",t)}this.refreshView()},this.refreshView=function(){if(this.element){this._refreshView();var e=c.$modelValue?new Date(c.$modelValue):null;c.$setValidity("date-disabled",!e||this.element&&!this.isDisabled(e))}},this.createDateObject=function(e,t){var n=c.$modelValue?new Date(c.$modelValue):null;return{date:e,label:a(e,t),selected:n&&0===this.compare(e,n),disabled:this.isDisabled(e),current:0===this.compare(e,new Date)}},this.isDisabled=function(n){return this.minDate&&this.compare(n,this.minDate)<0||this.maxDate&&this.compare(n,this.maxDate)>0||t.dateDisabled&&e.dateDisabled({date:n,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===l.minMode){var n=c.$modelValue?new Date(c.$modelValue):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),c.$setViewValue(n),c.$render()}else l.activeDate=t,e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)-1]},e.move=function(e){var t=l.activeDate.getFullYear()+e*(l.step.years||0),n=l.activeDate.getMonth()+e*(l.step.months||0);l.activeDate.setFullYear(t,n,1),l.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===l.maxMode&&1===t||e.datepickerMode===l.minMode&&-1===t||(e.datepickerMode=l.modes[l.modes.indexOf(e.datepickerMode)+t])},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var u=function(){o(function(){l.element[0].focus()},0,!1)};e.$on("datepicker.focus",u),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey)if(t.preventDefault(),t.stopPropagation(),"enter"===n||"space"===n){if(l.isDisabled(l.activeDate))return;e.select(l.activeDate),u()}else!t.ctrlKey||"up"!==n&&"down"!==n?(l.handleKeyDown(n,t),l.refreshView()):(e.toggleMode("up"===n?1:-1),u())}}]).directive("datepicker",function(){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/datepicker.html",scope:{datepickerMode:"=?",dateDisabled:"&"},require:["datepicker","?^ngModel"],controller:"DatepickerController",link:function(e,t,n,i){var o=i[0],r=i[1];r&&o.init(r)}}}).directive("daypicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/day.html",require:"^datepicker",link:function(t,n,i,o){function r(e,t){return 1!==t||e%4!==0||e%100===0&&e%400!==0?l[t]:29}function a(e,t){var n=new Array(t),i=new Date(e),o=0;for(i.setHours(12);t>o;)n[o++]=new Date(i),i.setDate(i.getDate()+1);return n}function s(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}t.showWeeks=o.showWeeks,o.step={months:1},o.element=n;var l=[31,28,31,30,31,30,31,31,30,31,30,31];o._refreshView=function(){var n=o.activeDate.getFullYear(),i=o.activeDate.getMonth(),r=new Date(n,i,1),l=o.startingDay-r.getDay(),c=l>0?7-l:-l,u=new Date(r);c>0&&u.setDate(-c+1);for(var d=a(u,42),f=0;42>f;f++)d[f]=angular.extend(o.createDateObject(d[f],o.formatDay),{secondary:d[f].getMonth()!==i,uid:t.uniqueId+"-"+f});t.labels=new Array(7);for(var h=0;7>h;h++)t.labels[h]={abbr:e(d[h].date,o.formatDayHeader),full:e(d[h].date,"EEEE")};if(t.title=e(o.activeDate,o.formatDayTitle),t.rows=o.split(d,7),t.showWeeks){t.weekNumbers=[];for(var p=s(t.rows[0][0].date),m=t.rows.length;t.weekNumbers.push(p++)<m;);}},o.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},o.handleKeyDown=function(e,t){var n=o.activeDate.getDate();if("left"===e)n-=1;else if("up"===e)n-=7;else if("right"===e)n+=1;else if("down"===e)n+=7;else if("pageup"===e||"pagedown"===e){var i=o.activeDate.getMonth()+("pageup"===e?-1:1);o.activeDate.setMonth(i,1),n=Math.min(r(o.activeDate.getFullYear(),o.activeDate.getMonth()),n)}else"home"===e?n=1:"end"===e&&(n=r(o.activeDate.getFullYear(),o.activeDate.getMonth()));o.activeDate.setDate(n)},o.refreshView()}}}]).directive("monthpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/month.html",require:"^datepicker",link:function(t,n,i,o){o.step={years:1},o.element=n,o._refreshView=function(){for(var n=new Array(12),i=o.activeDate.getFullYear(),r=0;12>r;r++)n[r]=angular.extend(o.createDateObject(new Date(i,r,1),o.formatMonth),{uid:t.uniqueId+"-"+r});t.title=e(o.activeDate,o.formatMonthTitle),t.rows=o.split(n,3)},o.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth())-new Date(t.getFullYear(),t.getMonth())},o.handleKeyDown=function(e,t){var n=o.activeDate.getMonth();if("left"===e)n-=1;else if("up"===e)n-=3;else if("right"===e)n+=1;else if("down"===e)n+=3;else if("pageup"===e||"pagedown"===e){var i=o.activeDate.getFullYear()+("pageup"===e?-1:1);o.activeDate.setFullYear(i)}else"home"===e?n=0:"end"===e&&(n=11);o.activeDate.setMonth(n)},o.refreshView()}}}]).directive("yearpicker",["dateFilter",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/datepicker/year.html",require:"^datepicker",link:function(e,t,n,i){function o(e){return parseInt((e-1)/r,10)*r+1}var r=i.yearRange;i.step={years:r},i.element=t,i._refreshView=function(){for(var t=new Array(r),n=0,a=o(i.activeDate.getFullYear());r>n;n++)t[n]=angular.extend(i.createDateObject(new Date(a+n,0,1),i.formatYear),{uid:e.uniqueId+"-"+n});e.title=[t[0].label,t[r-1].label].join(" - "),e.rows=i.split(t,5)},i.compare=function(e,t){return e.getFullYear()-t.getFullYear()},i.handleKeyDown=function(e,t){var n=i.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=5:"right"===e?n+=1:"down"===e?n+=5:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*i.step.years:"home"===e?n=o(i.activeDate.getFullYear()):"end"===e&&(n=o(i.activeDate.getFullYear())+r-1),i.activeDate.setFullYear(n)},i.refreshView()}}}]).constant("datepickerPopupConfig",{datepickerPopup:"yyyy-MM-dd",currentText:"Today",clearText:"Clear",closeText:"Done",closeOnDateSelection:!0,appendToBody:!1,showButtonBar:!0}).directive("datepickerPopup",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(e,t,n,i,o,r,a){return{restrict:"EA",require:"ngModel",scope:{isOpen:"=?",currentText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(s,l,c,u){function d(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function f(e){if(e){if(angular.isDate(e)&&!isNaN(e))return u.$setValidity("date",!0),e;if(angular.isString(e)){var t=r.parse(e,h)||new Date(e);return isNaN(t)?void u.$setValidity("date",!1):(u.$setValidity("date",!0),t)}return void u.$setValidity("date",!1)}return u.$setValidity("date",!0),null}var h,p=angular.isDefined(c.closeOnDateSelection)?s.$parent.$eval(c.closeOnDateSelection):a.closeOnDateSelection,m=angular.isDefined(c.datepickerAppendToBody)?s.$parent.$eval(c.datepickerAppendToBody):a.appendToBody;s.showButtonBar=angular.isDefined(c.showButtonBar)?s.$parent.$eval(c.showButtonBar):a.showButtonBar,s.getText=function(e){return s[e+"Text"]||a[e+"Text"]},c.$observe("datepickerPopup",function(e){h=e||a.datepickerPopup,u.$render()});var g=angular.element("<div datepicker-popup-wrap><div datepicker></div></div>");g.attr({"ng-model":"date","ng-change":"dateSelection()"});var v=angular.element(g.children()[0]);c.datepickerOptions&&angular.forEach(s.$parent.$eval(c.datepickerOptions),function(e,t){v.attr(d(t),e)}),s.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(e){if(c[e]){var n=t(c[e]);if(s.$parent.$watch(n,function(t){s.watchData[e]=t}),v.attr(d(e),"watchData."+e),"datepickerMode"===e){var i=n.assign;s.$watch("watchData."+e,function(e,t){e!==t&&i(s.$parent,e)})}}}),c.dateDisabled&&v.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),u.$parsers.unshift(f),s.dateSelection=function(e){angular.isDefined(e)&&(s.date=e),u.$setViewValue(s.date),u.$render(),p&&(s.isOpen=!1,l[0].focus())},l.bind("input change keyup",function(){s.$apply(function(){s.date=u.$modelValue})}),u.$render=function(){var e=u.$viewValue?o(u.$viewValue,h):"";l.val(e),s.date=f(u.$modelValue)};var y=function(e){s.isOpen&&e.target!==l[0]&&s.$apply(function(){s.isOpen=!1})},b=function(e,t){s.keydown(e)};l.bind("keydown",b),s.keydown=function(e){27===e.which?(e.preventDefault(),e.stopPropagation(),s.close()):40!==e.which||s.isOpen||(s.isOpen=!0)},s.$watch("isOpen",function(e){e?(s.$broadcast("datepicker.focus"),s.position=m?i.offset(l):i.position(l),s.position.top=s.position.top+l.prop("offsetHeight"),n.bind("click",y)):n.unbind("click",y)}),s.select=function(e){if("today"===e){var t=new Date;angular.isDate(u.$modelValue)?(e=new Date(u.$modelValue),e.setFullYear(t.getFullYear(),t.getMonth(),t.getDate())):e=new Date(t.setHours(0,0,0,0))}s.dateSelection(e)},s.close=function(){s.isOpen=!1,l[0].focus()};var x=e(g)(s);g.remove(),m?n.find("body").append(x):l.after(x),s.$on("$destroy",function(){x.remove(),l.unbind("keydown",b),n.unbind("click",y)})}}}]).directive("datepickerPopupWrap",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datepicker/popup.html",link:function(e,t,n){t.bind("click",function(e){e.preventDefault(),e.stopPropagation()})}}}),angular.module("ui.bootstrap.dropdown",[]).constant("dropdownConfig",{openClass:"open"}).service("dropdownService",["$document",function(e){var t=null;this.open=function(o){t||(e.bind("click",n),e.bind("keydown",i)),t&&t!==o&&(t.isOpen=!1),t=o},this.close=function(o){t===o&&(t=null,e.unbind("click",n),e.unbind("keydown",i))};var n=function(e){if(t){var n=t.getToggleElement();e&&n&&n[0].contains(e.target)||t.$apply(function(){t.isOpen=!1})}},i=function(e){27===e.which&&(t.focusToggleElement(),n())}}]).controller("DropdownController",["$scope","$attrs","$parse","dropdownConfig","dropdownService","$animate",function(e,t,n,i,o,r){var a,s=this,l=e.$new(),c=i.openClass,u=angular.noop,d=t.onToggle?n(t.onToggle):angular.noop;this.init=function(i){s.$element=i,t.isOpen&&(a=n(t.isOpen),u=a.assign,e.$watch(a,function(e){l.isOpen=!!e}))},this.toggle=function(e){return l.isOpen=arguments.length?!!e:!l.isOpen},this.isOpen=function(){return l.isOpen},l.getToggleElement=function(){return s.toggleElement},l.focusToggleElement=function(){s.toggleElement&&s.toggleElement[0].focus()},l.$watch("isOpen",function(t,n){r[t?"addClass":"removeClass"](s.$element,c),t?(l.focusToggleElement(),o.open(l)):o.close(l),u(e,t),angular.isDefined(t)&&t!==n&&d(e,{open:!!t})}),e.$on("$locationChangeSuccess",function(){l.isOpen=!1}),e.$on("$destroy",function(){l.$destroy()})}]).directive("dropdown",function(){return{controller:"DropdownController",link:function(e,t,n,i){i.init(t)}}}).directive("dropdownToggle",function(){return{require:"?^dropdown",link:function(e,t,n,i){if(i){i.toggleElement=t;var o=function(o){o.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){i.toggle()})};t.bind("click",o),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(i.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.unbind("click",o)})}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.transition"]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t==e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,i=0;i<e.length;i++)if(t==e[i].key){n=i;break}return e.splice(n,1)[0]},removeTop:function(){return e.splice(e.length-1,1)[0]},length:function(){return e.length}}}}}).directive("modalBackdrop",["$timeout",function(e){return{restrict:"EA",replace:!0,templateUrl:"template/modal/backdrop.html",link:function(t,n,i){t.backdropClass=i.backdropClass||"",t.animate=!1,e(function(){t.animate=!0})}}}]).directive("modalWindow",["$modalStack","$timeout",function(e,t){return{restrict:"EA",scope:{index:"@",animate:"="},replace:!0,transclude:!0,templateUrl:function(e,t){return t.templateUrl||"template/modal/window.html"},link:function(n,i,o){i.addClass(o.windowClass||""),n.size=o.size,t(function(){n.animate=!0,i[0].querySelectorAll("[autofocus]").length||i[0].focus()}),n.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!=n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))}}}}]).directive("modalTransclude",function(){return{link:function(e,t,n,i,o){o(e.$parent,function(e){t.empty(),t.append(e)})}}}).factory("$modalStack",["$transition","$timeout","$document","$compile","$rootScope","$$stackedMap",function(e,t,n,i,o,r){function a(){for(var e=-1,t=h.keys(),n=0;n<t.length;n++)h.get(t[n]).value.backdrop&&(e=n);return e}function s(e){var t=n.find("body").eq(0),i=h.get(e).value;h.remove(e),c(i.modalDomEl,i.modalScope,300,function(){i.modalScope.$destroy(),t.toggleClass(f,h.length()>0),l()})}function l(){if(u&&-1==a()){var e=d;c(u,d,150,function(){e.$destroy(),e=null}),u=void 0,d=void 0}}function c(n,i,o,r){function a(){a.done||(a.done=!0,n.remove(),r&&r())}i.animate=!1;var s=e.transitionEndEventName;if(s){var l=t(a,o);n.bind(s,function(){t.cancel(l),a(),i.$apply()})}else t(a)}var u,d,f="modal-open",h=r.createNew(),p={};return o.$watch(a,function(e){d&&(d.index=e)}),n.bind("keydown",function(e){var t;27===e.which&&(t=h.top(),t&&t.value.keyboard&&(e.preventDefault(),o.$apply(function(){p.dismiss(t.key,"escape key press")})))}),p.open=function(e,t){h.add(e,{deferred:t.deferred,modalScope:t.scope,backdrop:t.backdrop,keyboard:t.keyboard});var r=n.find("body").eq(0),s=a();if(s>=0&&!u){d=o.$new(!0),d.index=s;var l=angular.element("<div modal-backdrop></div>");l.attr("backdrop-class",t.backdropClass),u=i(l)(d),r.append(u)}var c=angular.element("<div modal-window></div>");c.attr({"template-url":t.windowTemplateUrl,"window-class":t.windowClass,size:t.size,index:h.length()-1,animate:"animate"}).html(t.content);var p=i(c)(t.scope);h.top().value.modalDomEl=p,r.append(p),r.addClass(f)},p.close=function(e,t){var n=h.get(e);n&&(n.value.deferred.resolve(t),s(e))},p.dismiss=function(e,t){var n=h.get(e);n&&s(e)},p.dismissAll=function(e){for(var t=this.getTop();t;)this.dismiss(t.key,e),t=this.getTop()},p.getTop=function(){return h.top()},p}]).provider("$modal",function(){var e={options:{backdrop:!0,keyboard:!0},$get:["$injector","$rootScope","$q","$http","$templateCache","$controller","$modalStack",function(t,n,i,o,r,a,s){function l(e){return e.template?i.when(e.template):o.get(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl,{cache:r}).then(function(e){return e.data})}function c(e){var n=[];return angular.forEach(e,function(e){(angular.isFunction(e)||angular.isArray(e))&&n.push(i.when(t.invoke(e)))}),n}var u={};return u.open=function(t){var o=i.defer(),r=i.defer(),u={result:o.promise,opened:r.promise,close:function(e){s.close(u,e)},dismiss:function(e){s.dismiss(u,e)}};if(t=angular.extend({},e.options,t),t.resolve=t.resolve||{},!t.template&&!t.templateUrl)throw new Error("One of template or templateUrl options is required.");var d=i.all([l(t)].concat(c(t.resolve)));return d.then(function(e){var i=(t.scope||n).$new();i.$close=u.close,i.$dismiss=u.dismiss;var r,l={},c=1;t.controller&&(l.$scope=i,l.$modalInstance=u,angular.forEach(t.resolve,function(t,n){l[n]=e[c++]}),r=a(t.controller,l),t.controllerAs&&(i[t.controllerAs]=r)),s.open(u,{scope:i,deferred:o,content:e[0],backdrop:t.backdrop,keyboard:t.keyboard,backdropClass:t.backdropClass,windowClass:t.windowClass,windowTemplateUrl:t.windowTemplateUrl,size:t.size})},function(e){o.reject(e)}),d.then(function(){r.resolve(!0)},function(){r.reject(!1)}),u},u}]};return e}),angular.module("ui.bootstrap.pagination",[]).controller("PaginationController",["$scope","$attrs","$parse",function(e,t,n){var i=this,o={$setViewValue:angular.noop},r=t.numPages?n(t.numPages).assign:angular.noop;this.init=function(r,a){o=r,this.config=a,o.$render=function(){i.render()},t.itemsPerPage?e.$parent.$watch(n(t.itemsPerPage),function(t){i.itemsPerPage=parseInt(t,10),e.totalPages=i.calculateTotalPages()}):this.itemsPerPage=a.itemsPerPage},this.calculateTotalPages=function(){var t=this.itemsPerPage<1?1:Math.ceil(e.totalItems/this.itemsPerPage);return Math.max(t||0,1)},this.render=function(){e.page=parseInt(o.$viewValue,10)||1},e.selectPage=function(t){e.page!==t&&t>0&&t<=e.totalPages&&(o.$setViewValue(t),o.$render())},e.getText=function(t){return e[t+"Text"]||i.config[t+"Text"]},e.noPrevious=function(){return 1===e.page},e.noNext=function(){return e.page===e.totalPages},e.$watch("totalItems",function(){e.totalPages=i.calculateTotalPages()}),e.$watch("totalPages",function(t){r(e.$parent,t),e.page>t?e.selectPage(t):o.$render()})}]).constant("paginationConfig",{itemsPerPage:10,boundaryLinks:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0}).directive("pagination",["$parse","paginationConfig",function(e,t){return{restrict:"EA",scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@"},require:["pagination","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pagination.html",replace:!0,link:function(n,i,o,r){function a(e,t,n){return{number:e,text:t,active:n}}function s(e,t){var n=[],i=1,o=t,r=angular.isDefined(u)&&t>u;r&&(d?(i=Math.max(e-Math.floor(u/2),1),o=i+u-1,o>t&&(o=t,i=o-u+1)):(i=(Math.ceil(e/u)-1)*u+1,o=Math.min(i+u-1,t)));for(var s=i;o>=s;s++){var l=a(s,s,s===e);n.push(l)}if(r&&!d){if(i>1){var c=a(i-1,"...",!1);n.unshift(c)}if(t>o){var f=a(o+1,"...",!1);n.push(f)}}return n}var l=r[0],c=r[1];if(c){var u=angular.isDefined(o.maxSize)?n.$parent.$eval(o.maxSize):t.maxSize,d=angular.isDefined(o.rotate)?n.$parent.$eval(o.rotate):t.rotate;n.boundaryLinks=angular.isDefined(o.boundaryLinks)?n.$parent.$eval(o.boundaryLinks):t.boundaryLinks,n.directionLinks=angular.isDefined(o.directionLinks)?n.$parent.$eval(o.directionLinks):t.directionLinks,
l.init(c,t),o.maxSize&&n.$parent.$watch(e(o.maxSize),function(e){u=parseInt(e,10),l.render()});var f=l.render;l.render=function(){f(),n.page>0&&n.page<=n.totalPages&&(n.pages=s(n.page,n.totalPages))}}}}}]).constant("pagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("pager",["pagerConfig",function(e){return{restrict:"EA",scope:{totalItems:"=",previousText:"@",nextText:"@"},require:["pager","?ngModel"],controller:"PaginationController",templateUrl:"template/pagination/pager.html",replace:!0,link:function(t,n,i,o){var r=o[0],a=o[1];a&&(t.align=angular.isDefined(i.align)?t.$parent.$eval(i.align):e.align,r.init(a,e))}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).provider("$tooltip",function(){function e(e){var t=/[A-Z]/g,n="-";return e.replace(t,function(e,t){return(t?n:"")+e.toLowerCase()})}var t={placement:"top",animation:!0,popupDelay:0},n={mouseenter:"mouseleave",click:"click",focus:"blur"},i={};this.options=function(e){angular.extend(i,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$position","$interpolate",function(o,r,a,s,l,c){return function(o,u,d){function f(e){var t=e||h.trigger||d,i=n[t]||t;return{show:t,hide:i}}var h=angular.extend({},t,i),p=e(o),m=c.startSymbol(),g=c.endSymbol(),v="<div "+p+'-popup title="'+m+"title"+g+'" content="'+m+"content"+g+'" placement="'+m+"placement"+g+'" animation="animation" is-open="isOpen"></div>';return{restrict:"EA",compile:function(e,t){var n=r(v);return function(e,t,i){function r(){A.isOpen?d():c()}function c(){(!_||e.$eval(i[u+"Enable"]))&&(y(),A.popupDelay?T||(T=a(p,A.popupDelay,!1),T.then(function(e){e()})):p()())}function d(){e.$apply(function(){m()})}function p(){return T=null,S&&(a.cancel(S),S=null),A.content?(g(),C.css({top:0,left:0,display:"block"}),$?s.find("body").append(C):t.after(C),N(),A.isOpen=!0,A.$digest(),N):angular.noop}function m(){A.isOpen=!1,a.cancel(T),T=null,A.animation?S||(S=a(v,500)):v()}function g(){C&&v(),k=A.$new(),C=n(k,angular.noop)}function v(){S=null,C&&(C.remove(),C=null),k&&(k.$destroy(),k=null)}function y(){b(),x()}function b(){var e=i[u+"Placement"];A.placement=angular.isDefined(e)?e:h.placement}function x(){var e=i[u+"PopupDelay"],t=parseInt(e,10);A.popupDelay=isNaN(t)?h.popupDelay:t}function w(){var e=i[u+"Trigger"];R(),E=f(e),E.show===E.hide?t.bind(E.show,r):(t.bind(E.show,c),t.bind(E.hide,d))}var C,k,S,T,$=angular.isDefined(h.appendToBody)?h.appendToBody:!1,E=f(void 0),_=angular.isDefined(i[u+"Enable"]),A=e.$new(!0),N=function(){var e=l.positionElements(t,C,A.placement,$);e.top+="px",e.left+="px",C.css(e)};A.isOpen=!1,i.$observe(o,function(e){A.content=e,!e&&A.isOpen&&m()}),i.$observe(u+"Title",function(e){A.title=e});var R=function(){t.unbind(E.show,c),t.unbind(E.hide,d)};w();var D=e.$eval(i[u+"Animation"]);A.animation=angular.isDefined(D)?!!D:h.animation;var L=e.$eval(i[u+"AppendToBody"]);$=angular.isDefined(L)?L:$,$&&e.$on("$locationChangeSuccess",function(){A.isOpen&&m()}),e.$on("$destroy",function(){a.cancel(S),a.cancel(T),R(),v(),A=null})}}}}}]}).directive("tooltipPopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-popup.html"}}).directive("tooltip",["$tooltip",function(e){return e("tooltip","tooltip","mouseenter")}]).directive("tooltipHtmlUnsafePopup",function(){return{restrict:"EA",replace:!0,scope:{content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/tooltip/tooltip-html-unsafe-popup.html"}}).directive("tooltipHtmlUnsafe",["$tooltip",function(e){return e("tooltipHtmlUnsafe","tooltip","mouseenter")}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("popoverPopup",function(){return{restrict:"EA",replace:!0,scope:{title:"@",content:"@",placement:"@",animation:"&",isOpen:"&"},templateUrl:"template/popover/popover.html"}}).directive("popover",["$tooltip",function(e){return e("popover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("progressConfig",{animate:!0,max:100}).controller("ProgressController",["$scope","$attrs","progressConfig",function(e,t,n){var i=this,o=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max,this.addBar=function(t,n){o||n.css({transition:"none"}),this.bars.push(t),t.$watch("value",function(n){t.percent=+(100*n/e.max).toFixed(2)}),t.$on("$destroy",function(){n=null,i.removeBar(t)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1)}}]).directive("progress",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",require:"progress",scope:{},templateUrl:"template/progressbar/progress.html"}}).directive("bar",function(){return{restrict:"EA",replace:!0,transclude:!0,require:"^progress",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/bar.html",link:function(e,t,n,i){i.addBar(e,t)}}}).directive("progressbar",function(){return{restrict:"EA",replace:!0,transclude:!0,controller:"ProgressController",scope:{value:"=",type:"@"},templateUrl:"template/progressbar/progressbar.html",link:function(e,t,n,i){i.addBar(e,angular.element(t.children()[0]))}}}),angular.module("ui.bootstrap.rating",[]).constant("ratingConfig",{max:5,stateOn:null,stateOff:null}).controller("RatingController",["$scope","$attrs","ratingConfig",function(e,t,n){var i={$setViewValue:angular.noop};this.init=function(o){i=o,i.$render=this.render,this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff;var r=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(r)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;n>t;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff},e[t]);return e},e.rate=function(t){!e.readonly&&t>=0&&t<=e.range.length&&(i.$setViewValue(t),i.$render())},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=i.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=i.$viewValue}}]).directive("rating",function(){return{restrict:"EA",require:["rating","ngModel"],scope:{readonly:"=?",onHover:"&",onLeave:"&"},controller:"RatingController",templateUrl:"template/rating/rating.html",replace:!0,link:function(e,t,n,i){var o=i[0],r=i[1];r&&o.init(r)}}}),angular.module("ui.bootstrap.tabs",[]).controller("TabsetController",["$scope",function(e){var t=this,n=t.tabs=e.tabs=[];t.select=function(e){angular.forEach(n,function(t){t.active&&t!==e&&(t.active=!1,t.onDeselect())}),e.active=!0,e.onSelect()},t.addTab=function(e){n.push(e),1===n.length?e.active=!0:e.active&&t.select(e)},t.removeTab=function(e){var o=n.indexOf(e);if(e.active&&n.length>1&&!i){var r=o==n.length-1?o-1:o+1;t.select(n[r])}n.splice(o,1)};var i;e.$on("$destroy",function(){i=!0})}]).directive("tabset",function(){return{restrict:"EA",transclude:!0,replace:!0,scope:{type:"@"},controller:"TabsetController",templateUrl:"template/tabs/tabset.html",link:function(e,t,n){e.vertical=angular.isDefined(n.vertical)?e.$parent.$eval(n.vertical):!1,e.justified=angular.isDefined(n.justified)?e.$parent.$eval(n.justified):!1}}}).directive("tab",["$parse",function(e){return{require:"^tabset",restrict:"EA",replace:!0,templateUrl:"template/tabs/tab.html",transclude:!0,scope:{active:"=?",heading:"@",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},compile:function(t,n,i){return function(t,n,o,r){t.$watch("active",function(e){e&&r.select(t)}),t.disabled=!1,o.disabled&&t.$parent.$watch(e(o.disabled),function(e){t.disabled=!!e}),t.select=function(){t.disabled||(t.active=!0)},r.addTab(t),t.$on("$destroy",function(){r.removeTab(t)}),t.$transcludeFn=i}}}}]).directive("tabHeadingTransclude",[function(){return{restrict:"A",require:"^tab",link:function(e,t,n,i){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}]).directive("tabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("tab-heading")||e.hasAttribute("data-tab-heading")||"tab-heading"===e.tagName.toLowerCase()||"data-tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^tabset",link:function(t,n,i){var o=t.$eval(i.tabContentTransclude);o.$transcludeFn(o.$parent,function(t){angular.forEach(t,function(t){e(t)?o.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("timepickerConfig",{hourStep:1,minuteStep:1,showMeridian:!0,meridians:null,readonlyInput:!1,mousewheel:!0}).controller("TimepickerController",["$scope","$attrs","$parse","$log","$locale","timepickerConfig",function(e,t,n,i,o,r){function a(){var t=parseInt(e.hours,10),n=e.showMeridian?t>0&&13>t:t>=0&&24>t;return n?(e.showMeridian&&(12===t&&(t=0),e.meridian===m[1]&&(t+=12)),t):void 0}function s(){var t=parseInt(e.minutes,10);return t>=0&&60>t?t:void 0}function l(e){return angular.isDefined(e)&&e.toString().length<2?"0"+e:e}function c(e){u(),p.$setViewValue(new Date(h)),d(e)}function u(){p.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1}function d(t){var n=h.getHours(),i=h.getMinutes();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:l(n),e.minutes="m"===t?i:l(i),e.meridian=h.getHours()<12?m[0]:m[1]}function f(e){var t=new Date(h.getTime()+6e4*e);h.setHours(t.getHours(),t.getMinutes()),c()}var h=new Date,p={$setViewValue:angular.noop},m=angular.isDefined(t.meridians)?e.$parent.$eval(t.meridians):r.meridians||o.DATETIME_FORMATS.AMPMS;this.init=function(n,i){p=n,p.$render=this.render;var o=i.eq(0),a=i.eq(1),s=angular.isDefined(t.mousewheel)?e.$parent.$eval(t.mousewheel):r.mousewheel;s&&this.setupMousewheelEvents(o,a),e.readonlyInput=angular.isDefined(t.readonlyInput)?e.$parent.$eval(t.readonlyInput):r.readonlyInput,this.setupInputEvents(o,a)};var g=r.hourStep;t.hourStep&&e.$parent.$watch(n(t.hourStep),function(e){g=parseInt(e,10)});var v=r.minuteStep;t.minuteStep&&e.$parent.$watch(n(t.minuteStep),function(e){v=parseInt(e,10)}),e.showMeridian=r.showMeridian,t.showMeridian&&e.$parent.$watch(n(t.showMeridian),function(t){if(e.showMeridian=!!t,p.$error.time){var n=a(),i=s();angular.isDefined(n)&&angular.isDefined(i)&&(h.setHours(n),c())}else d()}),this.setupMousewheelEvents=function(t,n){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.bind("mousewheel wheel",function(t){e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()})},this.setupInputEvents=function(t,n){if(e.readonlyInput)return e.updateHours=angular.noop,void(e.updateMinutes=angular.noop);var i=function(t,n){p.$setViewValue(null),p.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t),angular.isDefined(n)&&(e.invalidMinutes=n)};e.updateHours=function(){var e=a();angular.isDefined(e)?(h.setHours(e),c("h")):i(!0)},t.bind("blur",function(t){!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=l(e.hours)})}),e.updateMinutes=function(){var e=s();angular.isDefined(e)?(h.setMinutes(e),c("m")):i(void 0,!0)},n.bind("blur",function(t){!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=l(e.minutes)})})},this.render=function(){var e=p.$modelValue?new Date(p.$modelValue):null;isNaN(e)?(p.$setValidity("time",!1),i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(e&&(h=e),u(),d())},e.incrementHours=function(){f(60*g)},e.decrementHours=function(){f(60*-g)},e.incrementMinutes=function(){f(v)},e.decrementMinutes=function(){f(-v)},e.toggleMeridian=function(){f(720*(h.getHours()<12?1:-1))}}]).directive("timepicker",function(){return{restrict:"EA",require:["timepicker","?^ngModel"],controller:"TimepickerController",replace:!0,scope:{},templateUrl:"template/timepicker/timepicker.html",link:function(e,t,n,i){var o=i[0],r=i[1];r&&o.init(r,t.find("input"))}}}),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.position","ui.bootstrap.bindHtml"]).factory("typeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var i=n.match(t);if(!i)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:i[3],source:e(i[4]),viewMapper:e(i[2]||i[1]),modelMapper:e(i[1])}}}}]).directive("typeahead",["$compile","$parse","$q","$timeout","$document","$position","typeaheadParser",function(e,t,n,i,o,r,a){var s=[9,13,27,38,40];return{require:"ngModel",link:function(l,c,u,d){var f,h=l.$eval(u.typeaheadMinLength)||1,p=l.$eval(u.typeaheadWaitMs)||0,m=l.$eval(u.typeaheadEditable)!==!1,g=t(u.typeaheadLoading).assign||angular.noop,v=t(u.typeaheadOnSelect),y=u.typeaheadInputFormatter?t(u.typeaheadInputFormatter):void 0,b=u.typeaheadAppendToBody?l.$eval(u.typeaheadAppendToBody):!1,x=l.$eval(u.typeaheadFocusFirst)!==!1,w=t(u.ngModel).assign,C=a.parse(u.typeahead),k=l.$new();l.$on("$destroy",function(){k.$destroy()});var S="typeahead-"+k.$id+"-"+Math.floor(1e4*Math.random());c.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":S});var T=angular.element("<div typeahead-popup></div>");T.attr({id:S,matches:"matches",active:"activeIdx",select:"select(activeIdx)",query:"query",position:"position"}),angular.isDefined(u.typeaheadTemplateUrl)&&T.attr("template-url",u.typeaheadTemplateUrl);var $=function(){k.matches=[],k.activeIdx=-1,c.attr("aria-expanded",!1)},E=function(e){return S+"-option-"+e};k.$watch("activeIdx",function(e){0>e?c.removeAttr("aria-activedescendant"):c.attr("aria-activedescendant",E(e))});var _=function(e){var t={$viewValue:e};g(l,!0),n.when(C.source(l,t)).then(function(n){var i=e===d.$viewValue;if(i&&f)if(n.length>0){k.activeIdx=x?0:-1,k.matches.length=0;for(var o=0;o<n.length;o++)t[C.itemName]=n[o],k.matches.push({id:E(o),label:C.viewMapper(k,t),model:n[o]});k.query=e,k.position=b?r.offset(c):r.position(c),k.position.top=k.position.top+c.prop("offsetHeight"),c.attr("aria-expanded",!0)}else $();i&&g(l,!1)},function(){$(),g(l,!1)})};$(),k.query=void 0;var A,N=function(e){A=i(function(){_(e)},p)},R=function(){A&&i.cancel(A)};d.$parsers.unshift(function(e){return f=!0,e&&e.length>=h?p>0?(R(),N(e)):_(e):(g(l,!1),R(),$()),m?e:e?void d.$setValidity("editable",!1):(d.$setValidity("editable",!0),e)}),d.$formatters.push(function(e){var t,n,i={};return y?(i.$model=e,y(l,i)):(i[C.itemName]=e,t=C.viewMapper(l,i),i[C.itemName]=void 0,n=C.viewMapper(l,i),t!==n?t:e)}),k.select=function(e){var t,n,o={};o[C.itemName]=n=k.matches[e].model,t=C.modelMapper(l,o),w(l,t),d.$setValidity("editable",!0),v(l,{$item:n,$model:t,$label:C.viewMapper(l,o)}),$(),i(function(){c[0].focus()},0,!1)},c.bind("keydown",function(e){0!==k.matches.length&&-1!==s.indexOf(e.which)&&(-1!=k.activeIdx||13!==e.which&&9!==e.which)&&(e.preventDefault(),40===e.which?(k.activeIdx=(k.activeIdx+1)%k.matches.length,k.$digest()):38===e.which?(k.activeIdx=(k.activeIdx>0?k.activeIdx:k.matches.length)-1,k.$digest()):13===e.which||9===e.which?k.$apply(function(){k.select(k.activeIdx)}):27===e.which&&(e.stopPropagation(),$(),k.$digest()))}),c.bind("blur",function(e){f=!1});var D=function(e){c[0]!==e.target&&($(),k.$digest())};o.bind("click",D),l.$on("$destroy",function(){o.unbind("click",D),b&&L.remove()});var L=e(T)(k);b?o.find("body").append(L):c.after(L)}}}]).directive("typeaheadPopup",function(){return{restrict:"EA",scope:{matches:"=",query:"=",active:"=",position:"=",select:"&"},replace:!0,templateUrl:"template/typeahead/typeahead-popup.html",link:function(e,t,n){e.templateUrl=n.templateUrl,e.isOpen=function(){return e.matches.length>0},e.isActive=function(t){return e.active==t},e.selectActive=function(t){e.active=t},e.selectMatch=function(t){e.select({activeIdx:t})}}}}).directive("typeaheadMatch",["$http","$templateCache","$compile","$parse",function(e,t,n,i){return{restrict:"EA",scope:{index:"=",match:"=",query:"="},link:function(o,r,a){var s=i(a.templateUrl)(o.$parent)||"template/typeahead/typeahead-match.html";e.get(s,{cache:t}).then(function(e){r.replaceWith(n(e.data.trim())(o))})}}}]).filter("typeaheadHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n){return n?(""+t).replace(new RegExp(e(n),"gi"),"<strong>$&</strong>"):t}}),angular.module("template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion-group.html",'<div class="panel panel-default">\n  <div class="panel-heading">\n    <h4 class="panel-title">\n      <a href class="accordion-toggle" ng-click="toggleOpen()" accordion-transclude="heading"><span ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n    </h4>\n  </div>\n  <div class="panel-collapse" collapse="!isOpen">\n	  <div class="panel-body" ng-transclude></div>\n  </div>\n</div>\n')}]),angular.module("template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("template/accordion/accordion.html",'<div class="panel-group" ng-transclude></div>')}]),angular.module("template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("template/alert/alert.html",'<div class="alert" ng-class="[\'alert-\' + (type || \'warning\'), closeable ? \'alert-dismissable\' : null]" role="alert">\n    <button ng-show="closeable" type="button" class="close" ng-click="close()">\n        <span aria-hidden="true">&times;</span>\n        <span class="sr-only">Close</span>\n    </button>\n    <div ng-transclude></div>\n</div>\n')}]),angular.module("template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("template/carousel/carousel.html",'<div ng-mouseenter="pause()" ng-mouseleave="play()" class="carousel" ng-swipe-right="prev()" ng-swipe-left="next()">\n    <ol class="carousel-indicators" ng-show="slides.length > 1">\n        <li ng-repeat="slide in slides track by $index" ng-class="{active: isActive(slide)}" ng-click="select(slide)"></li>\n    </ol>\n    <div class="carousel-inner" ng-transclude></div>\n    <a class="left carousel-control" ng-click="prev()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-left"></span></a>\n    <a class="right carousel-control" ng-click="next()" ng-show="slides.length > 1"><span class="glyphicon glyphicon-chevron-right"></span></a>\n</div>\n')}]),angular.module("template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("template/carousel/slide.html","<div ng-class=\"{\n    'active': leaving || (active && !entering),\n    'prev': (next || active) && direction=='prev',\n    'next': (next || active) && direction=='next',\n    'right': direction=='prev',\n    'left': direction=='next'\n  }\" class=\"item text-center\" ng-transclude></div>\n")}]),angular.module("template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/datepicker.html",'<div ng-switch="datepickerMode" role="application" ng-keydown="keydown($event)">\n  <daypicker ng-switch-when="day" tabindex="0"></daypicker>\n  <monthpicker ng-switch-when="month" tabindex="0"></monthpicker>\n  <yearpicker ng-switch-when="year" tabindex="0"></yearpicker>\n</div>')}]),angular.module("template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/day.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="{{5 + showWeeks}}"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n    <tr>\n      <th ng-show="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in labels track by $index" class="text-center"><small aria-label="{{label.full}}">{{label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-show="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default btn-sm" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/month.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/datepicker/popup.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/popup.html",'<ul class="dropdown-menu" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', left: position.left+\'px\'}" ng-keydown="keydown($event)">\n	<li ng-transclude></li>\n	<li ng-if="showButtonBar" style="padding:10px 9px 2px">\n		<span class="btn-group pull-left">\n			<button type="button" class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'current\') }}</button>\n			<button type="button" class="btn btn-sm btn-danger" ng-click="select(null)">{{ getText(\'clear\') }}</button>\n		</span>\n		<button type="button" class="btn btn-sm btn-success pull-right" ng-click="close()">{{ getText(\'close\') }}</button>\n	</li>\n</ul>\n')}]),angular.module("template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("template/datepicker/year.html",'<table role="grid" aria-labelledby="{{uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left" ng-click="move(-1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-left"></i></button></th>\n      <th colspan="3"><button id="{{uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm" ng-click="toggleMode()" tabindex="-1" style="width:100%;"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right" ng-click="move(1)" tabindex="-1"><i class="glyphicon glyphicon-chevron-right"></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr ng-repeat="row in rows track by $index">\n      <td ng-repeat="dt in row track by dt.date" class="text-center" role="gridcell" id="{{dt.uid}}" aria-disabled="{{!!dt.disabled}}">\n        <button type="button" style="width:100%;" class="btn btn-default" ng-class="{\'btn-info\': dt.selected, active: isActive(dt)}" ng-click="select(dt.date)" ng-disabled="dt.disabled" tabindex="-1"><span ng-class="{\'text-info\': dt.current}">{{dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("template/modal/backdrop.html",[]).run(["$templateCache",function(e){e.put("template/modal/backdrop.html",'<div class="modal-backdrop fade {{ backdropClass }}"\n     ng-class="{in: animate}"\n     ng-style="{\'z-index\': 1040 + (index && 1 || 0) + index*10}"\n></div>\n')}]),angular.module("template/modal/window.html",[]).run(["$templateCache",function(e){e.put("template/modal/window.html",'<div tabindex="-1" role="dialog" class="modal fade" ng-class="{in: animate}" ng-style="{\'z-index\': 1050 + index*10, display: \'block\'}" ng-click="close($event)">\n    <div class="modal-dialog" ng-class="{\'modal-sm\': size == \'sm\', \'modal-lg\': size == \'lg\'}"><div class="modal-content" modal-transclude></div></div>\n</div>')}]),angular.module("template/pagination/pager.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pager.html",'<ul class="pager">\n  <li ng-class="{disabled: noPrevious(), previous: align}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-class="{disabled: noNext(), next: align}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n</ul>')}]),angular.module("template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("template/pagination/pagination.html",'<ul class="pagination">\n  <li ng-if="boundaryLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(1)">{{getText(\'first\')}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noPrevious()}"><a href ng-click="selectPage(page - 1)">{{getText(\'previous\')}}</a></li>\n  <li ng-repeat="page in pages track by $index" ng-class="{active: page.active}"><a href ng-click="selectPage(page.number)">{{page.text}}</a></li>\n  <li ng-if="directionLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(page + 1)">{{getText(\'next\')}}</a></li>\n  <li ng-if="boundaryLinks" ng-class="{disabled: noNext()}"><a href ng-click="selectPage(totalPages)">{{getText(\'last\')}}</a></li>\n</ul>')}]),angular.module("template/tooltip/tooltip-html-unsafe-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-html-unsafe-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" bind-html-unsafe="content"></div>\n</div>\n')}]),angular.module("template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("template/tooltip/tooltip-popup.html",'<div class="tooltip {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="tooltip-arrow"></div>\n  <div class="tooltip-inner" ng-bind="content"></div>\n</div>\n')}]),angular.module("template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("template/popover/popover.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" ng-bind="content"></div>\n  </div>\n</div>\n')}]),angular.module("template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>')}]),angular.module("template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progress.html",'<div class="progress" ng-transclude></div>')}]),angular.module("template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: percent + \'%\'}" aria-valuetext="{{percent | number:0}}%" ng-transclude></div>\n</div>')}]),angular.module("template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}">\n    <i ng-repeat="r in range track by $index" ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')">\n        <span class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    </i>\n</span>')}]),angular.module("template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tab.html",'<li ng-class="{active: active, disabled: disabled}">\n  <a href ng-click="select()" tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane" \n         ng-repeat="tab in tabs" \n         ng-class="{active: tab.active}"\n         tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("template/timepicker/timepicker.html",'<table>\n	<tbody>\n		<tr class="text-center">\n			<td><a ng-click="incrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="incrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n		<tr>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidHours}">\n				<input type="text" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-mousewheel="incrementHours()" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td>:</td>\n			<td style="width:50px;" class="form-group" ng-class="{\'has-error\': invalidMinutes}">\n				<input type="text" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2">\n			</td>\n			<td ng-show="showMeridian"><button type="button" class="btn btn-default text-center" ng-click="toggleMeridian()">{{meridian}}</button></td>\n		</tr>\n		<tr class="text-center">\n			<td><a ng-click="decrementHours()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td>&nbsp;</td>\n			<td><a ng-click="decrementMinutes()" class="btn btn-link"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n			<td ng-show="showMeridian"></td>\n		</tr>\n	</tbody>\n</table>\n');
}]),angular.module("template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-match.html",'<a tabindex="-1" bind-html-unsafe="match.label | typeaheadHighlight:query"></a>')}]),angular.module("template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen()" ng-style="{top: position.top+\'px\', left: position.left+\'px\'}" style="display: block;" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index)" role="option" id="{{match.id}}">\n        <div typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),/**
 * Checklist-model
 * AngularJS directive for list of checkboxes
 * https://github.com/vitalets/checklist-model
 * License: MIT http://opensource.org/licenses/MIT
 */
angular.module("checklist-model",[]).directive("checklistModel",["$parse","$compile",function(e,t){function n(e,t){if(angular.isArray(e))for(var n=0;n<e.length;n++)if(angular.equals(e[n],t))return!0;return!1}function i(e,t){e=angular.isArray(e)?e:[];for(var n=0;n<e.length;n++)if(angular.equals(e[n],t))return e;return e.push(t),e}function o(e,t){if(angular.isArray(e))for(var n=0;n<e.length;n++)if(angular.equals(e[n],t)){e.splice(n,1);break}return e}function r(r,a,s){t(a)(r);var l=e(s.checklistModel),c=l.assign,u=e(s.checklistValue)(r.$parent);r.$watch("checked",function(e,t){if(e!==t){var n=l(r.$parent);e===!0?c(r.$parent,i(n,u)):c(r.$parent,o(n,u))}}),r.$parent.$watch(s.checklistModel,function(e,t){r.checked=n(e,u)},!0)}return{restrict:"A",priority:1e3,terminal:!0,scope:!0,compile:function(e,t){if("INPUT"!==e[0].tagName||!e.attr("type","checkbox"))throw'checklist-model should be applied to `input[type="checkbox"]`.';if(!t.checklistValue)throw"You should provide `checklist-value`.";return e.removeAttr("checklist-model"),e.attr("ng-model","checked"),r}}}]),/**
 * angular-ui-sortable - This directive allows you to jQueryUI Sortable.
 * @version v0.13.4 - 2015-06-07
 * @link http://angular-ui.github.com
 * @license MIT
 */
function(e,t,n){"use strict";t.module("ui.sortable",[]).value("uiSortableConfig",{}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(e,i,o){return{require:"?ngModel",scope:{ngModel:"=",uiSortable:"="},link:function(r,a,s,l){function c(e,t){return t&&"function"==typeof t?function(){e.apply(this,arguments),t.apply(this,arguments)}:e}function u(e){var t=e.data("ui-sortable");return t&&"object"==typeof t&&"ui-sortable"===t.widgetFullName?t:null}function d(e,t){var n=e.sortable("option","helper");return"clone"===n||"function"==typeof n&&t.item.sortable.isCustomHelperUsed()}function f(e){return/left|right/.test(e.css("float"))||/inline|table-cell/.test(e.css("display"))}function h(e,t){for(var n=null,i=0;i<e.length;i++){var o=e[i];if(o.element[0]===t[0]){n=o.scope;break}}return n}function p(e,t){t.item.sortable._destroy()}var m,g={},v={"ui-floating":n},y={receive:null,remove:null,start:null,stop:null,update:null},b={helper:null};return t.extend(g,v,e,r.uiSortable),t.element.fn&&t.element.fn.jquery?(l?(r.$watch("ngModel.length",function(){i(function(){u(a)&&a.sortable("refresh")},0,!1)}),y.start=function(e,i){if("auto"===g["ui-floating"]){var o=i.item.siblings(),r=u(t.element(e.target));r.floating=f(o)}i.item.sortable={model:l.$modelValue[i.item.index()],index:i.item.index(),source:i.item.parent(),sourceModel:l.$modelValue,cancel:function(){i.item.sortable._isCanceled=!0},isCanceled:function(){return i.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!i.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:i.item.sortable._isCustomHelperUsed,_destroy:function(){t.forEach(i.item.sortable,function(e,t){i.item.sortable[t]=n})}}},y.activate=function(e,n){m=a.contents();var i=a.sortable("option","placeholder");if(i&&i.element&&"function"==typeof i.element){var o=i.element();o=t.element(o);var s=a.find('[class="'+o.attr("class")+'"]:not([ng-repeat], [data-ng-repeat])');m=m.not(s)}var l=n.item.sortable._connectedSortables||[];l.push({element:a,scope:r}),n.item.sortable._connectedSortables=l},y.update=function(e,t){if(!t.item.sortable.received){t.item.sortable.dropindex=t.item.index();var n=t.item.parent();t.item.sortable.droptarget=n;var i=h(t.item.sortable._connectedSortables,n);t.item.sortable.droptargetModel=i.ngModel,a.sortable("cancel")}d(a,t)&&!t.item.sortable.received&&"parent"===a.sortable("option","appendTo")&&(m=m.not(m.last())),m.appendTo(a),t.item.sortable.received&&(m=null),t.item.sortable.received&&!t.item.sortable.isCanceled()&&r.$apply(function(){l.$modelValue.splice(t.item.sortable.dropindex,0,t.item.sortable.moved)})},y.stop=function(e,t){!t.item.sortable.received&&"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()?r.$apply(function(){l.$modelValue.splice(t.item.sortable.dropindex,0,l.$modelValue.splice(t.item.sortable.index,1)[0])}):"dropindex"in t.item.sortable&&!t.item.sortable.isCanceled()||d(a,t)||m.appendTo(a),m=null},y.receive=function(e,t){t.item.sortable.received=!0},y.remove=function(e,t){"dropindex"in t.item.sortable||(a.sortable("cancel"),t.item.sortable.cancel()),t.item.sortable.isCanceled()||r.$apply(function(){t.item.sortable.moved=l.$modelValue.splice(t.item.sortable.index,1)[0]})},b.helper=function(e){return e&&"function"==typeof e?function(t,n){var i=e.apply(this,arguments);return n.sortable._isCustomHelperUsed=n!==i,i}:e},r.$watch("uiSortable",function(e){var n=u(a);n&&t.forEach(e,function(e,t){return t in v?("ui-floating"!==t||e!==!1&&e!==!0||(n.floating=e),void(g[t]=e)):(y[t]?("stop"===t&&(e=c(e,function(){r.$apply()}),e=c(e,p)),e=c(y[t],e)):b[t]&&(e=b[t](e)),g[t]=e,void a.sortable("option",t,e))})},!0),t.forEach(y,function(e,t){g[t]=c(e,g[t]),"stop"===t&&(g[t]=c(g[t],p))})):o.info("ui.sortable: ngModel not provided!",a),void a.sortable(g)):void o.error("ui.sortable: jQuery should be included before AngularJS!")}}}])}(window,window.angular),angular.module("ui.tinymce",[]).value("uiTinymceConfig",{force_br_newlines:!0,force_p_newlines:!1,forced_root_block:"",statusbar:!1,menubar:!1,skin:"light",paste_as_text:!0,relative_urls:!1,convert_urls:!1,remove_script_host:!1,plugins:"textcolor link paste code wizdomImagePicker",toolbar:"bold italic underline | forecolor | code | link wizdomImagePicker"}).directive("uiTinymce",["uiTinymceConfig","contextInfo","notificationService",function(e,t,n){e=e||{};var i=0;return{priority:10,require:"ngModel",link:function(o,r,a,s){function l(e){e.data.indexOf("imageUploadFailed:maxRequestLength")>=0&&n.showErrorMessage("File size exceeds the limit allowed")}if(null==a.uiTinymceDisable||!$.parseJSON(a.uiTinymceDisable)){var c,u,d,f=function(){s.$setViewValue(r.val()),o.$root.$$phase||o.$apply()};if(a.id||a.$set("id","uiTinymce"+i++),c=a.uiTinymce?o.$eval(a.uiTinymce):{},c.setup){var h=c.setup;delete c.setup}u={setup:function(e){e.on("init",function(e){s.$render(),s.$setPristine()}),e.on("ExecCommand",function(t){e.save(),f()}),e.on("KeyUp",function(t){e.save(),f()}),e.on("SetContent",function(t){t.initial||s.$viewValue===t.content||(e.save(),f())}),e.on("blur",function(e){r.blur()}),e.on("ObjectResized",function(t){e.save(),f()}),h&&h(e)},mode:"exact",elements:a.id},angular.extend(u,e,c,{language:t.language}),setTimeout(function(){window.Wizdom365BlobUrl?tinymce.baseURL=window.Wizdom365BlobUrl+"Base/Scripts/tinymce":window.Wizdom365AppUrl?tinymce.baseURL=window.Wizdom365AppUrl+"Base/Scripts/tinymce":tinymce.baseURL="/Base/Scripts/tinymce",tinymce.init(u)}),s.$render=function(){d||(d=tinymce.get(a.id)),d&&d.setContent(s.$viewValue||"")},o.$on("$destroy",function(){d||(d=tinymce.get(a.id)),d&&(d.remove(),d=null)}),"undefined"!=typeof window.addEventListener?window.addEventListener("message",l,!1):"undefined"!=typeof window.attachEvent&&window.attachEvent("onmessage",l)}}}}]),function(e,t){"use strict";function n(e,t){for(var n,i=[],r=0;r<e.length;++r){if(n=a[e[r]]||o(e[r]),!n)throw"module definition dependecy not found: "+e[r];i.push(n)}t.apply(null,i)}function i(e,i,o){if("string"!=typeof e)throw"invalid module definition, module id must be defined and be a string";if(i===t)throw"invalid module definition, dependencies must be specified";if(o===t)throw"invalid module definition, definition function must be specified";n(i,function(){a[e]=o.apply(null,arguments)})}function o(t){for(var n=e,i=t.split(/[.\/]/),o=0;o<i.length;++o){if(!n[i[o]])return;n=n[i[o]]}return n}function r(n){for(var i=0;i<n.length;i++){for(var o=e,r=n[i],s=r.split(/[.\/]/),l=0;l<s.length-1;++l)o[s[l]]===t&&(o[s[l]]={}),o=o[s[l]];o[s[s.length-1]]=a[r]}}var a={};/**
 * EventUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/EventUtils",[],function(){function e(e,t,n,i){e.addEventListener?e.addEventListener(t,n,i||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e,t,n,i){e.removeEventListener?e.removeEventListener(t,n,i||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function n(e,t){function n(){return!1}function i(){return!0}var o,r,l=t||{};for(o in e)s[o]||(l[o]=e[o]);if(l.target||(l.target=l.srcElement||document),e&&a.test(e.type)&&e.pageX===r&&e.clientX!==r){var c=l.target.ownerDocument||document,u=c.documentElement,d=c.body;l.pageX=e.clientX+(u&&u.scrollLeft||d&&d.scrollLeft||0)-(u&&u.clientLeft||d&&d.clientLeft||0),l.pageY=e.clientY+(u&&u.scrollTop||d&&d.scrollTop||0)-(u&&u.clientTop||d&&d.clientTop||0)}return l.preventDefault=function(){l.isDefaultPrevented=i,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},l.stopPropagation=function(){l.isPropagationStopped=i,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},l.stopImmediatePropagation=function(){l.isImmediatePropagationStopped=i,l.stopPropagation()},l.isDefaultPrevented||(l.isDefaultPrevented=n,l.isPropagationStopped=n,l.isImmediatePropagationStopped=n),l}function i(n,i,o){function r(){o.domLoaded||(o.domLoaded=!0,i(c))}function a(){("complete"===l.readyState||"interactive"===l.readyState&&l.body)&&(t(l,"readystatechange",a),r())}function s(){try{
// If IE is used, use the trick by Diego Perini licensed under MIT by request to the author.
// http://javascript.nwbox.com/IEContentLoaded/
l.documentElement.doScroll("left")}catch(e){return void setTimeout(s,0)}r()}var l=n.document,c={type:"ready"};return o.domLoaded?void i(c):(l.addEventListener?"complete"===l.readyState?r():e(n,"DOMContentLoaded",r):(e(l,"readystatechange",a),l.documentElement.doScroll&&n.self===n.top&&s()),void e(n,"load",r))}function o(){function o(e,t){var n,i,o,r,a=f[t];if(n=a&&a[e.type])for(i=0,o=n.length;o>i;i++)if(r=n[i],r&&r.func.call(r.scope,e)===!1&&e.preventDefault(),e.isImmediatePropagationStopped())return}var a,s,l,c,u,d=this,f={};s=r+(+new Date).toString(32),c="onmouseenter"in document.documentElement,l="onfocusin"in document.documentElement,u={mouseenter:"mouseover",mouseleave:"mouseout"},a=1,d.domLoaded=!1,d.events=f,d.bind=function(t,r,h,p){function m(e){o(n(e||k.event),g)}var g,v,y,b,x,w,C,k=window;if(t&&3!==t.nodeType&&8!==t.nodeType){for(t[s]?g=t[s]:(g=a++,t[s]=g,f[g]={}),p=p||t,r=r.split(" "),y=r.length;y--;)b=r[y],w=m,x=C=!1,"DOMContentLoaded"===b&&(b="ready"),d.domLoaded&&"ready"===b&&"complete"==t.readyState?h.call(p,n({type:b})):(c||(x=u[b],x&&(w=function(e){var t,i;if(t=e.currentTarget,i=e.relatedTarget,i&&t.contains)i=t.contains(i);else for(;i&&i!==t;)i=i.parentNode;i||(e=n(e||k.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,o(e,g))})),l||"focusin"!==b&&"focusout"!==b||(C=!0,x="focusin"===b?"focus":"blur",w=function(e){e=n(e||k.event),e.type="focus"===e.type?"focusin":"focusout",o(e,g)}),v=f[g][b],v?"ready"===b&&d.domLoaded?h({type:b}):v.push({func:h,scope:p}):(f[g][b]=v=[{func:h,scope:p}],v.fakeName=x,v.capture=C,v.nativeHandler=w,"ready"===b?i(t,w,d):e(t,x||b,w,C)));return t=v=0,h}},d.unbind=function(e,n,i){var o,r,a,l,c,u;if(!e||3===e.nodeType||8===e.nodeType)return d;if(o=e[s]){if(u=f[o],n){for(n=n.split(" "),a=n.length;a--;)if(c=n[a],r=u[c]){if(i)for(l=r.length;l--;)if(r[l].func===i){var h=r.nativeHandler,p=r.fakeName,m=r.capture;r=r.slice(0,l).concat(r.slice(l+1)),r.nativeHandler=h,r.fakeName=p,r.capture=m,u[c]=r}i&&0!==r.length||(delete u[c],t(e,r.fakeName||c,r.nativeHandler,r.capture))}}else{for(c in u)r=u[c],t(e,r.fakeName||c,r.nativeHandler,r.capture);u={}}for(c in u)return d;delete f[o];try{delete e[s]}catch(g){e[s]=null}}return d},d.fire=function(e,t,i){var r;if(!e||3===e.nodeType||8===e.nodeType)return d;i=n(null,i),i.type=t,i.target=e;do r=e[s],r&&o(i,r),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow;while(e&&!i.isPropagationStopped());return d},d.clean=function(e){var t,n,i=d.unbind;if(!e||3===e.nodeType||8===e.nodeType)return d;if(e[s]&&i(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(i(e),n=e.getElementsByTagName("*"),t=n.length;t--;)e=n[t],e[s]&&i(e);return d},d.destroy=function(){f={}},d.cancel=function(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}}var r="mce-data-",a=/^(?:mouse|contextmenu)|click/,s={keyLocation:1,layerX:1,layerY:1,returnValue:1};return o.Event=new o,o.Event.bind(window,"ready",function(){}),o}),/**
 * Sizzle.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */
/**
 * Sizzle CSS Selector Engine v@VERSION
 * http://sizzlejs.com/
 *
 * Copyright 2008, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: @DATE
 */
i("tinymce/dom/Sizzle",[],function(){function e(e,t,n,i){var o,r,a,s,l,c,d,h,p,m;if((t?t.ownerDocument||t:H)!==D&&R(t),t=t||D,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(M&&!i){if(o=ve.exec(e))if(a=o[1]){if(9===s){if(r=t.getElementById(a),!r||!r.parentNode)return n;if(r.id===a)return n.push(r),n}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(a))&&I(t,r)&&r.id===a)return n.push(r),n}else{if(o[2])return Z.apply(n,t.getElementsByTagName(e)),n;if((a=o[3])&&w.getElementsByClassName)return Z.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!P||!P.test(e))){if(h=d=F,p=t,m=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(c=T(e),(d=t.getAttribute("id"))?h=d.replace(be,"\\$&"):t.setAttribute("id",h),h="[id='"+h+"'] ",l=c.length;l--;)c[l]=h+f(c[l]);p=ye.test(e)&&u(t.parentNode)||t,m=c.join(",")}if(m)try{return Z.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{d||t.removeAttribute("id")}}}return E(e.replace(se,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[F]=!0,e}function o(e){var t=D.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function r(e,t){for(var n=e.split("|"),i=e.length;i--;)C.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||X)-(~e.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function c(e){return i(function(t){return t=+t,i(function(n,i){for(var o,r=e([],n.length,t),a=r.length;a--;)n[o=r[a]]&&(n[o]=!(i[o]=n[o]))})})}function u(e){return e&&typeof e.getElementsByTagName!==Y&&e}function d(){}function f(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function h(e,t,n){var i=t.dir,o=n&&"parentNode"===i,r=W++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,a){var s,l,c=[z,r];if(a){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||o){if(l=t[F]||(t[F]={}),(s=l[i])&&s[0]===z&&s[1]===r)return c[2]=s[2];if(l[i]=c,c[2]=e(t,n,a))return!0}}}function p(e){return e.length>1?function(t,n,i){for(var o=e.length;o--;)if(!e[o](t,n,i))return!1;return!0}:e[0]}function m(t,n,i){for(var o=0,r=n.length;r>o;o++)e(t,n[o],i);return i}function g(e,t,n,i,o){for(var r,a=[],s=0,l=e.length,c=null!=t;l>s;s++)(r=e[s])&&(!n||n(r,i,o))&&(a.push(r),c&&t.push(s));return a}function v(e,t,n,o,r,a){return o&&!o[F]&&(o=v(o)),r&&!r[F]&&(r=v(r,a)),i(function(i,a,s,l){var c,u,d,f=[],h=[],p=a.length,v=i||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!i&&t?v:g(v,f,e,s,l),b=n?r||(i?e:p||o)?[]:a:y;if(n&&n(y,b,s,l),o)for(c=g(b,h),o(c,[],s,l),u=c.length;u--;)(d=c[u])&&(b[h[u]]=!(y[h[u]]=d));if(i){if(r||e){if(r){for(c=[],u=b.length;u--;)(d=b[u])&&c.push(y[u]=d);r(null,b=[],c,l)}for(u=b.length;u--;)(d=b[u])&&(c=r?te.call(i,d):f[u])>-1&&(i[c]=!(a[c]=d))}}else b=g(b===a?b.splice(p,b.length):b),r?r(null,a,b,l):Z.apply(a,b)})}function y(e){for(var t,n,i,o=e.length,r=C.relative[e[0].type],a=r||C.relative[" "],s=r?1:0,l=h(function(e){return e===t},a,!0),c=h(function(e){return te.call(t,e)>-1},a,!0),u=[function(e,n,i){return!r&&(i||n!==_)||((t=n).nodeType?l(e,n,i):c(e,n,i))}];o>s;s++)if(n=C.relative[e[s].type])u=[h(p(u),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[F]){for(i=++s;o>i&&!C.relative[e[i].type];i++);return v(s>1&&p(u),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,i>s&&y(e.slice(s,i)),o>i&&y(e=e.slice(i)),o>i&&f(e))}u.push(n)}return p(u)}function b(t,n){var o=n.length>0,r=t.length>0,a=function(i,a,s,l,c){var u,d,f,h=0,p="0",m=i&&[],v=[],y=_,b=i||r&&C.find.TAG("*",c),x=z+=null==y?1:Math.random()||.1,w=b.length;for(c&&(_=a!==D&&a);p!==w&&null!=(u=b[p]);p++){if(r&&u){for(d=0;f=t[d++];)if(f(u,a,s)){l.push(u);break}c&&(z=x)}o&&((u=!f&&u)&&h--,i&&m.push(u))}if(h+=p,o&&p!==h){for(d=0;f=n[d++];)f(m,v,a,s);if(i){if(h>0)for(;p--;)m[p]||v[p]||(v[p]=Q.call(l));v=g(v)}Z.apply(l,v),c&&!i&&v.length>0&&h+n.length>1&&e.uniqueSort(l)}return c&&(z=x,_=y),m};return o?i(a):a}var x,w,C,k,S,T,$,E,_,A,N,R,D,L,M,P,O,B,I,F="sizzle"+-new Date,H=window.document,z=0,W=0,U=n(),j=n(),V=n(),q=function(e,t){return e===t&&(N=!0),0},Y=typeof t,X=1<<31,K={}.hasOwnProperty,G=[],Q=G.pop,J=G.push,Z=G.push,ee=G.slice,te=G.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ie+"*("+oe+")(?:"+ie+"*([*^$|!~]?=)"+ie+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+oe+"))|)"+ie+"*\\]",ae=":("+oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",se=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),le=new RegExp("^"+ie+"*,"+ie+"*"),ce=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ue=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(ae),fe=new RegExp("^"+oe+"$"),he={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,ve=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ye=/[+~]/,be=/'|\\/g,xe=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(G=ee.call(H.childNodes),H.childNodes),G[H.childNodes.length].nodeType}catch(Ce){Z={apply:G.length?function(e,t){J.apply(e,ee.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=e.support={},S=e.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},R=e.setDocument=function(e){var t,n=e?e.ownerDocument||e:H,i=n.defaultView;return n!==D&&9===n.nodeType&&n.documentElement?(D=n,L=n.documentElement,M=!S(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){R()},!1):i.attachEvent&&i.attachEvent("onunload",function(){R()})),w.attributes=o(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=o(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ge.test(n.getElementsByClassName),w.getById=o(function(e){return L.appendChild(e).id=F,!n.getElementsByName||!n.getElementsByName(F).length}),w.getById?(C.find.ID=function(e,t){if(typeof t.getElementById!==Y&&M){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(e){var t=e.replace(xe,we);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(xe,we);return function(e){var n=typeof e.getAttributeNode!==Y&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=w.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==Y?t.getElementsByTagName(e):void 0}:function(e,t){var n,i=[],o=0,r=t.getElementsByTagName(e);if("*"===e){for(;n=r[o++];)1===n.nodeType&&i.push(n);return i}return r},C.find.CLASS=w.getElementsByClassName&&function(e,t){return M?t.getElementsByClassName(e):void 0},O=[],P=[],(w.qsa=ge.test(n.querySelectorAll))&&(o(function(e){e.innerHTML="<select msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&P.push("[*^$]="+ie+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||P.push("\\["+ie+"*(?:value|"+ne+")"),e.querySelectorAll(":checked").length||P.push(":checked")}),o(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&P.push("name"+ie+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||P.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),P.push(",.*:")})),(w.matchesSelector=ge.test(B=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&o(function(e){w.disconnectedMatch=B.call(e,"div"),B.call(e,"[s!='']:x"),O.push("!=",ae)}),P=P.length&&new RegExp(P.join("|")),O=O.length&&new RegExp(O.join("|")),t=ge.test(L.compareDocumentPosition),I=t||ge.test(L.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},q=t?function(e,t){if(e===t)return N=!0,0;var i=!e.compareDocumentPosition-!t.compareDocumentPosition;return i?i:(i=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&i||!w.sortDetached&&t.compareDocumentPosition(e)===i?e===n||e.ownerDocument===H&&I(H,e)?-1:t===n||t.ownerDocument===H&&I(H,t)?1:A?te.call(A,e)-te.call(A,t):0:4&i?-1:1)}:function(e,t){if(e===t)return N=!0,0;var i,o=0,r=e.parentNode,s=t.parentNode,l=[e],c=[t];if(!r||!s)return e===n?-1:t===n?1:r?-1:s?1:A?te.call(A,e)-te.call(A,t):0;if(r===s)return a(e,t);for(i=e;i=i.parentNode;)l.unshift(i);for(i=t;i=i.parentNode;)c.unshift(i);for(;l[o]===c[o];)o++;return o?a(l[o],c[o]):l[o]===H?-1:c[o]===H?1:0},n):D},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==D&&R(t),n=n.replace(ue,"='$1']"),w.matchesSelector&&M&&(!O||!O.test(n))&&(!P||!P.test(n)))try{var i=B.call(t,n);if(i||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(o){}return e(n,D,null,[t]).length>0},e.contains=function(e,t){return(e.ownerDocument||e)!==D&&R(e),I(e,t)},e.attr=function(e,n){(e.ownerDocument||e)!==D&&R(e);var i=C.attrHandle[n.toLowerCase()],o=i&&K.call(C.attrHandle,n.toLowerCase())?i(e,n,!M):t;return o!==t?o:w.attributes||!M?e.getAttribute(n):(o=e.getAttributeNode(n))&&o.specified?o.value:null},e.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},e.uniqueSort=function(e){var t,n=[],i=0,o=0;if(N=!w.detectDuplicates,A=!w.sortStable&&e.slice(0),e.sort(q),N){for(;t=e[o++];)t===e[o]&&(i=n.push(o));for(;i--;)e.splice(n[i],1)}return A=null,e},k=e.getText=function(e){var t,n="",i=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=k(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[i++];)n+=k(t);return n},C=e.selectors={cacheLength:50,createPseudo:i,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(xe,we),e[3]=(e[3]||e[4]||e[5]||"").replace(xe,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(xe,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=U[e+" "];return t||(t=new RegExp("(^|"+ie+")"+e+"("+ie+"|$)"))&&U(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==Y&&e.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(o){var r=e.attr(o,t);return null==r?"!="===n:n?(r+="","="===n?r===i:"!="===n?r!==i:"^="===n?i&&0===r.indexOf(i):"*="===n?i&&r.indexOf(i)>-1:"$="===n?i&&r.slice(-i.length)===i:"~="===n?(" "+r+" ").indexOf(i)>-1:"|="===n?r===i||r.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(e,t,n,i,o){var r="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===o?function(e){return!!e.parentNode}:function(t,n,l){var c,u,d,f,h,p,m=r!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(r){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;p=m="only"===e&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&y){for(u=g[F]||(g[F]={}),c=u[e]||[],h=c[0]===z&&c[1],f=c[0]===z&&c[2],d=h&&g.childNodes[h];d=++h&&d&&d[m]||(f=h=0)||p.pop();)if(1===d.nodeType&&++f&&d===t){u[e]=[z,h,f];break}}else if(y&&(c=(t[F]||(t[F]={}))[e])&&c[0]===z)f=c[1];else for(;(d=++h&&d&&d[m]||(f=h=0)||p.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[F]||(d[F]={}))[e]=[z,f]),d!==t)););return f-=o,f===i||f%i===0&&f/i>=0}}},PSEUDO:function(t,n){var o,r=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return r[F]?r(n):r.length>1?(o=[t,t,"",n],C.setFilters.hasOwnProperty(t.toLowerCase())?i(function(e,t){for(var i,o=r(e,n),a=o.length;a--;)i=te.call(e,o[a]),e[i]=!(t[i]=o[a])}):function(e){return r(e,0,o)}):r}},pseudos:{not:i(function(e){var t=[],n=[],o=$(e.replace(se,"$1"));return o[F]?i(function(e,t,n,i){for(var r,a=o(e,null,i,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,i,r){return t[0]=e,o(t,null,r,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(e){return e=e.replace(xe,we),function(t){return(t.textContent||t.innerText||k(t)).indexOf(e)>-1}}),lang:i(function(t){return fe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xe,we).toLowerCase(),function(e){var n;do if(n=M?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=window.location&&window.location.hash;return t&&t.slice(1)===e.id},root:function(e){return e===L},focus:function(e){return e===D.activeElement&&(!D.hasFocus||D.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:c(function(){return[0]}),last:c(function(e,t){return[t-1]}),eq:c(function(e,t,n){return[0>n?n+t:n]}),even:c(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:c(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:c(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:c(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})C.pseudos[x]=l(x);return d.prototype=C.filters=C.pseudos,C.setFilters=new d,T=e.tokenize=function(t,n){var i,o,r,a,s,l,c,u=j[t+" "];if(u)return n?0:u.slice(0);for(s=t,l=[],c=C.preFilter;s;){(!i||(o=le.exec(s)))&&(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),i=!1,(o=ce.exec(s))&&(i=o.shift(),r.push({value:i,type:o[0].replace(se," ")}),s=s.slice(i.length));for(a in C.filter)!(o=he[a].exec(s))||c[a]&&!(o=c[a](o))||(i=o.shift(),r.push({value:i,type:a,matches:o}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):j(t,l).slice(0)},$=e.compile=function(e,t){var n,i=[],o=[],r=V[e+" "];if(!r){for(t||(t=T(e)),n=t.length;n--;)r=y(t[n]),r[F]?i.push(r):o.push(r);r=V(e,b(o,i)),r.selector=e}return r},E=e.select=function(e,t,n,i){var o,r,a,s,l,c="function"==typeof e&&e,d=!i&&T(e=c.selector||e);if(n=n||[],1===d.length){if(r=d[0]=d[0].slice(0),r.length>2&&"ID"===(a=r[0]).type&&w.getById&&9===t.nodeType&&M&&C.relative[r[1].type]){if(t=(C.find.ID(a.matches[0].replace(xe,we),t)||[])[0],!t)return n;c&&(t=t.parentNode),e=e.slice(r.shift().value.length)}for(o=he.needsContext.test(e)?0:r.length;o--&&(a=r[o],!C.relative[s=a.type]);)if((l=C.find[s])&&(i=l(a.matches[0].replace(xe,we),ye.test(r[0].type)&&u(t.parentNode)||t))){if(r.splice(o,1),e=i.length&&f(r),!e)return Z.apply(n,i),n;break}}return(c||$(e,d))(i,t,!M,n,ye.test(e)&&u(t.parentNode)||t),n},w.sortStable=F.split("").sort(q).join("")===F,w.detectDuplicates=!!N,R(),w.sortDetached=o(function(e){return 1&e.compareDocumentPosition(D.createElement("div"))}),o(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||r("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&o(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||r("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),o(function(e){return null==e.getAttribute("disabled")})||r(ne,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),e}),/**
 * Tools.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/Tools",[],function(){function e(e){return null===e||e===t?"":(""+e).replace(m,"")}function n(e,n){return n?"array"==n&&g(e)?!0:typeof e==n:e!==t}function i(e){var t,n,i=e;if(!g(e))for(i=[],t=0,n=e.length;n>t;t++)i[t]=e[t];return i}function o(e,t,n){var i;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},i=e.length;i--;)n[e[i]]={};return n}function r(e,n,i){var o,r;if(!e)return 0;if(i=i||e,e.length!==t){for(o=0,r=e.length;r>o;o++)if(n.call(i,e[o],o,e)===!1)return 0}else for(o in e)if(e.hasOwnProperty(o)&&n.call(i,e[o],o,e)===!1)return 0;return 1}function a(e,t){var n=[];return r(e,function(e){n.push(t(e))}),n}function s(e,t){var n=[];return r(e,function(e){(!t||t(e))&&n.push(e)}),n}function l(e,t,n){var i,o,r,a,s,l=this,c=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),r=e[3].match(/(^|\.)(\w+)$/i)[2],o=l.createNS(e[3].replace(/\.\w+$/,""),n),!o[r]){if("static"==e[2])return o[r]=t,void(this.onCreate&&this.onCreate(e[2],e[3],o[r]));t[r]||(t[r]=function(){},c=1),o[r]=t[r],l.extend(o[r].prototype,t),e[5]&&(i=l.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=o[r],c?o[r]=function(){return i[a].apply(this,arguments)}:o[r]=function(){return this.parent=i[a],s.apply(this,arguments)},o[r].prototype[r]=o[r],l.each(i,function(e,t){o[r].prototype[t]=i[t]}),l.each(t,function(e,t){i[t]?o[r].prototype[t]=function(){return this.parent=i[t],e.apply(this,arguments)}:t!=r&&(o[r].prototype[t]=e)})),l.each(t["static"],function(e,t){o[r][t]=e})}}function c(e,t){var n,i;if(e)for(n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1}function u(e,n){var i,o,r,a,s=arguments;for(i=1,o=s.length;o>i;i++){n=s[i];for(r in n)n.hasOwnProperty(r)&&(a=n[r],a!==t&&(e[r]=a))}return e}function d(e,t,n,i){i=i||this,e&&(n&&(e=e[n]),r(e,function(e,o){return t.call(i,e,o,n)===!1?!1:void d(e,t,n,i)}))}function f(e,t){var n,i;for(t=t||window,e=e.split("."),n=0;n<e.length;n++)i=e[n],t[i]||(t[i]={}),t=t[i];return t}function h(e,t){var n,i;for(t=t||window,e=e.split("."),n=0,i=e.length;i>n&&(t=t[e[n]],t);n++);return t}function p(t,i){return!t||n(t,"array")?t:a(t.split(i||","),e)}var m=/^\s*|\s*$/g,g=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};return{trim:e,isArray:g,is:n,toArray:i,makeMap:o,each:r,map:a,grep:s,inArray:c,extend:u,create:l,walk:d,createNS:f,resolve:h,explode:p}}),/**
 * Env.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/Env",[],function(){var e,t,n,i,o,r,a,s=navigator,l=s.userAgent;e=window.opera&&window.opera.buildNumber,t=/WebKit/.test(l),n=!t&&!e&&/MSIE/gi.test(l)&&/Explorer/gi.test(s.appName),n=n&&/MSIE (\w+)\./.exec(l)[1],i=-1==l.indexOf("Trident/")||-1==l.indexOf("rv:")&&-1==s.appName.indexOf("Netscape")?!1:11,n=n||i,o=!t&&!i&&/Gecko/.test(l),r=-1!=l.indexOf("Mac"),a=/(iPad|iPhone)/.test(l);var c=!a||l.match(/AppleWebKit\/(\d*)/)[1]>=534;return{opera:e,webkit:t,ie:n,gecko:o,mac:r,iOS:a,contentEditable:c,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:8!=n,range:window.getSelection&&"Range"in window,documentMode:n?document.documentMode||7:10}}),/**
 * DomQuery.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/DomQuery",["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/Env"],function(e,n,i,o){function r(e){return"undefined"!=typeof e}function a(e){return"string"==typeof e}function s(e,t){var n,i,o;for(t=t||C,o=t.createElement("div"),n=t.createDocumentFragment(),o.innerHTML=e;i=o.firstChild;)n.appendChild(i);return n}function l(e,t,n,i){var o;if(a(t))t=s(t,g(e[0]));else if(t.length&&!t.nodeType){if(t=d.makeArray(t),i)for(o=t.length-1;o>=0;o--)l(e,t[o],n,i);else for(o=0;o<t.length;o++)l(e,t[o],n,i);return e}if(t.nodeType)for(o=e.length;o--;)n.call(e[o],t);return e}function c(e,t){return e&&t&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")}function u(e,t,n){var i,o;return t=d(t)[0],e.each(function(){var e=this;n&&i==e.parentNode?o.appendChild(e):(i=e.parentNode,o=t.cloneNode(!1),e.parentNode.insertBefore(o,e),o.appendChild(e))}),e}function d(e,t){return new d.fn.init(e,t)}function f(e,t){var n;if(t.indexOf)return t.indexOf(e);for(n=t.length;n--;)if(t[n]===e)return n;return-1}function h(e){return null===e||e===w?"":(""+e).replace(L,"")}function p(e,t){var n,i,o,r,a;if(e)if(n=e.length,n===r){for(i in e)if(e.hasOwnProperty(i)&&(a=e[i],t.call(a,i,a)===!1))break}else for(o=0;n>o&&(a=e[o],t.call(a,o,a)!==!1);o++);return e}function m(e,t){var n=[];return p(e,function(e,i){t(i,e)&&n.push(i)}),n}function g(e){return e?9==e.nodeType?e:e.ownerDocument:C}function v(e,n,i){var o=[],r=e[n];for("string"!=typeof i&&i instanceof d&&(i=i[0]);r&&9!==r.nodeType;){if(i!==t){if(r===i)break;if("string"==typeof i&&d(r).is(i))break}1===r.nodeType&&o.push(r),r=r[n]}return o}function y(e,n,i,o){var r=[];for(o instanceof d&&(o=o[0]);e;e=e[n])if(!i||e.nodeType===i){if(o!==t){if(e===o)break;if("string"==typeof o&&d(e).is(o))break}r.push(e)}return r}function b(e,t,n){for(e=e[t];e;e=e[t])if(e.nodeType==n)return e;return null}function x(e,t,n){p(n,function(n,i){e[n]=e[n]||{},e[n][t]=i})}var w,C=document,k=Array.prototype.push,S=Array.prototype.slice,T=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,$=e.Event,E=i.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),_=i.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),A={"for":"htmlFor","class":"className",readonly:"readOnly"},N={"float":"cssFloat"},R={},D={},L=/^\s*|\s*$/g;return d.fn=d.prototype={constructor:d,selector:"",context:null,length:0,init:function(e,t){var n,i,o=this;if(!e)return o;if(e.nodeType)return o.context=o[0]=e,o.length=1,o;if(t&&t.nodeType)o.context=t;else{if(t)return d(e).attr(t);o.context=t=document}if(a(e)){if(o.selector=e,n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:T.exec(e),!n)return d(t).find(e);if(n[1])for(i=s(e,g(t)).firstChild;i;)k.call(o,i),i=i.nextSibling;else{if(i=g(t).getElementById(n[2]),!i)return o;if(i.id!==n[2])return o.find(e);o.length=1,o[0]=i}}else this.add(e,!1);return o},toArray:function(){return i.toArray(this)},add:function(e,t){var n,i,o=this;if(a(e))return o.add(d(e));if(e.nodeType)return o.add([e]);if(t!==!1)for(n=d.unique(o.toArray().concat(d.makeArray(e))),o.length=n.length,i=0;i<n.length;i++)o[i]=n[i];else k.apply(o,d.makeArray(e));return o},attr:function(e,t){var n,i=this;if("object"==typeof e)p(e,function(e,t){i.attr(e,t)});else{if(!r(t)){if(i[0]&&1===i[0].nodeType){if(n=R[e],n&&n.get)return n.get(i[0],e);if(_[e])return i.prop(e)?e:w;t=i[0].getAttribute(e,2),null===t&&(t=w)}return t}this.each(function(){var n;if(1===this.nodeType){if(n=R[e],n&&n.set)return void n.set(this,t);null===t?this.removeAttribute(e,2):this.setAttribute(e,t,2)}})}return i},removeAttr:function(e){return this.attr(e,null)},prop:function(e,t){var n=this;if(e=A[e]||e,"object"==typeof e)p(e,function(e,t){n.prop(e,t)});else{if(!r(t))return n[0]&&n[0].nodeType&&e in n[0]?n[0][e]:t;this.each(function(){1==this.nodeType&&(this[e]=t)})}return n},css:function(e,t){function n(e){return e.replace(/-(\D)/g,function(e,t){return t.toUpperCase()})}function i(e){return e.replace(/[A-Z]/g,function(e){return"-"+e})}var o,a,s=this;if("object"==typeof e)p(e,function(e,t){s.css(e,t)});else if(r(t))e=n(e),"number"!=typeof t||E[e]||(t+="px"),s.each(function(){var n=this.style;if(a=D[e],a&&a.set)return void a.set(this,t);try{this.style[N[e]||e]=t}catch(o){}(null===t||""===t)&&(n.removeProperty?n.removeProperty(i(e)):n.removeAttribute(e))});else{if(o=s[0],a=D[e],a&&a.get)return a.get(o);if(o.ownerDocument.defaultView)try{return o.ownerDocument.defaultView.getComputedStyle(o,null).getPropertyValue(i(e))}catch(l){return w}else if(o.currentStyle)return o.currentStyle[n(e)]}return s},remove:function(){for(var e,t=this,n=this.length;n--;)e=t[n],$.clean(e),e.parentNode&&e.parentNode.removeChild(e);return this},empty:function(){for(var e,t=this,n=this.length;n--;)for(e=t[n];e.firstChild;)e.removeChild(e.firstChild);return this},html:function(e){var t,n=this;if(r(e)){t=n.length;try{for(;t--;)n[t].innerHTML=e}catch(i){d(n[t]).empty().append(e)}return n}return n[0]?n[0].innerHTML:""},text:function(e){var t,n=this;if(r(e)){for(t=n.length;t--;)"innerText"in n[t]?n[t].innerText=e:n[0].textContent=e;return n}return n[0]?n[0].innerText||n[0].textContent:""},append:function(){return l(this,arguments,function(e){1===this.nodeType&&this.appendChild(e)})},prepend:function(){return l(this,arguments,function(e){1===this.nodeType&&this.insertBefore(e,this.firstChild)},!0)},before:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this)}):e},after:function(){var e=this;return e[0]&&e[0].parentNode?l(e,arguments,function(e){this.parentNode.insertBefore(e,this.nextSibling)},!0):e},appendTo:function(e){return d(e).append(this),this},prependTo:function(e){return d(e).prepend(this),this},replaceWith:function(e){return this.before(e).remove()},wrap:function(e){return u(this,e)},wrapAll:function(e){return u(this,e,!0)},wrapInner:function(e){return this.each(function(){d(this).contents().wrapAll(e)}),this},unwrap:function(){return this.parent().each(function(){d(this).replaceWith(this.childNodes)})},clone:function(){var e=[];return this.each(function(){e.push(this.cloneNode(!0))}),d(e)},addClass:function(e){return this.toggleClass(e,!0)},removeClass:function(e){return this.toggleClass(e,!1)},toggleClass:function(e,t){var n=this;return"string"!=typeof e?n:(-1!==e.indexOf(" ")?p(e.split(" "),function(){n.toggleClass(this,t)}):n.each(function(n,i){var o,r;r=c(i,e),r!==t&&(o=i.className,r?i.className=h((" "+o+" ").replace(" "+e+" "," ")):i.className+=o?" "+e:e)}),n)},hasClass:function(e){return c(this[0],e)},each:function(e){return p(this,e)},on:function(e,t){return this.each(function(){$.bind(this,e,t)})},off:function(e,t){return this.each(function(){$.unbind(this,e,t)})},trigger:function(e){return this.each(function(){"object"==typeof e?$.fire(this,e.type,e):$.fire(this,e)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return new d(S.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(e){var t,n,i=[];for(t=0,n=this.length;n>t;t++)d.find(e,this[t],i);return d(i)},filter:function(e){return d("function"==typeof e?m(this.toArray(),function(t,n){return e(n,t)}):d.filter(e,this.toArray()))},closest:function(e){var t=[];return e instanceof d&&(e=e[0]),this.each(function(n,i){for(;i;){if("string"==typeof e&&d(i).is(e)){t.push(i);break}if(i==e){t.push(i);break}i=i.parentNode}}),d(t)},offset:function(e){var t,n,i,o,r=0,a=0;return e?this.css(e):(t=this[0],t&&(n=t.ownerDocument,i=n.documentElement,t.getBoundingClientRect&&(o=t.getBoundingClientRect(),r=o.left+(i.scrollLeft||n.body.scrollLeft)-i.clientLeft,a=o.top+(i.scrollTop||n.body.scrollTop)-i.clientTop)),{left:r,top:a})},push:k,sort:[].sort,splice:[].splice},i.extend(d,{extend:i.extend,makeArray:i.toArray,inArray:f,isArray:i.isArray,each:p,trim:h,grep:m,find:n,expr:n.selectors,unique:n.uniqueSort,text:n.getText,contains:n.contains,filter:function(e,t,n){var i=t.length;for(n&&(e=":not("+e+")");i--;)1!=t[i].nodeType&&t.splice(i,1);return t=1===t.length?d.find.matchesSelector(t[0],e)?[t[0]]:[]:d.find.matches(e,t)}}),p({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return v(e,"parentNode")},next:function(e){return b(e,"nextSibling",1)},prev:function(e){return b(e,"previousSibling",1)},children:function(e){return y(e.firstChild,"nextSibling",1)},contents:function(e){return i.toArray(("iframe"===e.nodeName?e.contentDocument||e.contentWindow.document:e).childNodes)}},function(e,t){d.fn[e]=function(n){var i=this,o=[];return i.each(function(){var e=t.call(o,this,n,o);e&&(d.isArray(e)?o.push.apply(o,e):o.push(e))}),this.length>1&&(o=d.unique(o),0===e.indexOf("parents")&&(o=o.reverse())),o=d(o),n?o.filter(n):o}}),p({parentsUntil:function(e,t){return v(e,"parentNode",t)},nextUntil:function(e,t){return y(e,"nextSibling",1,t).slice(1)},prevUntil:function(e,t){return y(e,"previousSibling",1,t).slice(1)}},function(e,t){d.fn[e]=function(n,i){var o=this,r=[];return o.each(function(){var e=t.call(r,this,n,r);e&&(d.isArray(e)?r.push.apply(r,e):r.push(e))}),this.length>1&&(r=d.unique(r),(0===e.indexOf("parents")||"prevUntil"===e)&&(r=r.reverse())),r=d(r),i?r.filter(i):r}}),d.fn.is=function(e){return!!e&&this.filter(e).length>0},d.fn.init.prototype=d.fn,d.overrideDefaults=function(e){function t(i,o){return n=n||e(),0===arguments.length&&(i=n.element),o||(o=n.context),new t.fn.init(i,o)}var n;return d.extend(t,this),t},o.ie&&o.ie<8&&(x(R,"get",{maxlength:function(e){var t=e.maxLength;return 2147483647===t?w:t},size:function(e){var t=e.size;return 20===t?w:t},"class":function(e){return e.className},style:function(e){var t=e.style.cssText;return 0===t.length?w:t}}),x(R,"set",{"class":function(e,t){e.className=t},style:function(e,t){e.style.cssText=t}})),o.ie&&o.ie<9&&(N["float"]="styleFloat",x(D,"set",{opacity:function(e,t){var n=e.style;null===t||""===t?n.removeAttribute("filter"):(n.zoom=1,n.filter="alpha(opacity="+100*t+")")}})),d.attrHooks=R,d.cssHooks=D,d}),/**
 * Styles.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Styles",[],function(){return function(e,t){function n(e,t,n,i){function o(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+o(t)+o(n)+o(i)}var i,o,r,a,s,l=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,c=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,u=/\s*([^:]+):\s*([^;]+);?/g,d=/\s+$/,f={},h="\ufeff";for(e=e||{},t&&(a=t.getValidStyles(),s=t.getInvalidStyles()),r=("\\\" \\' \\; \\: ; : "+h).split(" "),o=0;o<r.length;o++)f[r[o]]=h+o,f[h+o]=r[o];return{toHex:function(e){return e.replace(l,n)},parse:function(t){function i(e,t,n){var i,r,a,s;if(i=b[e+"-top"+t],i&&(r=b[e+"-right"+t],r&&(a=b[e+"-bottom"+t],a&&(s=b[e+"-left"+t])))){var l=[i,r,a,s];for(o=l.length-1;o--&&l[o]===l[o+1];);o>-1&&n||(b[e+t]=-1==o?l[0]:l.join(" "),delete b[e+"-top"+t],delete b[e+"-right"+t],delete b[e+"-bottom"+t],delete b[e+"-left"+t])}}function r(e){var t,n=b[e];if(n){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return b[e]=n[0],!0}}function a(e,t,n,i){r(t)&&r(n)&&r(i)&&(b[e]=b[t]+" "+b[n]+" "+b[i],delete b[t],delete b[n],delete b[i])}function s(e){return y=!0,f[e]}function h(e,t){return y&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return f[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(t,n,i,o,r,a){if(r=r||a)return r=h(r),"'"+r.replace(/\'/g,"\\'")+"'";if(n=h(n||i||o),!e.allow_script_urls){var s=n.replace(/[\s\r\n]+/,"");if(/(java|vb)script:/i.test(s))return"";if(!e.allow_svg_data_urls&&/^data:image\/svg/i.test(s))return""}return x&&(n=x.call(w,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"}var m,g,v,y,b={},x=e.url_converter,w=e.url_converter_scope||this;if(t){for(t=t.replace(/[\u0000-\u001F]/g,""),t=t.replace(/\\[\"\';:\uFEFF]/g,s).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,s)});m=u.exec(t);){if(g=m[1].replace(d,"").toLowerCase(),v=m[2].replace(d,""),v=v.replace(/\\[0-9a-f]+/g,function(e){return String.fromCharCode(parseInt(e.substr(1),16))}),g&&v.length>0){if(!e.allow_script_urls&&("behavior"==g||/expression\s*\(|\/\*|\*\//.test(v)))continue;"font-weight"===g&&"700"===v?v="bold":("color"===g||"background-color"===g)&&(v=v.toLowerCase()),v=v.replace(l,n),v=v.replace(c,p),b[g]=y?h(v,!0):v}u.lastIndex=m.index+m[0].length}i("border","",!0),i("border","-width"),i("border","-color"),i("border","-style"),i("padding",""),i("margin",""),a("border","border-width","border-style","border-color"),"medium none"===b.border&&delete b.border,"none"===b["border-image"]&&delete b["border-image"]}return b},serialize:function(e,t){function n(t){var n,o,r,s;if(n=a[t])for(o=0,r=n.length;r>o;o++)t=n[o],s=e[t],s!==i&&s.length>0&&(c+=(c.length>0?" ":"")+t+": "+s+";")}function o(e,t){var n;return n=s["*"],n&&n[e]?!1:(n=s[t],n&&n[e]?!1:!0)}var r,l,c="";if(t&&a)n("*"),n(t);else for(r in e)l=e[r],l!==i&&l.length>0&&(!s||o(r,t))&&(c+=(c.length>0?" ":"")+r+": "+l+";");return c}}}}),/**
 * TreeWalker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/TreeWalker",[],function(){return function(e,t){function n(e,n,i,o){var r,a;if(e){if(!o&&e[n])return e[n];if(e!=t){if(r=e[i])return r;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(r=a[i])return r}}}var i=e;this.current=function(){return i},this.next=function(e){return i=n(i,"firstChild","nextSibling",e)},this.prev=function(e){return i=n(i,"lastChild","previousSibling",e)}}}),/**
 * Range.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/Range",["tinymce/util/Tools"],function(e){function t(n){function i(){return P.createDocumentFragment()}function o(e,t){k(F,e,t)}function r(e,t){k(H,e,t)}function a(e){o(e.parentNode,q(e))}function s(e){o(e.parentNode,q(e)+1)}function l(e){r(e.parentNode,q(e))}function c(e){r(e.parentNode,q(e)+1)}function u(e){e?(M[U]=M[W],M[j]=M[z]):(M[W]=M[U],M[z]=M[j]),M.collapsed=F}function d(e){a(e),c(e)}function f(e){o(e,0),r(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function h(e,t){var n=M[W],i=M[z],o=M[U],r=M[j],a=t.startContainer,s=t.startOffset,l=t.endContainer,c=t.endOffset;return 0===e?C(n,i,a,s):1===e?C(o,r,a,s):2===e?C(o,r,l,c):3===e?C(n,i,l,c):void 0}function p(){S(I)}function m(){return S(O)}function g(){return S(B)}function v(e){var t,i,o=this[W],r=this[z];3!==o.nodeType&&4!==o.nodeType||!o.nodeValue?(o.childNodes.length>0&&(i=o.childNodes[r]),i?o.insertBefore(e,i):3==o.nodeType?n.insertAfter(e,o):o.appendChild(e)):r?r>=o.nodeValue.length?n.insertAfter(e,o):(t=o.splitText(r),o.parentNode.insertBefore(e,t)):o.parentNode.insertBefore(e,o)}function y(e){var t=M.extractContents();M.insertNode(e),e.appendChild(t),M.selectNode(e)}function b(){return V(new t(n),{startContainer:M[W],startOffset:M[z],endContainer:M[U],endOffset:M[j],collapsed:M.collapsed,commonAncestorContainer:M.commonAncestorContainer})}function x(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n?n:e}function w(){return M[W]==M[U]&&M[z]==M[j]}function C(e,t,i,o){var r,a,s,l,c,u;if(e==i)return t==o?0:o>t?-1:1;for(r=i;r&&r.parentNode!=e;)r=r.parentNode;if(r){for(a=0,s=e.firstChild;s!=r&&t>a;)a++,s=s.nextSibling;return a>=t?-1:1}for(r=e;r&&r.parentNode!=i;)r=r.parentNode;if(r){for(a=0,s=i.firstChild;s!=r&&o>a;)a++,s=s.nextSibling;return o>a?-1:1}for(l=n.findCommonAncestor(e,i),c=e;c&&c.parentNode!=l;)c=c.parentNode;for(c||(c=l),u=i;u&&u.parentNode!=l;)u=u.parentNode;if(u||(u=l),c==u)return 0;for(s=l.firstChild;s;){if(s==c)return-1;if(s==u)return 1;s=s.nextSibling}}function k(e,t,i){var o,r;for(e?(M[W]=t,M[z]=i):(M[U]=t,M[j]=i),o=M[U];o.parentNode;)o=o.parentNode;for(r=M[W];r.parentNode;)r=r.parentNode;r==o?C(M[W],M[z],M[U],M[j])>0&&M.collapse(e):M.collapse(e),M.collapsed=w(),M.commonAncestorContainer=n.findCommonAncestor(M[W],M[U])}function S(e){var t,n,i,o,r,a,s,l=0,c=0;if(M[W]==M[U])return T(e);for(t=M[U],n=t.parentNode;n;t=n,n=n.parentNode){if(n==M[W])return $(t,e);++l}for(t=M[W],n=t.parentNode;n;t=n,n=n.parentNode){if(n==M[U])return E(t,e);++c}for(i=c-l,o=M[W];i>0;)o=o.parentNode,i--;for(r=M[U];0>i;)r=r.parentNode,i++;for(a=o.parentNode,s=r.parentNode;a!=s;a=a.parentNode,s=s.parentNode)o=a,r=s;return _(o,r,e)}function T(e){var t,n,o,r,a,s,l,c,u;if(e!=I&&(t=i()),M[z]==M[j])return t;if(3==M[W].nodeType){if(n=M[W].nodeValue,o=n.substring(M[z],M[j]),e!=B&&(r=M[W],c=M[z],u=M[j]-M[z],0===c&&u>=r.nodeValue.length-1?r.parentNode.removeChild(r):r.deleteData(c,u),M.collapse(F)),e==I)return;return o.length>0&&t.appendChild(P.createTextNode(o)),t}for(r=x(M[W],M[z]),a=M[j]-M[z];r&&a>0;)s=r.nextSibling,l=D(r,e),t&&t.appendChild(l),--a,r=s;return e!=B&&M.collapse(F),t}function $(e,t){var n,o,r,a,s,l;if(t!=I&&(n=i()),o=A(e,t),n&&n.appendChild(o),r=q(e),a=r-M[z],0>=a)return t!=B&&(M.setEndBefore(e),M.collapse(H)),n;for(o=e.previousSibling;a>0;)s=o.previousSibling,l=D(o,t),n&&n.insertBefore(l,n.firstChild),--a,o=s;return t!=B&&(M.setEndBefore(e),M.collapse(H)),n}function E(e,t){var n,o,r,a,s,l;for(t!=I&&(n=i()),r=N(e,t),n&&n.appendChild(r),o=q(e),++o,a=M[j]-o,r=e.nextSibling;r&&a>0;)s=r.nextSibling,l=D(r,t),n&&n.appendChild(l),--a,r=s;return t!=B&&(M.setStartAfter(e),M.collapse(F)),n}function _(e,t,n){var o,r,a,s,l,c,u;for(n!=I&&(r=i()),o=N(e,n),r&&r.appendChild(o),a=q(e),s=q(t),++a,l=s-a,c=e.nextSibling;l>0;)u=c.nextSibling,o=D(c,n),r&&r.appendChild(o),c=u,--l;return o=A(t,n),r&&r.appendChild(o),n!=B&&(M.setStartAfter(e),M.collapse(F)),r}function A(e,t){var n,i,o,r,a,s=x(M[U],M[j]-1),l=s!=M[U];if(s==e)return R(s,l,H,t);for(n=s.parentNode,i=R(n,H,H,t);n;){for(;s;)o=s.previousSibling,r=R(s,l,H,t),t!=I&&i.insertBefore(r,i.firstChild),l=F,s=o;if(n==e)return i;s=n.previousSibling,n=n.parentNode,a=R(n,H,H,t),t!=I&&a.appendChild(i),i=a}}function N(e,t){var n,i,o,r,a,s=x(M[W],M[z]),l=s!=M[W];if(s==e)return R(s,l,F,t);for(n=s.parentNode,i=R(n,H,F,t);n;){for(;s;)o=s.nextSibling,r=R(s,l,F,t),t!=I&&i.appendChild(r),l=F,s=o;if(n==e)return i;s=n.nextSibling,n=n.parentNode,a=R(n,H,F,t),t!=I&&a.appendChild(i),i=a}}function R(e,t,i,o){var r,a,s,l,c;if(t)return D(e,o);if(3==e.nodeType){if(r=e.nodeValue,i?(l=M[z],a=r.substring(l),s=r.substring(0,l)):(l=M[j],a=r.substring(0,l),s=r.substring(l)),o!=B&&(e.nodeValue=s),o==I)return;return c=n.clone(e,H),c.nodeValue=a,c}if(o!=I)return n.clone(e,H)}function D(e,t){return t!=I?t==B?n.clone(e,F):e:void e.parentNode.removeChild(e)}function L(){return n.create("body",null,g()).outerText}var M=this,P=n.doc,O=0,B=1,I=2,F=!0,H=!1,z="startOffset",W="startContainer",U="endContainer",j="endOffset",V=e.extend,q=n.nodeIndex;return V(M,{startContainer:P,startOffset:0,endContainer:P,endOffset:0,collapsed:F,commonAncestorContainer:P,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:o,setEnd:r,setStartBefore:a,setStartAfter:s,setEndBefore:l,setEndAfter:c,collapse:u,selectNode:d,selectNodeContents:f,compareBoundaryPoints:h,deleteContents:p,extractContents:m,cloneContents:g,insertNode:v,surroundContents:y,cloneRange:b,toStringIE:L}),M}return t.prototype.toString=function(){return this.toStringIE()},t}),/**
 * Entities.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Entities",["tinymce/util/Tools"],function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,i,r,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)i=String.fromCharCode(parseInt(e[n],t)),o[i]||(r="&"+e[n+1]+";",a[i]=r,a[r]=i);return a}}var i,o,r,a=e.makeMap,s=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,l=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,u=/&(#x|#)?([\w]+);/g,d={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"};o={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},r={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},i=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32);var f={encodeRaw:function(e,t){return e.replace(t?s:l,function(e){return o[e]||e})},encodeAllRaw:function(e){return(""+e).replace(c,function(e){return o[e]||e})},encodeNumeric:function(e,t){return e.replace(t?s:l,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":o[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||i,e.replace(t?s:l,function(e){return o[e]||n[e]||e})},getEncodeFunc:function(e,t){function r(e,n){return e.replace(n?s:l,function(e){return o[e]||t[e]||"&#"+e.charCodeAt(0)+";"||e})}function c(e,n){return f.encodeNamed(e,n,t)}return t=n(t)||i,e=a(e.replace(/\+/g,",")),e.named&&e.numeric?r:e.named?t?c:f.encodeNamed:e.numeric?f.encodeNumeric:f.encodeRaw},decode:function(e){return e.replace(u,function(e,n,o){return n?(o=parseInt(o,2===n.length?16:10),o>65535?(o-=65536,String.fromCharCode(55296+(o>>10),56320+(1023&o))):d[o]||String.fromCharCode(o)):r[e]||i[e]||t(e)})}};return f}),/**
 * StyleSheetLoader.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/StyleSheetLoader",[],function(){return function(e,t){function n(t){e.getElementsByTagName("head")[0].appendChild(t)}function i(t,i,s){function l(){for(var e=v.passed,t=e.length;t--;)e[t]();v.status=2,v.passed=[],v.failed=[]}function c(){for(var e=v.failed,t=e.length;t--;)e[t]();v.status=3,v.passed=[],v.failed=[]}function u(){var e=navigator.userAgent.match(/WebKit\/(\d*)/);return!!(e&&e[1]<536)}function d(e,t){e()||((new Date).getTime()-g<o?window.setTimeout(t,0):c())}function f(){d(function(){for(var t,n,i=e.styleSheets,o=i.length;o--;)if(t=i[o],n=t.ownerNode?t.ownerNode:t.owningElement,n&&n.id===p.id)return l(),!0},f)}function h(){d(function(){try{var e=m.sheet.cssRules;return l(),!!e}catch(t){}},h)}var p,m,g,v;if(a[t]?v=a[t]:(v={passed:[],failed:[]},a[t]=v),i&&v.passed.push(i),s&&v.failed.push(s),1!=v.status){if(2==v.status)return void l();if(3==v.status)return void c();if(v.status=1,p=e.createElement("link"),p.rel="stylesheet",p.type="text/css",p.id="u"+r++,p.async=!1,p.defer=!1,g=(new Date).getTime(),"onload"in p&&!u())p.onload=f,p.onerror=c;else{if(navigator.userAgent.indexOf("Firefox")>0)return m=e.createElement("style"),m.textContent='@import "'+t+'"',h(),void n(m);f()}n(p),p.href=t}}var o,r=0,a={};t=t||{},o=t.maxLoadTime||5e3,this.load=i}}),/**
 * DOMUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/DOMUtils",["tinymce/dom/Sizzle","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/EventUtils","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools","tinymce/dom/StyleSheetLoader"],function(e,n,i,o,r,a,s,l,c,u){function d(e,t){var n,i={},o=t.keep_values;return n={set:function(n,i,o){t.url_converter&&(i=t.url_converter.call(t.url_converter_scope||e,i,o,n[0])),n.attr("data-mce-"+o,i).attr(o,i)},get:function(e,t){return e.attr("data-mce-"+t)||e.attr(t)}},i={style:{set:function(e,t){return null!==t&&"object"==typeof t?void e.css(t):(o&&e.attr("data-mce-style",t),void e.attr("style",t))},get:function(t){var n=t.attr("data-mce-style")||t.attr("style");return n=e.serializeStyle(e.parseStyle(n),t[0].nodeName)}}},o&&(i.href=i.src=n),i}function f(e,t){var r,a=this;a.doc=e,a.win=window,a.files={},a.counter=0,a.stdMode=!v||e.documentMode>=8,a.boxModel=!v||"CSS1Compat"==e.compatMode||a.stdMode,a.styleSheetLoader=new u(e),a.boundEvents=[],a.settings=t=t||{},a.schema=t.schema,a.styles=new i({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope},t.schema),a.fixDoc(e),a.events=t.ownEvents?new o(t.proxy):o.Event,a.attrHooks=d(a,t),r=t.schema?t.schema.getBlockElements():{},a.$=n.overrideDefaults(function(){return{context:e,element:a.getRoot()}}),a.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!r[e.nodeName]):!!r[e]}}var h=c.each,p=c.is,m=c.grep,g=c.trim,v=l.ie,y=/^([a-z0-9],?)+$/i,b=/^[ \t\r\n]*$/;return f.prototype={$$:function(e){return"string"==typeof e&&(e=this.get(e)),this.$(e)},root:null,fixDoc:function(e){var t,n=this.settings;if(v&&n.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(t){e.createElement(t)});for(t in n.schema.getCustomElements())e.createElement(t)}},clone:function(e,t){var n,i,o=this;return!v||1!==e.nodeType||t?e.cloneNode(t):(i=o.doc,t?n.firstChild:(n=i.createElement(e.nodeName),h(o.getAttribs(e),function(t){o.setAttrib(n,t.nodeName,o.getAttrib(e,t.nodeName))}),n))},getRoot:function(){var e=this;return e.settings.root_element||e.doc.body},getViewPort:function(e){var t,n;return e=e?e:this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,i=this;return e=i.get(e),t=i.getPos(e),n=i.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,i=this;return e=i.get(e),t=i.getStyle(e,"width"),n=i.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,n,i,o){var r,a=this,s=[];for(e=a.get(e),o=o===t,i=i||("BODY"!=a.getRoot().nodeName?a.getRoot().parentNode:null),p(n,"string")&&(r=n,n="*"===n?function(e){return 1==e.nodeType}:function(e){return a.is(e,r)});e&&e!=i&&e.nodeType&&9!==e.nodeType;){if(!n||n(e)){if(!o)return e;s.push(e)}e=e.parentNode}return o?s:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,e=this.doc.getElementById(e),e&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var i=this;return e(t,i.get(n)||i.settings.root_element||i.doc,[])},is:function(n,i){var o;if(n.length===t){if("*"===i)return 1==n.nodeType;if(y.test(i)){for(i=i.toLowerCase().split(/,/),n=n.nodeName.toLowerCase(),o=i.length-1;o>=0;o--)if(i[o]==n)return!0;return!1}}if(n.nodeType&&1!=n.nodeType)return!1;var r=n.nodeType?[n]:n;return e(i,r[0].ownerDocument||r[0],null,r).length>0},add:function(e,t,n,i,o){var r=this;return this.run(e,function(e){var a;return a=p(t,"string")?r.doc.createElement(t):t,r.setAttribs(a,n),i&&(i.nodeType?a.appendChild(i):r.setHTML(a,i)),o?a:e.appendChild(a)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var i,o="";o+="<"+e;for(i in t)t.hasOwnProperty(i)&&null!==t[i]&&"undefined"!=typeof t[i]&&(o+=" "+i+'="'+this.encode(t[i])+'"');return"undefined"!=typeof n?o+">"+n+"</"+e+">":o+" />"},createFragment:function(e){var t,n,i,o=this.doc;for(i=o.createElement("div"),t=o.createDocumentFragment(),e&&(i.innerHTML=e);n=i.firstChild;)t.appendChild(n);return t},remove:function(e,t){return e=this.$$(e),t?e.each(function(){for(var e;e=this.firstChild;)3==e.nodeType&&0===e.data.length?this.removeChild(e):this.parentNode.insertBefore(e,this)}).remove():e.remove(),e.length>1?e.toArray():e[0]},setStyle:function(e,t,n){e=this.$$(e).css(t,n),this.settings.update_styles&&e.attr("data-mce-style",null)},getStyle:function(e,n,i){return e=this.$$(e),i?e.css(n):(n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==n&&(n=v?"styleFloat":"cssFloat"),e[0]&&e[0].style?e[0].style[n]:t)},setStyles:function(e,t){e=this.$$(e).css(t),this.settings.update_styles&&e.attr("data-mce-style",null)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,t,n){var i,o,r=this,a=r.settings;""===n&&(n=null),e=r.$$(e),i=e.attr(t),e.length&&(o=r.attrHooks[t],o&&o.set?o.set(e,n,t):e.attr(t,n),i!=n&&a.onSetAttrib&&a.onSetAttrib({attrElm:e,attrName:t,attrValue:n}))},setAttribs:function(e,t){var n=this;n.$$(e).each(function(e,i){h(t,function(e,t){n.setAttrib(i,t,e)})})},getAttrib:function(e,t,n){var i,o,r=this;return e=r.$$(e),e.length&&(i=r.attrHooks[t],o=i&&i.get?i.get(e,t):e.attr(t)),"undefined"==typeof o&&(o=n||""),o},getPos:function(e,t){var i,o,r=this,a=0,s=0,l=r.doc,c=l.body;if(e=r.get(e),t=t||c,e){if(t===c&&e.getBoundingClientRect&&"static"===n(c).css("position"))return o=e.getBoundingClientRect(),t=r.boxModel?l.documentElement:c,a=o.left+(l.documentElement.scrollLeft||c.scrollLeft)-t.clientLeft,s=o.top+(l.documentElement.scrollTop||c.scrollTop)-t.clientTop,{x:a,y:s};for(i=e;i&&i!=t&&i.nodeType;)a+=i.offsetLeft||0,s+=i.offsetTop||0,i=i.offsetParent;for(i=e.parentNode;i&&i!=t&&i.nodeType;)a-=i.scrollLeft||0,s-=i.scrollTop||0,i=i.parentNode}return{x:a,y:s}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n,i=this,o=i.doc;if(i!==f.DOM&&o===document){var r=f.DOM.addedStyles;if(r=r||[],r[e])return;r[e]=!0,f.DOM.addedStyles=r}n=o.getElementById("mceDefaultStyles"),n||(n=o.createElement("style"),n.id="mceDefaultStyles",n.type="text/css",t=o.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n)),n.styleSheet?n.styleSheet.cssText+=e:n.appendChild(o.createTextNode(e))},loadCSS:function(e){var t,n=this,i=n.doc;return n!==f.DOM&&i===document?void f.DOM.loadCSS(e):(e||(e=""),t=i.getElementsByTagName("head")[0],void h(e.split(","),function(e){var o;n.files[e]||(n.files[e]=!0,o=n.create("link",{rel:"stylesheet",href:e}),v&&i.documentMode&&i.recalc&&(o.onload=function(){i.recalc&&i.recalc(),o.onload=null}),t.appendChild(o))}))},addClass:function(e,t){this.$$(e).addClass(t)},removeClass:function(e,t){this.toggleClass(e,t,!1)},hasClass:function(e,t){return this.$$(e).hasClass(t)},toggleClass:function(e,t,i){this.$$(e).toggleClass(t,i).each(function(){""===this.className&&n(this).attr("class",null)})},show:function(e){this.$$(e).show()},hide:function(e){this.$$(e).hide()},isHidden:function(e){return"none"==this.$$(e).css("display")},uniqueId:function(e){return(e?e:"mce_")+this.counter++},setHTML:function(e,t){e=this.$$(e),v?e.each(function(e,i){if(i.canHaveHTML!==!1){for(;i.firstChild;)i.removeChild(i.firstChild);try{i.innerHTML="<br>"+t,i.removeChild(i.firstChild)}catch(o){n("<div>").html("<br>"+t).contents().slice(1).appendTo(i)}return t}}):e.html(t)},getOuterHTML:function(e){return e=this.get(e),1==e.nodeType?e.outerHTML:n("<div>").append(n(e).clone()).html()},setOuterHTML:function(e,t){var i=this;i.$$(e).each(function(){try{this.outerHTML=t}catch(e){i.remove(n(this).html(t),!0)}})},decode:s.decode,encode:s.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,i;return n=t.parentNode,i=t.nextSibling,i?n.insertBefore(e,i):n.appendChild(e),e})},replace:function(e,t,n){var i=this;return i.run(t,function(t){return p(t,"array")&&(e=e.cloneNode(!0)),n&&h(m(t.childNodes),function(t){e.appendChild(t)}),t.parentNode.replaceChild(e,t)})},rename:function(e,t){var n,i=this;return e.nodeName!=t.toUpperCase()&&(n=i.create(t),h(i.getAttribs(e),function(t){i.setAttrib(n,t.nodeName,i.getAttrib(e,t.nodeName))}),i.replace(n,e,1)),n||e},findCommonAncestor:function(e,t){for(var n,i=e;i;){for(n=t;n&&i!=n;)n=n.parentNode;if(i==n)break;i=i.parentNode}return!i&&e.ownerDocument?e.ownerDocument.documentElement:i},toHex:function(e){return this.styles.toHex(c.trim(e))},run:function(e,t,n){var i,o=this;return"string"==typeof e&&(e=o.get(e)),e?(n=n||this,e.nodeType||!e.length&&0!==e.length?t.call(n,e):(i=[],h(e,function(e,r){e&&("string"==typeof e&&(e=o.get(e)),i.push(t.call(n,e,r)))}),i)):!1},getAttribs:function(e){var t;if(e=this.get(e),!e)return[];if(v){if(t=[],"OBJECT"==e.nodeName)return e.attributes;"OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"});var n=/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi;return e.cloneNode(!1).outerHTML.replace(n,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t}return e.attributes},isEmpty:function(e,t){var n,i,o,a,s,l=this,c=0;if(e=e.firstChild){a=new r(e,e.parentNode),t=t||(l.schema?l.schema.getNonEmptyElements():null);do{if(o=e.nodeType,1===o){if(e.getAttribute("data-mce-bogus"))continue;if(s=e.nodeName.toLowerCase(),t&&t[s]){if("br"===s){c++;continue}return!1}for(i=l.getAttribs(e),n=i.length;n--;)if(s=i[n].nodeName,"name"===s||"data-mce-bookmark"===s)return!1}if(8==o)return!1;if(3===o&&!b.test(e.nodeValue))return!1}while(e=a.next())}return 1>=c},createRng:function(){var e=this.doc;return e.createRange?e.createRange():new a(this)},nodeIndex:function(e,t){var n,i,o=0;if(e)for(n=e.nodeType,e=e.previousSibling;e;e=e.previousSibling)i=e.nodeType,(!t||3!=i||i!=n&&e.nodeValue.length)&&(o++,n=i);return o},split:function(e,t,n){function i(e){function t(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var n,o=e.childNodes,r=e.nodeType;if(1!=r||"bookmark"!=e.getAttribute("data-mce-type")){for(n=o.length-1;n>=0;n--)i(o[n]);if(9!=r){if(3==r&&e.nodeValue.length>0){var a=g(e.nodeValue).length;if(!s.isBlock(e.parentNode)||a>0||0===a&&t(e))return}else if(1==r&&(o=e.childNodes,1==o.length&&o[0]&&1==o[0].nodeType&&"bookmark"==o[0].getAttribute("data-mce-type")&&e.parentNode.insertBefore(o[0],e),o.length||/^(br|hr|input|img)$/i.test(e.nodeName)))return;s.remove(e)}return e}}var o,r,a,s=this,l=s.createRng();return e&&t?(l.setStart(e.parentNode,s.nodeIndex(e)),l.setEnd(t.parentNode,s.nodeIndex(t)),o=l.extractContents(),l=s.createRng(),l.setStart(t.parentNode,s.nodeIndex(t)+1),l.setEnd(e.parentNode,s.nodeIndex(e)+1),r=l.extractContents(),a=e.parentNode,a.insertBefore(i(o),e),n?a.replaceChild(n,t):a.insertBefore(t,e),a.insertBefore(i(r),e),s.remove(e),n||t):void 0},bind:function(e,t,n,i){var o=this;if(c.isArray(e)){for(var r=e.length;r--;)e[r]=o.bind(e[r],t,n,i);return e}return!o.settings.collect||e!==o.doc&&e!==o.win||o.boundEvents.push([e,t,n,i]),o.events.bind(e,t,n,i||o)},unbind:function(e,t,n){var i,o=this;if(c.isArray(e)){for(i=e.length;i--;)e[i]=o.unbind(e[i],t,n);return e}if(o.boundEvents&&(e===o.doc||e===o.win))for(i=o.boundEvents.length;i--;){var r=o.boundEvents[i];e!=r[0]||t&&t!=r[1]||n&&n!=r[2]||this.events.unbind(r[0],r[1],r[2])}return this.events.unbind(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return e&&1==e.nodeType?(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null):null},getContentEditableParent:function(e){for(var t=this.getRoot(),n=null;e&&e!==t&&(n=this.getContentEditable(e),null===n);e=e.parentNode);return n},destroy:function(){var t=this;if(t.boundEvents){for(var n=t.boundEvents.length;n--;){var i=t.boundEvents[n];this.events.unbind(i[0],i[1],i[2])}t.boundEvents=null}e.setDocument&&e.setDocument(),t.win=t.doc=t.root=t.events=t.frag=null},isChildOf:function(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},dumpRng:function(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset},_findSib:function(e,t,n){var i=this,o=t;if(e)for("string"==typeof o&&(o=function(e){return i.is(e,t)}),e=e[n];e;e=e[n])if(o(e))return e;return null}},f.DOM=new f(document),f}),/**
 * ScriptLoader.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/ScriptLoader",["tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t){function n(){function e(e,t){function n(){s.remove(a),r&&(r.onreadystatechange=r.onload=r=null),t()}function o(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+e)}var r,a,s=i;a=s.uniqueId(),r=document.createElement("script"),r.id=a,r.type="text/javascript",r.src=e,"onreadystatechange"in r?r.onreadystatechange=function(){/loaded|complete/.test(r.readyState)&&n()}:r.onload=n,r.onerror=o,(document.getElementsByTagName("head")[0]||document.body).appendChild(r)}var t,n=0,a=1,s=2,l={},c=[],u={},d=[],f=0;this.isDone=function(e){return l[e]==s},this.markDone=function(e){l[e]=s},this.add=this.load=function(e,i,o){var r=l[e];r==t&&(c.push(e),l[e]=n),i&&(u[e]||(u[e]=[]),u[e].push({func:i,scope:o||this}))},this.loadQueue=function(e,t){this.loadScripts(c,e,t)},this.loadScripts=function(n,i,c){function h(e){o(u[e],function(e){e.func.call(e.scope)}),u[e]=t}var p;d.push({func:i,scope:c||this}),(p=function(){var t=r(n);n.length=0,o(t,function(t){return l[t]==s?void h(t):void(l[t]!=a&&(l[t]=a,f++,e(t,function(){l[t]=s,f--,h(t),p()})))}),f||(o(d,function(e){e.func.call(e.scope)}),d.length=0)})()}}var i=e.DOM,o=t.each,r=t.grep;return n.ScriptLoader=new n,n}),/**
 * AddOnManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/AddOnManager",["tinymce/dom/ScriptLoader","tinymce/util/Tools"],function(e,n){function i(){var e=this;e.items=[],e.urls={},e.lookup={}}var o=n.each;return i.prototype={get:function(e){return this.lookup[e]?this.lookup[e].instance:t},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t,n){var o=i.language;if(o&&i.languageLoad!==!1){if(n)if(n=","+n+",",-1!=n.indexOf(","+o.substr(0,2)+","))o=o.substr(0,2);else if(-1==n.indexOf(","+o+","))return;e.ScriptLoader.add(this.urls[t]+"/langs/"+o+".js")}},add:function(e,t,n){return this.items.push(t),this.lookup[e]={instance:t,dependencies:n},t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var i=this.urls[t];o(n,function(t){e.ScriptLoader.add(i+"/"+t)})},load:function(n,r,a,s){function l(){var i=c.dependencies(n);o(i,function(e){var n=c.createUrl(r,e);c.load(n.resource,n,t,t)}),a&&(s?a.call(s):a.call(e))}var c=this,u=r;c.urls[n]||("object"==typeof r&&(u=r.prefix+r.resource+r.suffix),0!==u.indexOf("/")&&-1==u.indexOf("://")&&(u=i.baseURL+"/"+u),c.urls[n]=u.substring(0,u.lastIndexOf("/")),c.lookup[n]?l():e.ScriptLoader.add(u,l,s))}},i.PluginManager=new i,i.ThemeManager=new i,i}),/**
 * RangeUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/RangeUtils",["tinymce/util/Tools","tinymce/dom/TreeWalker"],function(e,t){function n(e,t){var n=e.childNodes;return t--,t>n.length-1?t=n.length-1:0>t&&(t=0),n[t]||e}function i(e){this.walk=function(t,i){function r(e){var t;return t=e[0],3===t.nodeType&&t===g&&v>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===b&&e.length>0&&t===y&&3===t.nodeType&&e.splice(e.length-1,1),e}function a(e,t,n){for(var i=[];e&&e!=n;e=e[t])i.push(e);return i}function s(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function l(e,t,n){var o=n?"nextSibling":"previousSibling";for(f=e,h=f.parentNode;f&&f!=t;f=h)h=f.parentNode,p=a(f==e?f:f[o],o),p.length&&(n||p.reverse(),i(r(p)))}var c,u,d,f,h,p,m,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(m=e.select("td.mce-item-selected,th.mce-item-selected"),m.length>0)return void o(m,function(e){i([e])});if(1==g.nodeType&&g.hasChildNodes()&&(g=g.childNodes[v]),1==y.nodeType&&y.hasChildNodes()&&(y=n(y,b)),g==y)return i(r([g]));for(c=e.findCommonAncestor(g,y),f=g;f;f=f.parentNode){if(f===y)return l(g,c,!0);if(f===c)break}for(f=y;f;f=f.parentNode){if(f===g)return l(y,c);if(f===c)break}u=s(g,c)||g,d=s(y,c)||y,l(g,u,!0),p=a(u==g?u:u.nextSibling,"nextSibling",d==y?d.nextSibling:d),p.length&&i(r(p)),l(y,d)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,i=e.startOffset,o=e.endContainer,r=e.endOffset;return n==o&&3==n.nodeType?i>0&&i<n.nodeValue.length&&(o=t(n,i),n=o.previousSibling,r>i?(r-=i,n=o=t(o,r).previousSibling,r=o.nodeValue.length,i=0):r=0):(3==n.nodeType&&i>0&&i<n.nodeValue.length&&(n=t(n,i),i=0),3==o.nodeType&&r>0&&r<o.nodeValue.length&&(o=t(o,r).previousSibling,r=o.nodeValue.length)),{startContainer:n,startOffset:i,endContainer:o,endOffset:r}},this.normalize=function(n){function i(i){function a(n,i){for(var o=new t(n,e.getParent(n.parentNode,e.isBlock)||g);n=o[i?"prev":"next"]();)if("BR"===n.nodeName)return!0}function s(e,t){return e.previousSibling&&e.previousSibling.nodeName==t}function l(n,i){var a,s,l;if(i=i||c,l=e.getParent(i.parentNode,e.isBlock)||g,n&&"BR"==i.nodeName&&m&&e.isEmpty(l))return c=i.parentNode,u=e.nodeIndex(i),void(o=!0);for(a=new t(i,l);f=a[n?"prev":"next"]();){if("false"===e.getContentEditableParent(f))return;if(3===f.nodeType&&f.nodeValue.length>0)return c=f,u=n?f.nodeValue.length:0,void(o=!0);if(e.isBlock(f)||h[f.nodeName.toLowerCase()])return;s=f}r&&s&&(c=s,o=!0,u=0)}var c,u,d,f,h,p,m,g=e.getRoot();if(c=n[(i?"start":"end")+"Container"],u=n[(i?"start":"end")+"Offset"],m=1==c.nodeType&&u===c.childNodes.length,h=e.schema.getNonEmptyElements(),p=i,1==c.nodeType&&u>c.childNodes.length-1&&(p=!1),9===c.nodeType&&(c=e.getRoot(),u=0),c===g){if(p&&(f=c.childNodes[u>0?u-1:0],f&&(h[f.nodeName]||"TABLE"==f.nodeName)))return;if(c.hasChildNodes()&&(u=Math.min(!p&&u>0?u-1:u,c.childNodes.length-1),c=c.childNodes[u],u=0,c.hasChildNodes()&&!/TABLE/.test(c.nodeName))){f=c,d=new t(c,g);do{if(3===f.nodeType&&f.nodeValue.length>0){u=p?0:f.nodeValue.length,c=f,o=!0;break}if(h[f.nodeName.toLowerCase()]){u=e.nodeIndex(f),c=f.parentNode,"IMG"!=f.nodeName||p||u++,o=!0;break}}while(f=p?d.next():d.prev())}}r&&(3===c.nodeType&&0===u&&l(!0),1===c.nodeType&&(f=c.childNodes[u],f||(f=c.childNodes[u-1]),!f||"BR"!==f.nodeName||s(f,"A")||a(f)||a(f,!0)||l(!0,f))),p&&!r&&3===c.nodeType&&u===c.nodeValue.length&&l(!1),o&&n["set"+(i?"Start":"End")](c,u)}var o,r;return r=n.collapsed,i(!0),r||i(),o&&r&&n.collapse(!0),o}}var o=e.each;return i.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1},i}),/**
 * NodeChange.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/NodeChange",["tinymce/dom/RangeUtils"],function(e){return function(t){function n(e){var n,i;if(i=t.$(e).parentsUntil(t.getBody()).add(e),i.length===o.length){for(n=i.length;n>=0&&i[n]===o[n];n--);if(-1===n)return o=i,!0}return o=i,!1}var i,o=[];"onselectionchange"in t.getDoc()||t.on("NodeChange Click MouseUp KeyUp Focus",function(n){var o,r;o=t.selection.getRng(),r={startContainer:o.startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset},"nodechange"!=n.type&&e.compareRanges(r,i)||t.fire("SelectionChange"),i=r}),t.on("contextmenu",function(){t.fire("SelectionChange")}),t.on("SelectionChange",function(){var e=t.selection.getStart(!0);t.selection.isCollapsed()||n(e)||!t.dom.isChildOf(e,t.getBody())||t.nodeChanged({selectionChange:!0})}),t.on("MouseUp",function(e){e.isDefaultPrevented()||setTimeout(function(){t.nodeChanged()},0)}),this.nodeChanged=function(e){var n,i,o,r=t.selection;t.initialized&&r&&!t.settings.disable_nodechange&&!t.settings.readonly&&(o=t.getBody(),n=r.getStart()||o,n=n.ownerDocument!=t.getDoc()?t.getBody():n,"IMG"==n.nodeName&&r.isCollapsed()&&(n=n.parentNode),i=[],t.dom.getParent(n,function(e){return e===o?!0:void i.push(e)}),e=e||{},e.element=n,e.parents=i,t.fire("NodeChange",e))}}}),/**
 * Node.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Node",[],function(){function e(e,t,n){var i,o,r=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[r])return e[r];if(e!==t){if(i=e[a])return i;for(o=e.parent;o&&o!==t;o=o.parent)if(i=o[a])return i}}function t(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var n=/^[ \t\r\n]*$/,i={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};return t.prototype={replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,i,o,r=this;if("string"!=typeof e){for(i in e)r.attr(i,e[i]);return r}if(n=r.attributes){if(t!==o){if(null===t){if(e in n.map)for(delete n.map[e],i=n.length;i--;)if(n[i].name===e)return n=n.splice(i,1),r;return r}if(e in n.map){for(i=n.length;i--;)if(n[i].name===e){n[i].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,r}return n.map[e]}},clone:function(){var e,n,i,o,r,a=this,s=new t(a.name,a.type);if(i=a.attributes){for(r=[],r.map={},e=0,n=i.length;n>e;e++)o=i[e],"id"!==o.name&&(r[r.length]={name:o.name,value:o.value},r.map[o.name]=o.value);s.attributes=r}return s.value=a.value,s.shortEnded=a.shortEnded,s},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,i=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):i.next=n,t.lastChild===e?(t.lastChild=i,i&&(i.next=null)):n.prev=i,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var i;return e.parent&&e.remove(),i=t.parent||this,n?(t===i.firstChild?i.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===i.lastChild?i.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=i,e},getAll:function(t){var n,i=this,o=[];for(n=i.firstChild;n;n=e(n,i))n.name===t&&o.push(n);return o},empty:function(){var t,n,i,o=this;if(o.firstChild){for(t=[],i=o.firstChild;i;i=e(i,o))t.push(i);for(n=t.length;n--;)i=t[n],i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}return o.firstChild=o.lastChild=null,o},isEmpty:function(t){var i,o,r=this,a=r.firstChild;if(a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(t[a.name])return!1;for(i=a.attributes.length;i--;)if(o=a.attributes[i].name,"name"===o||0===o.indexOf("data-mce-bookmark"))return!1}if(8===a.type)return!1;if(3===a.type&&!n.test(a.value))return!1}while(a=e(a,r));return!0},walk:function(t){return e(this,null,t)}},t.create=function(e,n){var o,r;if(o=new t(e,i[e]||1),n)for(r in n)o.attr(r,n[r]);return o},t}),/**
 * Schema.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Schema",["tinymce/util/Tools"],function(e){function t(e,t){return e?e.split(t||" "):[]}function n(e){function n(e,n,i){function o(e,t){var n,i,o={};for(n=0,i=e.length;i>n;n++)o[e[n]]=t||{};return o}var s,l,c,u=arguments;for(i=i||[],n=n||"","string"==typeof i&&(i=t(i)),l=3;l<u.length;l++)"string"==typeof u[l]&&(u[l]=t(u[l])),i.push.apply(i,u[l]);for(e=t(e),s=e.length;s--;)c=[].concat(a,t(n)),h[e[s]]={attributes:o(c),attributesOrder:c,children:o(i,r)}}function i(e,n){var i,o,r,a;for(e=t(e),i=e.length,n=t(n);i--;)for(o=h[e[i]],r=0,a=n.length;a>r;r++)o.attributes[n[r]]={},o.attributesOrder.push(n[r])}var a,l,c,u,d,f,h={};return o[e]?o[e]:(a=t("id accesskey class dir lang style tabindex title"),l=t("address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul"),c=t("a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment"),"html4"!=e&&(a.push.apply(a,t("contenteditable contextmenu draggable dropzone hidden spellcheck translate")),l.push.apply(l,t("article aside details dialog figure header footer hgroup section nav")),c.push.apply(c,t("audio canvas command datalist mark meter output progress time wbr video ruby bdi keygen"))),"html5-strict"!=e&&(a.push("xml:lang"),f=t("acronym applet basefont big font strike tt"),c.push.apply(c,f),s(f,function(e){n(e,"",c)}),d=t("center dir isindex noframes"),l.push.apply(l,d),u=[].concat(l,c),s(d,function(e){n(e,"",u)})),u=u||[].concat(l,c),n("html","manifest","head body"),n("head","","base command link meta noscript script style title"),n("title hr noscript br"),n("base","href target"),n("link","href rel media hreflang type sizes hreflang"),n("meta","name http-equiv content charset"),n("style","media type scoped"),n("script","src async defer type charset"),n("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",u),n("address dt dd div caption","",u),n("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",c),n("blockquote","cite",u),n("ol","reversed start type","li"),n("ul","","li"),n("li","value",u),n("dl","","dt dd"),n("a","href target rel media hreflang type",c),n("q","cite",c),n("ins del","cite datetime",u),n("img","src alt usemap ismap width height"),n("iframe","src name width height",u),n("embed","src type width height"),n("object","data type typemustmatch name usemap form width height",u,"param"),n("param","name value"),n("map","name",u,"area"),n("area","alt coords shape href target rel media hreflang type"),n("table","border","caption colgroup thead tfoot tbody tr"+("html4"==e?" col":"")),n("colgroup","span","col"),n("col","span"),n("tbody thead tfoot","","tr"),n("tr","","td th"),n("td","colspan rowspan headers",u),n("th","colspan rowspan headers scope abbr",u),n("form","accept-charset action autocomplete enctype method name novalidate target",u),n("fieldset","disabled form name",u,"legend"),n("label","form for",c),n("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),n("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"==e?u:c),n("select","disabled form multiple name required size","option optgroup"),n("optgroup","disabled label","option"),n("option","disabled label selected value"),n("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),n("menu","type label",u,"li"),n("noscript","",u),"html4"!=e&&(n("wbr"),n("ruby","",c,"rt rp"),n("figcaption","",u),n("mark rt rp summary bdi","",c),n("canvas","width height",u),n("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",u,"track source"),n("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",u,"track source"),n("source","src type media"),n("track","kind src srclang label default"),n("datalist","",c,"option"),n("article section nav aside header footer","",u),n("hgroup","","h1 h2 h3 h4 h5 h6"),n("figure","",u,"figcaption"),n("time","datetime",c),n("dialog","open",u),n("command","type label icon disabled checked radiogroup command"),n("output","for form name",c),n("progress","value max",c),n("meter","value min max low high optimum",c),n("details","open",u,"summary"),n("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!=e&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select","onchange"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!=e&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("iframe","sandbox seamless allowfullscreen")),s(t("a form meter progress dfn"),function(e){h[e]&&delete h[e].children[e]}),delete h.caption.children.table,o[e]=h,h)}function i(e,t){var n;return e&&(n={},"string"==typeof e&&(e={"*":e}),s(e,function(e,i){n[i]="map"==t?a(e,/[, ]/):c(e,/[, ]/)})),n}var o={},r={},a=e.makeMap,s=e.each,l=e.extend,c=e.explode,u=e.inArray;return function(e){function r(t,n,i){var r=e[t];return r?r=a(r,/[, ]/,a(r.toUpperCase(),/[, ]/)):(r=o[t],r||(r=a(n," ",a(n.toUpperCase()," ")),r=l(r,i),o[t]=r)),r}function d(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function f(e){var n,i,o,r,s,l,c,f,h,p,m,g,v,y,b,x,w,C,k,S=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)\])?$/,T=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,$=/[*?+]/;if(e)for(e=t(e,","),N["@"]&&(x=N["@"].attributes,w=N["@"].attributesOrder),n=0,i=e.length;i>n;n++)if(s=S.exec(e[n])){if(y=s[1],h=s[2],b=s[3],f=s[5],g={},v=[],l={attributes:g,attributesOrder:v},"#"===y&&(l.paddEmpty=!0),"-"===y&&(l.removeEmpty=!0),"!"===s[4]&&(l.removeEmptyAttrs=!0),x){for(C in x)g[C]=x[C];v.push.apply(v,w)}if(f)for(f=t(f,"|"),o=0,r=f.length;r>o;o++)if(s=T.exec(f[o])){if(c={},m=s[1],p=s[2].replace(/::/g,":"),y=s[3],k=s[4],"!"===m&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(p),c.required=!0),"-"===m){delete g[p],v.splice(u(v,p),1);continue}y&&("="===y&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:p,value:k}),c.defaultValue=k),":"===y&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:p,value:k}),c.forcedValue=k),"<"===y&&(c.validValues=a(k,"?"))),$.test(p)?(l.attributePatterns=l.attributePatterns||[],c.pattern=d(p),l.attributePatterns.push(c)):(g[p]||v.push(p),g[p]=c)}x||"@"!=h||(x=g,w=v),b&&(l.outputName=h,N[b]=l),$.test(h)?(l.pattern=d(h),D.push(l)):N[h]=l}}function h(e){N={},D=[],f(e),s(b,function(e,t){R[t]=e.children})}function p(e){var n=/^(~)?(.+)$/;e&&(o.text_block_elements=o.block_elements=null,s(t(e,","),function(e){var t=n.exec(e),i="~"===t[1],o=i?"span":"div",r=t[2];if(R[r]=R[o],L[r]=o,i||(T[r.toUpperCase()]={},T[r]={}),!N[r]){var a=N[o];a=l({},a),delete a.removeEmptyAttrs,delete a.removeEmpty,N[r]=a}s(R,function(e,t){e[o]&&(R[t]=e=l({},R[t]),e[r]=e[o])})}))}function m(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&s(t(e,","),function(e){var i,o,r=n.exec(e);r&&(o=r[1],i=o?R[r[2]]:R[r[2]]={"#comment":{}},i=R[r[2]],s(t(r[3],"|"),function(e){"-"===o?(R[r[2]]=i=l({},R[r[2]]),delete i[e]):i[e]={}}))})}function g(e){var t,n=N[e];if(n)return n;for(t=D.length;t--;)if(n=D[t],n.pattern.test(e))return n}var v,y,b,x,w,C,k,S,T,$,E,_,A=this,N={},R={},D=[],L={},M={};e=e||{},b=n(e.schema),e.verify_html===!1&&(e.valid_elements="*[*]"),v=i(e.valid_styles),y=i(e.invalid_styles,"map"),S=i(e.valid_classes,"map"),x=r("whitespace_elements","pre script noscript style textarea video audio iframe object"),w=r("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),C=r("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),k=r("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),$=r("non_empty_elements","td th iframe video audio object script",C),E=r("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),T=r("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup",E),_=r("text_inline_elements","span strong b em i font strike u var cite dfn code mark q sup sub samp"),s((e.special||"script noscript style textarea").split(" "),function(e){M[e]=new RegExp("</"+e+"[^>]*>","gi")}),e.valid_elements?h(e.valid_elements):(s(b,function(e,t){N[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},R[t]=e.children}),"html5"!=e.schema&&s(t("strong/b em/i"),function(e){e=t(e,"/"),N[e[1]].outputName=e[0]}),N.img.attributesDefault=[{name:"alt",value:""}],s(t("ol ul sub sup blockquote span font a table tbody tr strong em b i"),function(e){N[e]&&(N[e].removeEmpty=!0)}),s(t("p h1 h2 h3 h4 h5 h6 th td pre div address caption"),function(e){N[e].paddEmpty=!0}),s(t("span"),function(e){N[e].removeEmptyAttrs=!0})),p(e.custom_elements),m(e.valid_children),f(e.extended_valid_elements),m("+ol[ul|ol],+ul[ul|ol]"),e.invalid_elements&&s(c(e.invalid_elements),function(e){N[e]&&delete N[e]}),g("span")||f("span[!data-mce-type|*]"),A.children=R,A.getValidStyles=function(){return v},A.getInvalidStyles=function(){return y},A.getValidClasses=function(){return S},A.getBoolAttrs=function(){return k},A.getBlockElements=function(){return T},A.getTextBlockElements=function(){return E},A.getTextInlineElements=function(){return _},A.getShortEndedElements=function(){return C},A.getSelfClosingElements=function(){return w},A.getNonEmptyElements=function(){return $},A.getWhiteSpaceElements=function(){return x},A.getSpecialElements=function(){return M},A.isValidChild=function(e,t){var n=R[e];return!(!n||!n[t])},A.isValid=function(e,t){var n,i,o=g(e);if(o){if(!t)return!0;if(o.attributes[t])return!0;if(n=o.attributePatterns)for(i=n.length;i--;)if(n[i].pattern.test(e))return!0}return!1},A.getElementRule=g,A.getCustomElements=function(){return L},A.addValidElements=f,A.setValidElements=h,A.addCustomElements=p,A.addValidChildren=m,A.elements=N}}),/**
 * SaxParser.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/SaxParser",["tinymce/html/Schema","tinymce/html/Entities","tinymce/util/Tools"],function(e,t,n){function i(e,t,n){var i,o,r,a,s=1;for(a=e.getShortEndedElements(),r=/<([!?\/])?([A-Za-z0-9\-_\:\.]+)((?:\s+[^"\'>]+(?:(?:"[^"]*")|(?:\'[^\']*\')|[^>]*))*|\/|\s+)>/g,r.lastIndex=i=n;o=r.exec(t);){if(i=r.lastIndex,"/"===o[1])s--;else if(!o[1]){if(o[2]in a)continue;s++}if(0===s)break}return i}function o(o,a){function s(){}var l=this;o=o||{},l.schema=a=a||new e,o.fix_self_closing!==!1&&(o.fix_self_closing=!0),r("comment cdata text start end pi doctype".split(" "),function(e){e&&(l[e]=o[e]||s)}),l.parse=function(e){function r(e){var t,n;for(t=F.length;t--&&F[t].name!==e;);if(t>=0){for(n=F.length-1;n>=t;n--)e=F[n],e.valid&&B.end(e.name);F.length=t}}function s(e,t,n,i,r){var a,s,l=/[\s\u0000-\u001F]+/g;if(t=t.toLowerCase(),n=t in y?t:z(n||i||r||""),x&&!m&&0!==t.indexOf("data-")){if(a=T[t],!a&&$){for(s=$.length;s--&&(a=$[s],!a.pattern.test(t)););-1===s&&(a=null)}if(!a)return;if(a.validValues&&!(n in a.validValues))return}if(W[t]&&!o.allow_script_urls){var c=n.replace(l,"");try{c=decodeURIComponent(c)}catch(u){c=unescape(c)}if(U.test(c))return;if(!o.allow_html_data_urls&&j.test(c)&&!/^data:image\//i.test(c))return}d.map[t]=n,d.push({name:t,value:n})}var l,c,u,d,f,h,p,m,g,v,y,b,x,w,C,k,S,T,$,E,_,A,N,R,D,L,M,P,O,B=this,I=0,F=[],H=0,z=t.decode,W=n.makeMap("src,href,data,background,formaction,poster"),U=/((java|vb)script|mhtml):/i,j=/^data:/i;for(D=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-_\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),L=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,v=a.getShortEndedElements(),R=o.self_closing_elements||a.getSelfClosingElements(),y=a.getBoolAttrs(),x=o.validate,g=o.remove_internals,O=o.fix_self_closing,M=a.getSpecialElements();l=D.exec(e);){if(I<l.index&&B.text(z(e.substr(I,l.index-I))),c=l[6])c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),r(c);else if(c=l[7]){if(c=c.toLowerCase(),":"===c.charAt(0)&&(c=c.substr(1)),b=c in v,O&&R[c]&&F.length>0&&F[F.length-1].name===c&&r(c),!x||(w=a.getElementRule(c))){if(C=!0,x&&(T=w.attributes,$=w.attributePatterns),(S=l[8])?(m=-1!==S.indexOf("data-mce-type"),m&&g&&(C=!1),d=[],d.map={},S.replace(L,s)):(d=[],d.map={}),x&&!m){if(E=w.attributesRequired,_=w.attributesDefault,A=w.attributesForced,N=w.removeEmptyAttrs,N&&!d.length&&(C=!1),A)for(f=A.length;f--;)k=A[f],p=k.name,P=k.value,"{$uid}"===P&&(P="mce_"+H++),d.map[p]=P,d.push({name:p,value:P});if(_)for(f=_.length;f--;)k=_[f],p=k.name,p in d.map||(P=k.value,"{$uid}"===P&&(P="mce_"+H++),d.map[p]=P,d.push({name:p,value:P}));if(E){for(f=E.length;f--&&!(E[f]in d.map););-1===f&&(C=!1)}if(k=d.map["data-mce-bogus"]){if("all"===k){I=i(a,e,D.lastIndex),D.lastIndex=I;continue}C=!1}}C&&B.start(c,d,b)}else C=!1;if(u=M[c]){u.lastIndex=I=l.index+l[0].length,(l=u.exec(e))?(C&&(h=e.substr(I,l.index-I)),I=l.index+l[0].length):(h=e.substr(I),I=e.length),C&&(h.length>0&&B.text(h,!0),B.end(c)),D.lastIndex=I;continue}b||(S&&S.indexOf("/")==S.length-1?C&&B.end(c):F.push({name:c,valid:C}))}else(c=l[1])?(">"===c.charAt(0)&&(c=" "+c),o.allow_conditional_comments||"[if"!==c.substr(0,3)||(c=" "+c),B.comment(c)):(c=l[2])?B.cdata(c):(c=l[3])?B.doctype(c):(c=l[4])&&B.pi(c,l[5]);I=l.index+l[0].length}for(I<e.length&&B.text(z(e.substr(I))),f=F.length-1;f>=0;f--)c=F[f],c.valid&&B.end(c.name)}}var r=n.each;return o.findEndTag=i,o}),/**
 * DomParser.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/DomParser",["tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/util/Tools"],function(e,t,n,i){var o=i.makeMap,r=i.each,a=i.explode,s=i.extend;return function(i,l){function c(t){var n,i,r,a,s,c,d,f,h,p,m,g,v,y;for(m=o("tr,td,th,tbody,thead,tfoot,table"),p=l.getNonEmptyElements(),g=l.getTextBlockElements(),n=0;n<t.length;n++)if(i=t[n],i.parent&&!i.fixed)if(g[i.name]&&"li"==i.parent.name){for(v=i.next;v&&g[v.name];)v.name="li",v.fixed=!0,i.parent.insert(v,i.parent),v=v.next;i.unwrap(i)}else{for(a=[i],r=i.parent;r&&!l.isValidChild(r.name,i.name)&&!m[r.name];r=r.parent)a.push(r);if(r&&a.length>1){for(a.reverse(),s=c=u.filterNode(a[0].clone()),h=0;h<a.length-1;h++){for(l.isValidChild(c.name,a[h].name)?(d=u.filterNode(a[h].clone()),c.append(d)):d=c,f=a[h].firstChild;f&&f!=a[h+1];)y=f.next,d.append(f),f=y;c=d}s.isEmpty(p)?r.insert(i,a[0],!0):(r.insert(s,a[0],!0),r.insert(i,s)),r=a[0],(r.isEmpty(p)||r.firstChild===r.lastChild&&"br"===r.firstChild.name)&&r.empty().remove()}else if(i.parent){if("li"===i.name){if(v=i.prev,v&&("ul"===v.name||"ul"===v.name)){v.append(i);continue}if(v=i.next,v&&("ul"===v.name||"ul"===v.name)){v.insert(i,v.firstChild,!0);continue}i.wrap(u.filterNode(new e("ul",1)));continue}l.isValidChild(i.parent.name,"div")&&l.isValidChild("div",i.name)?i.wrap(u.filterNode(new e("div",1))):"style"===i.name||"script"===i.name?i.empty().remove():i.unwrap()}}}var u=this,d={},f=[],h={},p={};i=i||{},i.validate="validate"in i?i.validate:!0,i.root_name=i.root_name||"body",u.schema=l=l||new t,u.filterNode=function(e){var t,n,i;n in d&&(i=h[n],i?i.push(e):h[n]=[e]),t=f.length;for(;t--;)n=f[t].name,n in e.attributes.map&&(i=p[n],i?i.push(e):p[n]=[e]);return e},u.addNodeFilter=function(e,t){r(a(e),function(e){var n=d[e];n||(d[e]=n=[]),n.push(t)})},u.addAttributeFilter=function(e,t){r(a(e),function(e){var n;for(n=0;n<f.length;n++)if(f[n].name===e)return void f[n].callbacks.push(t);f.push({name:e,callbacks:[t]})})},u.parse=function(t,r){function a(){function e(e){e&&(o=e.firstChild,o&&3==o.type&&(o.value=o.value.replace(A,"")),o=e.lastChild,o&&3==o.type&&(o.value=o.value.replace(R,"")))}var t,n,o=y.firstChild;if(l.isValidChild(y.name,B.toLowerCase())){for(;o;)t=o.next,3==o.type||1==o.type&&"p"!==o.name&&!_[o.name]&&!o.attr("data-mce-type")?n?n.append(o):(n=u(B,1),n.attr(i.forced_root_block_attrs),y.insert(n,o),n.append(o)):(e(n),n=null),o=t;e(n)}}function u(t,n){var i,o=new e(t,n);return t in d&&(i=h[t],i?i.push(o):h[t]=[o]),o}function m(e){var t,n,i;for(t=e.prev;t&&3===t.type;)n=t.value.replace(R,""),n.length>0?(t.value=n,t=t.prev):(i=t.prev,t.remove(),t=i)}function g(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var v,y,b,x,w,C,k,S,T,$,E,_,A,N,R,D,L,M,P,O,B,I=[];if(r=r||{},h={},p={},_=s(o("script,style,head,html,body,title,meta,param"),l.getBlockElements()),O=l.getNonEmptyElements(),P=l.children,E=i.validate,B="forced_root_block"in r?r.forced_root_block:i.forced_root_block,M=l.getWhiteSpaceElements(),A=/^[ \t\r\n]+/,R=/[ \t\r\n]+$/,D=/[ \t\r\n]+/g,L=/^[ \t\r\n]+$/,v=new n({validate:E,allow_script_urls:i.allow_script_urls,allow_conditional_comments:i.allow_conditional_comments,self_closing_elements:g(l.getSelfClosingElements()),cdata:function(e){b.append(u("#cdata",4)).value=e},text:function(e,t){var n;N||(e=e.replace(D," "),b.lastChild&&_[b.lastChild.name]&&(e=e.replace(A,""))),0!==e.length&&(n=u("#text",3),n.raw=!!t,b.append(n).value=e)},comment:function(e){b.append(u("#comment",8)).value=e},pi:function(e,t){b.append(u(e,7)).value=t,m(b)},doctype:function(e){var t;t=b.append(u("#doctype",10)),t.value=e,m(b)},start:function(e,t,n){var i,o,r,a,s;if(r=E?l.getElementRule(e):{}){for(i=u(r.outputName||e,1),i.attributes=t,i.shortEnded=n,b.append(i),s=P[b.name],s&&P[i.name]&&!s[i.name]&&I.push(i),o=f.length;o--;)a=f[o].name,a in t.map&&(T=p[a],T?T.push(i):p[a]=[i]);_[e]&&m(i),n||(b=i),!N&&M[e]&&(N=!0)}},end:function(t){var n,i,o,r,a;if(i=E?l.getElementRule(t):{}){if(_[t]&&!N){if(n=b.firstChild,n&&3===n.type)if(o=n.value.replace(A,""),o.length>0)n.value=o,n=n.next;else for(r=n.next,n.remove(),n=r;n&&3===n.type;)o=n.value,r=n.next,(0===o.length||L.test(o))&&(n.remove(),n=r),n=r;if(n=b.lastChild,n&&3===n.type)if(o=n.value.replace(R,""),o.length>0)n.value=o,n=n.prev;else for(r=n.prev,n.remove(),n=r;n&&3===n.type;)o=n.value,r=n.prev,(0===o.length||L.test(o))&&(n.remove(),n=r),n=r}if(N&&M[t]&&(N=!1),(i.removeEmpty||i.paddEmpty)&&b.isEmpty(O))if(i.paddEmpty)b.empty().append(new e("#text","3")).value=" ";else if(!b.attributes.map.name&&!b.attributes.map.id)return a=b.parent,_[b.name]?b.empty().remove():b.unwrap(),void(b=a);b=b.parent}}},l),y=b=new e(r.context||i.root_name,11),v.parse(t),E&&I.length&&(r.context?r.invalid=!0:c(I)),B&&("body"==y.name||r.isRootContent)&&a(),!r.invalid){for($ in h){for(T=d[$],x=h[$],k=x.length;k--;)x[k].parent||x.splice(k,1);for(w=0,C=T.length;C>w;w++)T[w](x,$,r)}for(w=0,C=f.length;C>w;w++)if(T=f[w],T.name in p){for(x=p[T.name],k=x.length;k--;)x[k].parent||x.splice(k,1);for(k=0,S=T.callbacks.length;S>k;k++)T.callbacks[k](x,T.name,r)}}return y},i.remove_trailing_brs&&u.addNodeFilter("br",function(t){var n,i,o,r,a,c,u,d,f=t.length,h=s({},l.getBlockElements()),p=l.getNonEmptyElements();for(h.body=1,n=0;f>n;n++)if(i=t[n],o=i.parent,h[i.parent.name]&&i===o.lastChild){for(a=i.prev;a;){if(c=a.name,"span"!==c||"bookmark"!==a.attr("data-mce-type")){if("br"!==c)break;if("br"===c){i=null;break}}a=a.prev}i&&(i.remove(),o.isEmpty(p)&&(u=l.getElementRule(o.name),u&&(u.removeEmpty?o.remove():u.paddEmpty&&(o.empty().append(new e("#text",3)).value=" "))))}else{for(r=i;o&&o.firstChild===r&&o.lastChild===r&&(r=o,!h[o.name]);)o=o.parent;r===o&&(d=new e("#text",3),d.value=" ",i.replace(d))}}),i.allow_html_in_named_anchor||u.addAttributeFilter("id,name",function(e){for(var t,n,i,o,r=e.length;r--;)if(o=e[r],"a"===o.name&&o.firstChild&&!o.attr("href")){i=o.parent,t=o.lastChild;do n=t.prev,i.insert(t,o),t=n;while(t)}}),i.validate&&l.getValidClasses()&&u.addAttributeFilter("class",function(e){for(var t,n,i,o,r,a,s,c=e.length,u=l.getValidClasses();c--;){for(t=e[c],n=t.attr("class").split(" "),r="",i=0;i<n.length;i++)o=n[i],s=!1,a=u["*"],a&&a[o]&&(s=!0),a=u[t.name],s||!a||a[o]||(s=!0),s&&(r&&(r+=" "),r+=o);r.length||(r=null),t.attr("class",r)}})}}),/**
 * Writer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Writer",["tinymce/html/Entities","tinymce/util/Tools"],function(e,t){var n=t.makeMap;return function(t){var i,o,r,a,s,l=[];return t=t||{},i=t.indent,o=n(t.indent_before||""),r=n(t.indent_after||""),a=e.getEncodeFunc(t.entity_encoding||"raw",t.entities),s="html"==t.element_format,{start:function(e,t,n){var c,u,d,f;if(i&&o[e]&&l.length>0&&(f=l[l.length-1],f.length>0&&"\n"!==f&&l.push("\n")),l.push("<",e),t)for(c=0,u=t.length;u>c;c++)d=t[c],l.push(" ",d.name,'="',a(d.value,!0),'"');!n||s?l[l.length]=">":l[l.length]=" />",n&&i&&r[e]&&l.length>0&&(f=l[l.length-1],f.length>0&&"\n"!==f&&l.push("\n"))},end:function(e){var t;l.push("</",e,">"),i&&r[e]&&l.length>0&&(t=l[l.length-1],t.length>0&&"\n"!==t&&l.push("\n"))},text:function(e,t){e.length>0&&(l[l.length]=t?e:a(e))},cdata:function(e){l.push("<![CDATA[",e,"]]>")},comment:function(e){l.push("<!--",e,"-->")},pi:function(e,t){t?l.push("<?",e," ",t,"?>"):l.push("<?",e,"?>"),i&&l.push("\n")},doctype:function(e){l.push("<!DOCTYPE",e,">",i?"\n":"")},reset:function(){l.length=0},getContent:function(){return l.join("").replace(/\n$/,"")}}}}),/**
 * Serializer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/html/Serializer",["tinymce/html/Writer","tinymce/html/Schema"],function(e,t){return function(n,i){var o=this,r=new e(n);n=n||{},n.validate="validate"in n?n.validate:!0,o.schema=i=i||new t,o.writer=r,o.serialize=function(e){function t(e){var n,s,l,c,u,d,f,h,p,m=o[e.type];if(m)m(e);else{if(n=e.name,s=e.shortEnded,l=e.attributes,a&&l&&l.length>1){for(d=[],d.map={},p=i.getElementRule(e.name),f=0,h=p.attributesOrder.length;h>f;f++)c=p.attributesOrder[f],c in l.map&&(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));for(f=0,h=l.length;h>f;f++)c=l[f].name,c in d.map||(u=l.map[c],d.map[c]=u,d.push({name:c,value:u}));l=d}if(r.start(e.name,l,s),!s){if(e=e.firstChild)do t(e);while(e=e.next);r.end(n)}}}var o,a;return a=n.validate,o={3:function(e){r.text(e.value,e.raw)},8:function(e){r.comment(e.value)},7:function(e){r.pi(e.name,e.value)},10:function(e){r.doctype(e.value)},4:function(e){r.cdata(e.value)},11:function(e){if(e=e.firstChild)do t(e);while(e=e.next)}},r.reset(),1!=e.type||n.inner?o[11](e):t(e),r.getContent()}}}),/**
 * Serializer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/Serializer",["tinymce/dom/DOMUtils","tinymce/html/DomParser","tinymce/html/Entities","tinymce/html/Serializer","tinymce/html/Node","tinymce/html/Schema","tinymce/Env","tinymce/util/Tools"],function(e,t,n,i,o,r,a,s){var l=s.each,c=s.trim,u=e.DOM;return function(e,o){var s,d,f;return o&&(s=o.dom,d=o.schema),s=s||u,d=d||new r(e),e.entity_encoding=e.entity_encoding||"named",e.remove_trailing_brs="remove_trailing_brs"in e?e.remove_trailing_brs:!0,f=new t(e,d),f.addAttributeFilter("data-mce-tabindex",function(e,t){for(var n,i=e.length;i--;)n=e[i],n.attr("tabindex",n.attributes.map["data-mce-tabindex"]),n.attr(t,null)}),f.addAttributeFilter("src,href,style",function(t,n){for(var i,o,r,a=t.length,l="data-mce-"+n,c=e.url_converter,u=e.url_converter_scope;a--;)i=t[a],o=i.attributes.map[l],o!==r?(i.attr(n,o.length>0?o:null),i.attr(l,null)):(o=i.attributes.map[n],"style"===n?o=s.serializeStyle(s.parseStyle(o),i.name):c&&(o=c.call(u,o,n,i.name)),i.attr(n,o.length>0?o:null))}),f.addAttributeFilter("class",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.attr("class"),n&&(n=t.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),t.attr("class",n.length>0?n:null))}),f.addAttributeFilter("data-mce-type",function(e,t,n){for(var i,o=e.length;o--;)i=e[o],"bookmark"!==i.attributes.map["data-mce-type"]||n.cleanup||i.remove()}),f.addNodeFilter("noscript",function(e){for(var t,i=e.length;i--;)t=e[i].firstChild,t&&(t.value=n.decode(t.value))}),f.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var i,o,r,a=e.length;a--;)i=e[a],o=i.firstChild?i.firstChild.value:"","script"===t?(r=i.attr("type"),r&&i.attr("type","mce-no/type"==r?null:r.replace(/^mce\-/,"")),o.length>0&&(i.firstChild.value="// <![CDATA[\n"+n(o)+"\n// ]]>")):o.length>0&&(i.firstChild.value="<!--\n"+n(o)+"\n-->")}),f.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),f.addNodeFilter("xml:namespace,input",function(e,t){for(var n,i=e.length;i--;)n=e[i],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),e.fix_list_elements&&f.addNodeFilter("ul,ol",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.parent,("ul"===n.name||"ol"===n.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),f.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:d,addNodeFilter:f.addNodeFilter,addAttributeFilter:f.addAttributeFilter,serialize:function(t,n){var o,r,u,h,p,m=this;return a.ie&&s.select("script,style,select,map").length>0?(p=t.innerHTML,t=t.cloneNode(!1),s.setHTML(t,p)):t=t.cloneNode(!0),o=t.ownerDocument.implementation,o.createHTMLDocument&&(r=o.createHTMLDocument(""),l("BODY"==t.nodeName?t.childNodes:[t],function(e){r.body.appendChild(r.importNode(e,!0))}),t="BODY"!=t.nodeName?r.body.firstChild:r.body,u=s.doc,s.doc=r),n=n||{},n.format=n.format||"html",n.selection&&(n.forced_root_block=""),n.no_events||(n.node=t,m.onPreProcess(n)),h=new i(e,d),n.content=h.serialize(f.parse(c(n.getInner?t.innerHTML:s.getOuterHTML(t)),n)),n.cleanup||(n.content=n.content.replace(/\uFEFF/g,"")),n.no_events||m.onPostProcess(n),u&&(s.doc=u),n.node=null,n.content},addRules:function(e){d.addValidElements(e)},setRules:function(e){d.setValidElements(e)},onPreProcess:function(e){o&&o.fire("PreProcess",e)},onPostProcess:function(e){o&&o.fire("PostProcess",e)}}}}),/**
 * TridentSelection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/TridentSelection",[],function(){function e(e){function t(t,n){var i,o,r,a,s,l,c,u,d=0,f=-1;if(i=t.duplicate(),i.collapse(n),u=i.parentElement(),u.ownerDocument===e.dom.doc){for(;"false"===u.contentEditable;)u=u.parentNode;if(!u.hasChildNodes())return{node:u,inside:1};for(a=u.children,o=a.length-1;o>=d;)if(c=Math.floor((d+o)/2),s=a[c],i.moveToElementText(s),f=i.compareEndPoints(n?"StartToStart":"EndToEnd",t),f>0)o=c-1;else{if(!(0>f))return{node:s};d=c+1}if(0>f)for(s?i.collapse(!1):(i.moveToElementText(u),i.collapse(!0),s=u,r=!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",1)&&u==i.parentElement();)l++;else for(i.collapse(!0),l=0;0!==i.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==i.move("character",-1)&&u==i.parentElement();)l++;return{node:s,position:f,offset:l,inside:r}}}function n(){function n(e){var n,i,o,r,a,s=t(u,e),l=0;if(n=s.node,i=s.offset,s.inside&&!n.hasChildNodes())return void d[e?"setStart":"setEnd"](n,0);if(i===r)return void d[e?"setStartBefore":"setEndAfter"](n);if(s.position<0){if(o=s.inside?n.firstChild:n.nextSibling,!o)return void d[e?"setStartAfter":"setEndAfter"](n);if(!i)return void(3==o.nodeType?d[e?"setStart":"setEnd"](o,0):d[e?"setStartBefore":"setEndBefore"](o));for(;o;){if(3==o.nodeType&&(a=o.nodeValue,l+=a.length,l>=i)){n=o,l-=i,l=a.length-l;break}o=o.nextSibling}}else{if(o=n.previousSibling,!o)return d[e?"setStartBefore":"setEndBefore"](n);if(!i)return void(3==n.nodeType?d[e?"setStart":"setEnd"](o,n.nodeValue.length):d[e?"setStartAfter":"setEndAfter"](o));for(;o;){if(3==o.nodeType&&(l+=o.nodeValue.length,l>=i)){n=o,l-=i;break}o=o.previousSibling}}d[e?"setStart":"setEnd"](n,l)}var r,a,s,l,c,u=e.getRng(),d=o.createRng();if(r=u.item?u.item(0):u.parentElement(),r.ownerDocument!=o.doc)return d;if(a=e.isCollapsed(),u.item)return d.setStart(r.parentNode,o.nodeIndex(r)),d.setEnd(d.startContainer,d.startOffset+1),d;try{n(!0),a||n()}catch(f){if(-2147024809!=f.number)throw f;c=i.getBookmark(2),s=u.duplicate(),s.collapse(!0),r=s.parentElement(),a||(s=u.duplicate(),s.collapse(!1),l=s.parentElement(),l.innerHTML=l.innerHTML),r.innerHTML=r.innerHTML,i.moveToBookmark(c),u=e.getRng(),n(!0),a||n()}return d}var i=this,o=e.dom,r=!1;this.getBookmark=function(n){function i(e){var t,n,i,r,a=[];for(t=e.parentNode,n=o.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(i=t.children,r=i.length;r--;)if(e===i[r]){a.push(r);break}e=t,t=t.parentNode}return a}function r(e){var n;return n=t(a,e),n?{position:n.position,offset:n.offset,indexes:i(n.node),inside:n.inside}:void 0}var a=e.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:i(a.item(0))}:(s.start=r(!0),e.isCollapsed()||(s.end=r()))),s},this.moveToBookmark=function(e){function t(e){var t,n,i,r;for(t=o.getRoot(),n=e.length-1;n>=0;n--)r=t.children,i=e[n],i<=r.length-1&&(t=r[i]);return t}function n(n){var o,a,s,l,c=e[n?"start":"end"];c&&(o=c.position>0,a=r.createTextRange(),a.moveToElementText(t(c.indexes)),l=c.offset,l!==s?(a.collapse(c.inside||o),a.moveStart("character",o?-l:l)):a.collapse(n),i.setEndPoint(n?"StartToStart":"EndToStart",a),n&&i.collapse(!0))}var i,r=o.doc.body;e.start&&(e.start.ctrl?(i=r.createControlRange(),i.addElement(t(e.start.indexes)),i.select()):(i=r.createTextRange(),n(!0),n(),i.select()))},this.addRange=function(t){function n(e){var t,n,a,d,f;a=o.create("a"),t=e?s:c,n=e?l:u,d=i.duplicate(),(t==p||t==p.documentElement)&&(t=m,n=0),3==t.nodeType?(t.parentNode.insertBefore(a,t),d.moveToElementText(a),d.moveStart("character",n),o.remove(a),i.setEndPoint(e?"StartToStart":"EndToEnd",d)):(f=t.childNodes,f.length?(n>=f.length?o.insertAfter(a,f[f.length-1]):t.insertBefore(a,f[n]),d.moveToElementText(a)):t.canHaveHTML&&(t.innerHTML="<span>&#xFEFF;</span>",a=t.firstChild,d.moveToElementText(a),d.collapse(r)),i.setEndPoint(e?"StartToStart":"EndToEnd",d),o.remove(a))}var i,a,s,l,c,u,d,f,h,p=e.dom.doc,m=p.body;if(s=t.startContainer,l=t.startOffset,c=t.endContainer,u=t.endOffset,i=m.createTextRange(),s==c&&1==s.nodeType){if(l==u&&!s.hasChildNodes()){if(s.canHaveHTML)return d=s.previousSibling,d&&!d.hasChildNodes()&&o.isBlock(d)?d.innerHTML="&#xFEFF;":d=null,s.innerHTML="<span>&#xFEFF;</span><span>&#xFEFF;</span>",i.moveToElementText(s.lastChild),i.select(),o.doc.selection.clear(),s.innerHTML="",void(d&&(d.innerHTML=""));l=o.nodeIndex(s),s=s.parentNode}if(l==u-1)try{if(h=s.childNodes[l],a=m.createControlRange(),a.addElement(h),a.select(),f=e.getRng(),f.item&&h===f.item(0))return}catch(g){}}n(!0),n(),i.select()},this.getRangeAt=n}return e}),/**
 * VK.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/VK",["tinymce/Env"],function(e){return{BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.mac?t.metaKey:t.ctrlKey&&!t.altKey}}}),/**
 * ControlSelection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/ControlSelection",["tinymce/util/VK","tinymce/util/Tools","tinymce/Env"],function(e,t,n){return function(i,o){function r(e){var t=o.settings.object_resizing;return t===!1||n.iOS?!1:("string"!=typeof t&&(t="table,img,div"),"false"===e.getAttribute("data-mce-resize")?!1:o.dom.is(e,t))}function a(t){var n,i,r,a,s;n=t.screenX-$,i=t.screenY-E,M=n*S[2]+N,P=i*S[3]+R,M=5>M?5:M,P=5>P?5:P,r="IMG"==x.nodeName&&o.settings.resize_img_proportional!==!1?!e.modifierPressed(t):e.modifierPressed(t)||"IMG"==x.nodeName&&S[2]*S[3]!==0,r&&(U(n)>U(i)?(P=j(M*D),M=j(P/D)):(M=j(P/D),P=j(M*D))),I.setStyles(w,{width:M,height:P}),a=S.startPos.x+n,s=S.startPos.y+i,a=a>0?a:0,s=s>0?s:0,I.setStyles(C,{left:a,top:s,display:"block"}),C.innerHTML=M+" &times; "+P,S[2]<0&&w.clientWidth<=M&&I.setStyle(w,"left",_+(N-M)),S[3]<0&&w.clientHeight<=P&&I.setStyle(w,"top",A+(R-P)),n=V.scrollWidth-O,i=V.scrollHeight-B,n+i!==0&&I.setStyles(C,{left:a-n,top:s-i}),L||(o.fire("ObjectResizeStart",{target:x,width:N,height:R}),L=!0)}function s(){function e(e,t){t&&(x.style[e]||!o.schema.isValid(x.nodeName.toLowerCase(),e)?I.setStyle(x,e,t):I.setAttrib(x,e,t))}L=!1,e("width",M),e("height",P),I.unbind(H,"mousemove",a),I.unbind(H,"mouseup",s),z!=H&&(I.unbind(z,"mousemove",a),I.unbind(z,"mouseup",s)),I.remove(w),I.remove(C),W&&"TABLE"!=x.nodeName||l(x),o.fire("ObjectResized",{target:x,width:M,height:P}),I.setAttrib(x,"style",I.getAttrib(x,"style")),o.nodeChanged()}function l(e,t,i){var l,u,d,f,h;g(),l=I.getPos(e,V),_=l.x,A=l.y,h=e.getBoundingClientRect(),u=h.width||h.right-h.left,d=h.height||h.bottom-h.top,x!=e&&(m(),x=e,M=P=0),f=o.fire("ObjectSelected",{target:e}),r(e)&&!f.isDefaultPrevented()?F(k,function(e,o){function r(t){$=t.screenX,E=t.screenY,N=x.clientWidth,R=x.clientHeight,D=R/N,S=e,e.startPos={x:u*e[0]+_,y:d*e[1]+A},O=V.scrollWidth,B=V.scrollHeight,w=x.cloneNode(!0),I.addClass(w,"mce-clonedresizable"),I.setAttrib(w,"data-mce-bogus","all"),w.contentEditable=!1,w.unSelectabe=!0,I.setStyles(w,{left:_,top:A,margin:0}),w.removeAttribute("data-mce-selected"),V.appendChild(w),I.bind(H,"mousemove",a),I.bind(H,"mouseup",s),z!=H&&(I.bind(z,"mousemove",a),I.bind(z,"mouseup",s)),C=I.add(V,"div",{"class":"mce-resize-helper","data-mce-bogus":"all"},N+" &times; "+R)}var l,c;return t?void(o==t&&r(i)):(l=I.get("mceResizeHandle"+o),l?I.show(l):(c=V,l=I.add(c,"div",{id:"mceResizeHandle"+o,"data-mce-bogus":"all","class":"mce-resizehandle",unselectable:!0,style:"cursor:"+o+"-resize; margin:0; padding:0"}),n.ie&&(l.contentEditable=!1)),e.elm||(I.bind(l,"mousedown",function(e){e.stopImmediatePropagation(),e.preventDefault(),r(e)}),e.elm=l),void I.setStyles(l,{left:u*e[0]+_-l.offsetWidth/2,top:d*e[1]+A-l.offsetHeight/2}))}):c(),x.setAttribute("data-mce-selected","1")}function c(){var e,t;g(),x&&x.removeAttribute("data-mce-selected");for(e in k)t=I.get("mceResizeHandle"+e),t&&(I.unbind(t),I.remove(t))}function u(e){function t(e,t){if(e)do if(e===t)return!0;while(e=e.parentNode)}var n,o;if(!L)return F(I.select("img[data-mce-selected],hr[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),o="mousedown"==e.type?e.target:i.getNode(),o=I.$(o).closest(W?"table":"table,img,hr")[0],t(o,V)&&(v(),n=i.getStart(!0),t(n,o)&&t(i.getEnd(!0),o)&&(!W||o!=n&&"IMG"!==n.nodeName))?void l(o):void c()}function d(e,t,n){e&&e.attachEvent&&e.attachEvent("on"+t,n)}function f(e,t,n){e&&e.detachEvent&&e.detachEvent("on"+t,n)}function h(e){var t,n,i,r,a,s,c,u=e.srcElement;t=u.getBoundingClientRect(),s=T.clientX-t.left,c=T.clientY-t.top;for(n in k)if(i=k[n],r=u.offsetWidth*i[0],a=u.offsetHeight*i[1],U(r-s)<8&&U(a-c)<8){S=i;break}L=!0,o.fire("ObjectResizeStart",{target:x,width:x.clientWidth,height:x.clientHeight}),o.getDoc().selection.empty(),l(u,n,T)}function p(e){var t=e.srcElement;if(t!=x){if(o.fire("ObjectSelected",{target:t}),m(),0===t.id.indexOf("mceResizeHandle"))return void(e.returnValue=!1);("IMG"==t.nodeName||"TABLE"==t.nodeName)&&(c(),x=t,d(t,"resizestart",h))}}function m(){f(x,"resizestart",h)}function g(){for(var e in k){var t=k[e];t.elm&&(I.unbind(t.elm),delete t.elm)}}function v(){try{o.getDoc().execCommand("enableObjectResizing",!1,!1)}catch(e){}}function y(e){var t;if(W){t=H.body.createControlRange();try{return t.addElement(e),t.select(),!0}catch(n){}}}function b(){x=w=null,W&&(m(),f(V,"controlselect",p))}var x,w,C,k,S,T,$,E,_,A,N,R,D,L,M,P,O,B,I=o.dom,F=t.each,H=o.getDoc(),z=document,W=n.ie&&n.ie<11,U=Math.abs,j=Math.round,V=o.getBody();k={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]};var q=".mce-content-body";return o.contentStyles.push(q+" div.mce-resizehandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}"+q+" .mce-resizehandle:hover {background: #000}"+q+" img[data-mce-selected], hr[data-mce-selected] {outline: 1px solid black;resize: none}"+q+" .mce-clonedresizable {position: absolute;"+(n.gecko?"":"outline: 1px dashed black;")+"opacity: .5;filter: alpha(opacity=50);z-index: 10000}"+q+" .mce-resize-helper {background: #555;background: rgba(0,0,0,0.75);border-radius: 3px;border: 1px;color: white;display: none;font-family: sans-serif;font-size: 12px;white-space: nowrap;line-height: 14px;margin: 5px 10px;padding: 5px;position: absolute;z-index: 10001}"),o.on("init",function(){W?(o.on("ObjectResized",function(e){"TABLE"!=e.target.nodeName&&(c(),y(e.target))}),d(V,"controlselect",p),o.on("mousedown",function(e){T=e})):(v(),n.ie>=11&&(o.on("mouseup",function(e){var t=e.target.nodeName;!L&&/^(TABLE|IMG|HR)$/.test(t)&&(o.selection.select(e.target,"TABLE"==t),o.nodeChanged())}),o.dom.bind(V,"mscontrolselect",function(e){/^(TABLE|IMG|HR)$/.test(e.target.nodeName)&&(e.preventDefault(),"IMG"==e.target.tagName&&window.setTimeout(function(){o.selection.select(e.target)},0))}))),o.on("nodechange ResizeEditor",u),o.on("keydown keyup",function(e){x&&"TABLE"==x.nodeName&&u(e)}),o.on("hide",c)}),o.on("remove",g),{isResizable:r,showResizeRect:l,hideResizeRect:c,updateResizeRect:u,controlSelect:y,destroy:b}}}),/**
 * BookmarkManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/BookmarkManager",["tinymce/Env","tinymce/util/Tools"],function(e,t){function n(n){var i=n.dom;this.getBookmark=function(e,o){function r(e,n){var o=0;return t.each(i.select(e),function(e,t){e==n&&(o=t)}),o}function a(e){function t(t){var n,i,o,r=t?"start":"end";n=e[r+"Container"],i=e[r+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(o=n.childNodes,n=o[Math.min(t?i:i-1,o.length-1)],n&&(i=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,i)))}return t(!0),t(),e}function s(){function e(e,t){var n,a,s=e[t?"startContainer":"endContainer"],l=e[t?"startOffset":"endOffset"],c=[],u=0;if(3==s.nodeType){if(o)for(n=s.previousSibling;n&&3==n.nodeType;n=n.previousSibling)l+=n.nodeValue.length;c.push(l)}else a=s.childNodes,l>=a.length&&a.length&&(u=1,l=Math.max(0,a.length-1)),c.push(i.nodeIndex(a[l],o)+u);for(;s&&s!=r;s=s.parentNode)c.push(i.nodeIndex(s,o));return c}var t=n.getRng(!0),r=i.getRoot(),a={};return a.start=e(t,!0),n.isCollapsed()||(a.end=e(t)),a}var l,c,u,d,f,h,p,m="&#xFEFF;";if(2==e)return h=n.getNode(),f=h?h.nodeName:null,"IMG"==f?{name:f,index:r(f,h)}:n.tridentSel?n.tridentSel.getBookmark(e):s();if(e)return{rng:n.getRng()};if(l=n.getRng(),u=i.uniqueId(),d=n.isCollapsed(),p="overflow:hidden;line-height:0px",l.duplicate||l.item){if(l.item)return h=l.item(0),f=h.nodeName,{name:f,index:r(f,h)};c=l.duplicate();try{l.collapse(),l.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_start" style="'+p+'">'+m+"</span>"),d||(c.collapse(!1),l.moveToElementText(c.parentElement()),0===l.compareEndPoints("StartToEnd",c)&&c.move("character",-1),c.pasteHTML('<span data-mce-type="bookmark" id="'+u+'_end" style="'+p+'">'+m+"</span>"))}catch(g){return null}}else{if(h=n.getNode(),f=h.nodeName,"IMG"==f)return{name:f,index:r(f,h)};c=a(l.cloneRange()),d||(c.collapse(!1),c.insertNode(i.create("span",{"data-mce-type":"bookmark",id:u+"_end",style:p},m))),l=a(l),l.collapse(!0),l.insertNode(i.create("span",{"data-mce-type":"bookmark",id:u+"_start",style:p},m))}return n.moveToBookmark({id:u,keep:1}),{id:u}},this.moveToBookmark=function(o){function r(e){var t,n,i,r,a=o[e?"start":"end"];if(a){for(i=a[0],n=c,t=a.length-1;t>=1;t--){if(r=n.childNodes,a[t]>r.length-1)return;n=r[a[t]]}3===n.nodeType&&(i=Math.min(a[0],n.nodeValue.length)),1===n.nodeType&&(i=Math.min(a[0],n.childNodes.length)),e?l.setStart(n,i):l.setEnd(n,i)}return!0}function a(n){var r,a,s,l,c=i.get(o.id+"_"+n),p=o.keep;if(c&&(r=c.parentNode,"start"==n?(p?(r=c.firstChild,a=1):a=i.nodeIndex(c),u=d=r,f=h=a):(p?(r=c.firstChild,a=1):a=i.nodeIndex(c),d=r,h=a),!p)){for(l=c.previousSibling,s=c.nextSibling,t.each(t.grep(c.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});c=i.get(o.id+"_"+n);)i.remove(c,1);l&&s&&l.nodeType==s.nodeType&&3==l.nodeType&&!e.opera&&(a=l.nodeValue.length,l.appendData(s.nodeValue),i.remove(s),"start"==n?(u=d=l,f=h=a):(d=l,h=a))}}function s(t){return!i.isBlock(t)||t.innerHTML||e.ie||(t.innerHTML='<br data-mce-bogus="1" />'),t}var l,c,u,d,f,h;if(o)if(o.start){if(l=i.createRng(),c=i.getRoot(),n.tridentSel)return n.tridentSel.moveToBookmark(o);r(!0)&&r()&&n.setRng(l)}else o.id?(a("start"),a("end"),u&&(l=i.createRng(),l.setStart(s(u),f),l.setEnd(s(d),h),n.setRng(l))):o.name?n.select(i.select(o.name)[o.index]):o.rng&&n.setRng(o.rng)}}return n.isBookmarkNode=function(e){return e&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},n}),/**
 * Selection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/Selection",["tinymce/dom/TreeWalker","tinymce/dom/TridentSelection","tinymce/dom/ControlSelection","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/Env","tinymce/util/Tools"],function(e,n,i,o,r,a,s){function l(e,t,o,a){var s=this;s.dom=e,s.win=t,s.serializer=o,s.editor=a,s.bookmarkManager=new r(s),s.controlSelection=new i(s,a),s.win.getSelection||(s.tridentSel=new n(s))}var c=s.each,u=s.trim,d=a.ie;return l.prototype={setCursorLocation:function(e,t){var n=this,i=n.dom.createRng();e?(i.setStart(e,t),i.setEnd(e,t),n.setRng(i),n.collapse(!1)):(n._moveEndPoint(i,n.editor.getBody(),!0),n.setRng(i))},getContent:function(e){var n,i,o,r=this,a=r.getRng(),s=r.dom.create("body"),l=r.getSel();return e=e||{},n=i="",e.get=!0,e.format=e.format||"html",e.selection=!0,r.editor.fire("BeforeGetContent",e),"text"==e.format?r.isCollapsed()?"":a.text||(l.toString?l.toString():""):(a.cloneContents?(o=a.cloneContents(),o&&s.appendChild(o)):a.item!==t||a.htmlText!==t?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=a.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(i=" "),e.getInner=!0,e.content=r.isCollapsed()?"":n+r.serializer.serialize(s,e)+i,r.editor.fire("GetContent",e),e.content)},setContent:function(e,t){var n,i,o,r=this,a=r.getRng(),s=r.win.document;if(t=t||{format:"html"},t.set=!0,t.selection=!0,e=t.content=e,t.no_events||r.editor.fire("BeforeSetContent",t),e=t.content,a.insertNode){e+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=e:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:a.createContextualFragment?a.insertNode(a.createContextualFragment(e)):(i=s.createDocumentFragment(),o=s.createElement("div"),i.appendChild(o),o.outerHTML=e,a.insertNode(i))),n=r.dom.get("__caret"),a=s.createRange(),a.setStartBefore(n),a.setEndBefore(n),r.setRng(a),r.dom.remove("__caret");try{r.setRng(a)}catch(l){}}else a.item&&(s.execCommand("Delete",!1,null),a=r.getRng()),/^\s+/.test(e)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+e),r.dom.remove("__mce_tmp")):a.pasteHTML(e);t.no_events||r.editor.fire("SetContent",t)},getStart:function(e){var t,n,i,o,r=this,a=r.getRng();if(a.duplicate||a.item){if(a.item)return a.item(0);for(i=a.duplicate(),i.collapse(1),t=i.parentElement(),t.ownerDocument!==r.dom.doc&&(t=r.dom.getRoot()),n=o=a.parentElement();o=o.parentNode;)if(o==t){t=n;break}return t}return t=a.startContainer,1==t.nodeType&&t.hasChildNodes()&&(e&&a.collapsed||(t=t.childNodes[Math.min(t.childNodes.length-1,a.startOffset)])),t&&3==t.nodeType?t.parentNode:t},getEnd:function(e){var t,n,i=this,o=i.getRng();return o.duplicate||o.item?o.item?o.item(0):(o=o.duplicate(),o.collapse(0),t=o.parentElement(),t.ownerDocument!==i.dom.doc&&(t=i.dom.getRoot()),t&&"BODY"==t.nodeName?t.lastChild||t:t):(t=o.endContainer,n=o.endOffset,1==t.nodeType&&t.hasChildNodes()&&(e&&o.collapsed||(t=t.childNodes[n>0?n-1:n])),t&&3==t.nodeType?t.parentNode:t)},getBookmark:function(e,t){return this.bookmarkManager.getBookmark(e,t)},moveToBookmark:function(e){return this.bookmarkManager.moveToBookmark(e)},select:function(e,t){var n,i=this,o=i.dom,r=o.createRng();if(i.lastFocusBookmark=null,e){if(!t&&i.controlSelection.controlSelect(e))return;n=o.nodeIndex(e),r.setStart(e.parentNode,n),r.setEnd(e.parentNode,n+1),t&&(i._moveEndPoint(r,e,!0),i._moveEndPoint(r,e)),i.setRng(r)}return e},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!t||t.item?!1:t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed},collapse:function(e){var t,n=this,i=n.getRng();i.item&&(t=i.item(0),i=n.win.document.body.createTextRange(),i.moveToElementText(t)),i.collapse(!!e),n.setRng(i)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(e){function t(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(i){return-1}}var n,i,o,r,a=this,s=a.win.document;if(!e&&a.lastFocusBookmark){var l=a.lastFocusBookmark;return l.startContainer?(i=s.createRange(),i.setStart(l.startContainer,l.startOffset),i.setEnd(l.endContainer,l.endOffset)):i=l,i}if(e&&a.tridentSel)return a.tridentSel.getRangeAt(0);try{(n=a.getSel())&&(i=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():s.createRange())}catch(c){}if(d&&i&&i.setStart&&s.selection){try{r=s.selection.createRange()}catch(c){}r&&r.item&&(o=r.item(0),i=s.createRange(),i.setStartBefore(o),i.setEndAfter(o))}return i||(i=s.createRange?s.createRange():s.body.createTextRange()),i.setStart&&9===i.startContainer.nodeType&&i.collapsed&&(o=a.dom.getRoot(),i.setStart(o,0),i.setEnd(o,0)),a.selectedRange&&a.explicitRange&&(0===t(i.START_TO_START,i,a.selectedRange)&&0===t(i.END_TO_END,i,a.selectedRange)?i=a.explicitRange:(a.selectedRange=null,a.explicitRange=null)),i},setRng:function(e,t){var n,i=this;if(e)if(e.select)try{e.select()}catch(o){}else if(i.tridentSel){if(e.cloneRange)try{return void i.tridentSel.addRange(e)}catch(o){}}else if(n=i.getSel()){i.explicitRange=e;try{n.removeAllRanges(),n.addRange(e)}catch(o){}t===!1&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),i.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n=this,i=n.getRng(),o=i.startContainer,r=i.endContainer,a=i.startOffset,s=i.endOffset,l=n.dom.getRoot();return i?i.setStart?(t=i.commonAncestorContainer,!i.collapsed&&(o==r&&2>s-a&&o.hasChildNodes()&&(t=o.childNodes[a]),3===o.nodeType&&3===r.nodeType&&(o=o.length===a?e(o.nextSibling,!0):o.parentNode,r=0===s?e(r.previousSibling,!1):r.parentNode,o&&o===r))?o:t&&3==t.nodeType?t.parentNode:t):(t=i.item?i.item(0):i.parentElement(),t.ownerDocument!==n.win.document&&(t=l),t):l},getSelectedBlocks:function(t,n){var i,o,r=this,a=r.dom,s=[];if(o=a.getRoot(),t=a.getParent(t||r.getStart(),a.isBlock),n=a.getParent(n||r.getEnd(),a.isBlock),t&&t!=o&&s.push(t),t&&n&&t!=n){i=t;for(var l=new e(t,o);(i=l.next())&&i!=n;)a.isBlock(i)&&s.push(i)}return n&&t!=n&&n!=o&&s.push(n),s},isForward:function(){var e,t,n=this.dom,i=this.getSel();return i&&i.anchorNode&&i.focusNode?(e=n.createRng(),e.setStart(i.anchorNode,i.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(i.focusNode,i.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0):!0},normalize:function(){var e=this,t=e.getRng();return!d&&new o(e.dom).normalize(t)&&e.setRng(t,e.isForward()),t},selectorChanged:function(e,t){var n,i=this;return i.selectorChangedData||(i.selectorChangedData={},n={},i.editor.on("NodeChange",function(e){var t=e.element,o=i.dom,r=o.getParents(t,null,o.getRoot()),a={};c(i.selectorChangedData,function(e,t){c(r,function(i){return o.is(i,t)?(n[t]||(c(e,function(e){e(!0,{node:i,selector:t,parents:r})}),n[t]=e),a[t]=e,!1):void 0})}),c(n,function(e,i){a[i]||(delete n[i],c(e,function(e){e(!1,{node:t,selector:i,parents:r})}))})})),i.selectorChangedData[e]||(i.selectorChangedData[e]=[]),i.selectorChangedData[e].push(t),i},getScrollContainer:function(){for(var e,t=this.dom.getRoot();t&&"BODY"!=t.nodeName;){if(t.scrollHeight>t.clientHeight){e=t;break}t=t.parentNode}return e},scrollIntoView:function(e){function t(e){for(var t=0,n=0,i=e;i&&i.nodeType;)t+=i.offsetLeft||0,n+=i.offsetTop||0,i=i.offsetParent;return{x:t,y:n}}var n,i,o,r,a=this,s=a.dom,l=s.getRoot();if("BODY"!=l.nodeName){var c=a.getScrollContainer();if(c)return n=t(e).y-t(c).y,r=c.clientHeight,o=c.scrollTop,void((o>n||n+25>o+r)&&(c.scrollTop=o>n?n:n-r+25))}i=s.getViewPort(a.editor.getWin()),n=s.getPos(e).y,o=i.y,r=i.h,(n<i.y||n+25>o+r)&&a.editor.getWin().scrollTo(0,o>n?n:n-r+25)},placeCaretAt:function(e,t){var n,i,o=this.editor.getDoc();if(o.caretPositionFromPoint)i=o.caretPositionFromPoint(e,t),n=o.createRange(),n.setStart(i.offsetNode,i.offset),n.collapse(!0);else if(o.caretRangeFromPoint)n=o.caretRangeFromPoint(e,t);else if(o.body.createTextRange){n=o.body.createTextRange();try{n.moveToPoint(e,t),n.collapse(!0)}catch(r){n.collapse(t<o.body.clientHeight)}}this.setRng(n)},_moveEndPoint:function(t,n,i){var o=n,r=new e(n,o),s=this.dom.schema.getNonEmptyElements();do{if(3==n.nodeType&&0!==u(n.nodeValue).length)return void(i?t.setStart(n,0):t.setEnd(n,n.nodeValue.length));if(s[n.nodeName]&&!/^(TD|TH)$/.test(n.nodeName))return void(i?t.setStartBefore(n):"BR"==n.nodeName?t.setEndBefore(n):t.setEndAfter(n));if(a.ie&&a.ie<11&&this.dom.isBlock(n)&&this.dom.isEmpty(n))return void(i?t.setStart(n,0):t.setEnd(n,0))}while(n=i?r.next():r.prev());"BODY"==o.nodeName&&(i?t.setStart(o,0):t.setEnd(o,o.childNodes.length))},destroy:function(){this.win=null,this.controlSelection.destroy()}},l}),/**
 * ElementUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/dom/ElementUtils",["tinymce/dom/BookmarkManager","tinymce/util/Tools"],function(e,t){function n(t){this.compare=function(n,o){function r(e){var n={};return i(t.getAttribs(e),function(i){var o=i.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&"data-mce-style"!==o&&(n[o]=t.getAttrib(e,o))}),n}function a(e,t){var n,i;for(i in e)if(e.hasOwnProperty(i)){if(n=t[i],"undefined"==typeof n)return!1;if(e[i]!=n)return!1;delete t[i]}for(i in t)if(t.hasOwnProperty(i))return!1;return!0}return n.nodeName!=o.nodeName?!1:a(r(n),r(o))&&a(t.parseStyle(t.getAttrib(n,"style")),t.parseStyle(t.getAttrib(o,"style")))?!e.isBookmarkNode(n)&&!e.isBookmarkNode(o):!1}}var i=t.each;return n}),/**
 * Preview.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/fmt/Preview",["tinymce/util/Tools"],function(e){function t(e,t){function i(e){return e.replace(/%(\w+)/g,"")}var o,r,a,s,l=e.dom,c="";if(s=e.settings.preview_styles,s===!1)return"";if(s||(s="font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),"string"==typeof t){if(t=e.formatter.get(t),!t)return;t=t[0]}return o=t.block||t.inline||"span",r=l.create(o),n(t.styles,function(e,t){e=i(e),e&&l.setStyle(r,t,e)}),n(t.attributes,function(e,t){e=i(e),e&&l.setAttrib(r,t,e)}),n(t.classes,function(e){e=i(e),l.hasClass(r,e)||l.addClass(r,e)}),e.fire("PreviewFormats"),l.setStyles(r,{position:"absolute",left:-65535}),e.getBody().appendChild(r),a=l.getStyle(e.getBody(),"fontSize",!0),a=/px$/.test(a)?parseInt(a,10):0,n(s.split(" "),function(t){var n=l.getStyle(r,t,!0);if(!("background-color"==t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(n)&&(n=l.getStyle(e.getBody(),t,!0),"#ffffff"==l.toHex(n).toLowerCase())||"color"==t&&"#000000"==l.toHex(n).toLowerCase())){if("font-size"==t&&/em|%$/.test(n)){if(0===a)return;n=parseFloat(n,10)/(/%$/.test(n)?100:1),n=n*a+"px"}"border"==t&&n&&(c+="padding:0 2px;"),c+=t+":"+n+";"}}),e.fire("AfterPreviewFormats"),l.remove(r),c}var n=e.each;return{getCssText:t}}),/**
 * Formatter.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/Formatter",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/dom/BookmarkManager","tinymce/dom/ElementUtils","tinymce/util/Tools","tinymce/fmt/Preview"],function(e,t,n,i,o,r){return function(a){function s(e){return e.nodeType&&(e=e.nodeName),!!a.schema.getTextBlockElements()[e.toLowerCase()]}function l(e,t){return Y.getParents(e,t,Y.getRoot())}function c(e){return 1===e.nodeType&&"_mce_caret"===e.id}function u(){h({valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){ae(n,function(t,n){Y.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike,sub,sup,dfn,code,samp,kbd,var,cite,mark,q",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),ae("p h1 h2 h3 h4 h5 h6 div address pre div dt dd samp".split(/\s/),function(e){h(e,{block:e,remove:"all"})}),h(a.settings.formats)}function d(){a.addShortcut("ctrl+b","bold_desc","Bold"),a.addShortcut("ctrl+i","italic_desc","Italic"),a.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)a.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);a.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),a.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),a.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function f(e){return e?q[e]:q}function h(e,t){e&&("string"!=typeof e?ae(e,function(e,t){h(t,e)}):(t=t.length?t:[t],ae(t,function(e){e.deep===U&&(e.deep=!e.selector),e.split===U&&(e.split=!e.selector||e.inline),e.remove===U&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),q[e]=t))}function p(e){return e&&q[e]&&delete q[e],q}function m(e){var t;return a.dom.getParent(e,function(e){return t=a.dom.getStyle(e,"text-decoration"),t&&"none"!==t}),t}function g(e){var t;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(t=m(e.parentNode),a.dom.getStyle(e,"color")&&t?a.dom.setStyle(e,"text-decoration",t):a.dom.getStyle(e,"textdecoration")===t&&a.dom.setStyle(e,"text-decoration",null))}function v(t,n,i){function o(e,t){if(t=t||p,e){if(t.onformat&&t.onformat(e,t,n,i),ae(t.styles,function(t,i){Y.setStyle(e,i,N(t,n))}),t.styles){var o=Y.getAttrib(e,"style");o&&e.setAttribute("data-mce-style",o)}ae(t.attributes,function(t,i){Y.setAttrib(e,i,N(t,n))}),ae(t.classes,function(t){t=N(t,n),Y.hasClass(e,t)||Y.addClass(e,t)})}}function r(){function t(t,n){var o=new e(n);for(i=o.current();i;i=o.prev())if(i.childNodes.length>1||i==t||"BR"==i.tagName)return i}var n=a.selection.getRng(),o=n.startContainer,r=n.endContainer;if(o!=r&&0===n.endOffset){var s=t(o,r),l=3==s.nodeType?s.length:s.childNodes.length;n.setEnd(s,l)}return n}function l(e,i,r){var a,l,u=[],d=!0;a=p.inline||p.block,l=Y.create(a),o(l),K.walk(e,function(e){function i(e){var g,v,y,b,w;return w=d,g=e.nodeName.toLowerCase(),v=e.parentNode.nodeName.toLowerCase(),1===e.nodeType&&oe(e)&&(w=d,d="true"===oe(e),b=!0),E(g,"br")?(f=0,void(p.block&&Y.remove(e))):p.wrapper&&x(e,t,n)?void(f=0):d&&!b&&p.block&&!p.wrapper&&s(g)&&G(v,a)?(e=Y.rename(e,a),o(e),u.push(e),void(f=0)):p.selector&&(ae(h,function(t){"collapsed"in t&&t.collapsed!==m||Y.is(e,t.selector)&&!c(e)&&(o(e,t),y=!0)}),!p.inline||y)?void(f=0):void(!d||b||!G(a,g)||!G(v,a)||!r&&3===e.nodeType&&1===e.nodeValue.length&&65279===e.nodeValue.charCodeAt(0)||c(e)||p.inline&&Q(e)?(f=0,ae(se(e.childNodes),i),b&&(d=w),f=0):(f||(f=Y.clone(l,ne),e.parentNode.insertBefore(f,e),u.push(f)),f.appendChild(e)))}var f;ae(e,i)}),p.links===!0&&ae(u,function(e){function t(e){"A"===e.nodeName&&o(e,p),ae(se(e.childNodes),t)}t(e)}),ae(u,function(e){function i(e){var t=0;return ae(e.childNodes,function(e){R(e)||re(e)||t++}),t}function r(e){var t,n;return ae(e.childNodes,function(e){return 1!=e.nodeType||re(e)||c(e)?void 0:(t=e,ne)}),t&&!re(t)&&$(t,p)&&(n=Y.clone(t,ne),o(n),Y.replace(n,e,ie),Y.remove(t,1)),n||e}var a;if(a=i(e),(u.length>1||!Q(e))&&0===a)return void Y.remove(e,1);if(p.inline||p.wrapper){if(p.exact||1!==a||(e=r(e)),ae(h,function(t){ae(Y.select(t.inline,e),function(e){re(e)||P(t,n,e,t.exact?e:null)})}),x(e.parentNode,t,n))return Y.remove(e,1),e=0,ie;p.merge_with_parents&&Y.getParent(e.parentNode,function(i){return x(i,t,n)?(Y.remove(e,1),e=0,ie):void 0}),e&&p.merge_siblings!==!1&&(e=I(B(e),e),e=I(e,B(e,ie)))}})}var u,d,h=f(t),p=h[0],m=!i&&X.isCollapsed();if(p)if(i)i.nodeType?(d=Y.createRng(),d.setStartBefore(i),d.setEndAfter(i),l(L(d,h),null,!0)):l(i,null,!0);else if(m&&p.inline&&!Y.select("td.mce-item-selected,th.mce-item-selected").length)H("apply",t,n);else{var y=a.selection.getNode();J||!h[0].defaultBlock||Y.getParent(y,Y.isBlock)||v(h[0].defaultBlock),a.selection.setRng(r()),u=X.getBookmark(),l(L(X.getRng(ie),h),u),p.styles&&(p.styles.color||p.styles.textDecoration)&&(le(y,g,"childNodes"),g(y)),X.moveToBookmark(u),z(X.getRng(ie)),a.nodeChanged()}}function y(e,t,n,i){function o(e){var n,i,r,a,s;if(1===e.nodeType&&oe(e)&&(a=y,y="true"===oe(e),s=!0),n=se(e.childNodes),y&&!s)for(i=0,r=g.length;r>i&&!P(g[i],t,e,e);i++);if(v.deep&&n.length){for(i=0,r=n.length;r>i;i++)o(n[i]);s&&(y=a)}}function r(n){var o;return ae(l(n.parentNode).reverse(),function(n){var r;o||"_start"==n.id||"_end"==n.id||(r=x(n,e,t,i),r&&r.split!==!1&&(o=n))}),o}function s(e,n,i,o){var r,a,s,l,c,u;if(e){for(u=e.parentNode,r=n.parentNode;r&&r!=u;r=r.parentNode){for(a=Y.clone(r,ne),c=0;c<g.length;c++)if(P(g[c],t,a,a)){a=0;break}a&&(s&&a.appendChild(s),l||(l=a),s=a)}!o||v.mixed&&Q(e)||(n=Y.split(e,n)),s&&(i.parentNode.insertBefore(s,i),l.appendChild(i))}return n}function c(e){return s(r(e),e,e,!0)}function u(e){var t=Y.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return re(n)&&(n=n[e?"firstChild":"lastChild"]),Y.remove(t,!0),n}function d(e){var t,n,i=e.commonAncestorContainer;e=L(e,g,ie),v.split&&(t=F(e,ie),n=F(e),t!=n?(/^(TR|TH|TD)$/.test(t.nodeName)&&t.firstChild&&(t="TR"==t.nodeName?t.firstChild.firstChild||t:t.firstChild||t),i&&/^T(HEAD|BODY|FOOT|R)$/.test(i.nodeName)&&/^(TH|TD)$/.test(n.nodeName)&&n.firstChild&&(n=n.firstChild||n),t=D(t,"span",{id:"_start","data-mce-type":"bookmark"}),n=D(n,"span",{id:"_end","data-mce-type":"bookmark"}),c(t),c(n),t=u(ie),n=u()):t=n=c(t),e.startContainer=t.parentNode,e.startOffset=Z(t),e.endContainer=n.parentNode,e.endOffset=Z(n)+1),K.walk(e,function(e){ae(e,function(e){o(e),1===e.nodeType&&"underline"===a.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===m(e.parentNode)&&P({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var h,p,g=f(e),v=g[0],y=!0;return n?void(n.nodeType?(p=Y.createRng(),p.setStartBefore(n),p.setEndAfter(n),d(p)):d(n)):void(X.isCollapsed()&&v.inline&&!Y.select("td.mce-item-selected,th.mce-item-selected").length?H("remove",e,t,i):(h=X.getBookmark(),d(X.getRng(ie)),X.moveToBookmark(h),v.inline&&w(e,t,X.getStart())&&z(X.getRng(!0)),a.nodeChanged()))}function b(e,t,n){var i=f(e);!w(e,t,n)||"toggle"in i[0]&&!i[0].toggle?v(e,t,n):y(e,t,n)}function x(e,t,n,i){function o(e,t,o){var r,a,s,l=t[o];if(t.onmatch)return t.onmatch(e,t,o);if(l)if(l.length===U){for(r in l)if(l.hasOwnProperty(r)){if(a="attributes"===o?Y.getAttrib(e,r):_(e,r),i&&!a&&!t.exact)return;if((!i||t.exact)&&!E(a,A(N(l[r],n),r)))return}}else for(s=0;s<l.length;s++)if("attributes"===o?Y.getAttrib(e,l[s]):_(e,l[s]))return t;return t}var r,a,s,l=f(t);if(l&&e)for(a=0;a<l.length;a++)if(r=l[a],$(e,r)&&o(e,r,"attributes")&&o(e,r,"styles")){if(s=r.classes)for(a=0;a<s.length;a++)if(!Y.hasClass(e,s[a]))return;return r}}function w(e,t,n){function i(n){var i=Y.getRoot();return n===i?!1:(n=Y.getParent(n,function(n){return n.parentNode===i||!!x(n,e,t,!0)}),x(n,e,t))}var o;return n?i(n):(n=X.getNode(),i(n)?ie:(o=X.getStart(),o!=n&&i(o)?ie:ne))}function C(e,t){var n,i=[],o={};return n=X.getStart(),Y.getParent(n,function(n){var r,a;for(r=0;r<e.length;r++)a=e[r],!o[a]&&x(n,a,t)&&(o[a]=!0,i.push(a))},Y.getRoot()),i}function k(e){var t,n,i,o,r,a=f(e);if(a)for(t=X.getStart(),n=l(t),o=a.length-1;o>=0;o--){if(r=a[o].selector,!r||a[o].defaultBlock)return ie;for(i=n.length-1;i>=0;i--)if(Y.is(n[i],r))return ie}return ne}function S(e,t,n){var i;return W||(W={},i={},a.on("NodeChange",function(e){var t=l(e.element),n={};t=o.grep(t,function(e){return 1==e.nodeType&&!e.getAttribute("data-mce-bogus")}),ae(W,function(e,o){ae(t,function(r){return x(r,o,{},e.similar)?(i[o]||(ae(e,function(e){e(!0,{node:r,format:o,parents:t})}),i[o]=e),n[o]=e,!1):void 0})}),ae(i,function(o,r){n[r]||(delete i[r],ae(o,function(n){n(!1,{node:e.element,format:r,parents:t})}))})})),ae(e.split(","),function(e){W[e]||(W[e]=[],W[e].similar=n),W[e].push(t)}),this}function T(e){return r.getCssText(a,e)}function $(e,t){return E(e,t.inline)?ie:E(e,t.block)?ie:t.selector?1==e.nodeType&&Y.is(e,t.selector):void 0}function E(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function _(e,t){return A(Y.getStyle(e,t),t)}function A(e,t){return("color"==t||"backgroundColor"==t)&&(e=Y.toHex(e)),"fontWeight"==t&&700==e&&(e="bold"),"fontFamily"==t&&(e=e.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),""+e}function N(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function R(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function D(e,t,n){var i=Y.create(t,n);return e.parentNode.insertBefore(i,e),i.appendChild(e),i}function L(t,n,i){function o(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var i,o,r,a,s;if(i=o=e?g:y,a=e?"previousSibling":"nextSibling",s=Y.getRoot(),3==i.nodeType&&!R(i)&&(e?v>0:b<i.nodeValue.length))return i;for(;;){if(!n[0].block_expand&&Q(o))return o;for(r=o[a];r;r=r[a])if(!re(r)&&!R(r)&&!t(r))return o;if(o.parentNode==s){i=o;break}o=o.parentNode}return i}function r(e,t){for(t===U&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)e=e.childNodes[t],e&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function c(e){for(var t=e;t;){if(1===t.nodeType&&oe(t))return"false"===oe(t)?t:e;t=t.parentNode}return e}function u(t,n,o){function r(e,t){var n,r,a=e.nodeValue;return"undefined"==typeof t&&(t=o?a.length:0),o?(n=a.lastIndexOf(" ",t),r=a.lastIndexOf(" ",t),n=n>r?n:r,-1===n||i||n++):(n=a.indexOf(" ",t),r=a.indexOf(" ",t),n=-1!==n&&(-1===r||r>n)?n:r),n}var s,l,c,u;if(3===t.nodeType){if(c=r(t,n),-1!==c)return{container:t,offset:c};u=t}for(s=new e(t,Y.getParent(t,Q)||a.getBody());l=s[o?"prev":"next"]();)if(3===l.nodeType){if(u=l,c=r(l),-1!==c)return{container:l,offset:c}}else if(Q(l))break;return u?(n=o?0:u.length,{container:u,offset:n}):void 0}function d(e,i){var o,r,a,s;for(3==e.nodeType&&0===e.nodeValue.length&&e[i]&&(e=e[i]),o=l(e),r=0;r<o.length;r++)for(a=0;a<n.length;a++)if(s=n[a],!("collapsed"in s&&s.collapsed!==t.collapsed)&&Y.is(o[r],s.selector))return o[r];return e}function f(e,t){var i,o=Y.getRoot();if(n[0].wrapper||(i=Y.getParent(e,n[0].block,o)),i||(i=Y.getParent(3==e.nodeType?e.parentNode:e,function(e){return e!=o&&s(e)})),i&&n[0].wrapper&&(i=l(i,"ul,ol").reverse()[0]||i),!i)for(i=e;i[t]&&!Q(i[t])&&(i=i[t],!E(i,"br")););return i||e}var h,p,m,g=t.startContainer,v=t.startOffset,y=t.endContainer,b=t.endOffset;if(1==g.nodeType&&g.hasChildNodes()&&(h=g.childNodes.length-1,g=g.childNodes[v>h?h:v],3==g.nodeType&&(v=0)),1==y.nodeType&&y.hasChildNodes()&&(h=y.childNodes.length-1,y=y.childNodes[b>h?h:b-1],3==y.nodeType&&(b=y.nodeValue.length)),g=c(g),y=c(y),(re(g.parentNode)||re(g))&&(g=re(g)?g:g.parentNode,g=g.nextSibling||g,3==g.nodeType&&(v=0)),(re(y.parentNode)||re(y))&&(y=re(y)?y:y.parentNode,y=y.previousSibling||y,3==y.nodeType&&(b=y.length)),n[0].inline&&(t.collapsed&&(m=u(g,v,!0),m&&(g=m.container,v=m.offset),m=u(y,b),m&&(y=m.container,b=m.offset)),p=r(y,b),p.node)){for(;p.node&&0===p.offset&&p.node.previousSibling;)p=r(p.node.previousSibling);p.node&&p.offset>0&&3===p.node.nodeType&&" "===p.node.nodeValue.charAt(p.offset-1)&&p.offset>1&&(y=p.node,y.splitText(p.offset-1))}return(n[0].inline||n[0].block_expand)&&(n[0].inline&&3==g.nodeType&&0!==v||(g=o(!0)),n[0].inline&&3==y.nodeType&&b!==y.nodeValue.length||(y=o())),n[0].selector&&n[0].expand!==ne&&!n[0].inline&&(g=d(g,"previousSibling"),y=d(y,"nextSibling")),(n[0].block||n[0].selector)&&(g=f(g,"previousSibling"),y=f(y,"nextSibling"),n[0].block&&(Q(g)||(g=o(!0)),Q(y)||(y=o()))),1==g.nodeType&&(v=Z(g),g=g.parentNode),1==y.nodeType&&(b=Z(y)+1,y=y.parentNode),{startContainer:g,startOffset:v,endContainer:y,endOffset:b}}function M(e,t){return t.links&&"A"==e.tagName}function P(e,t,n,i){var o,r,a;if(!$(n,e)&&!M(n,e))return ne;if("all"!=e.remove)for(ae(e.styles,function(o,r){o=A(N(o,t),r),"number"==typeof r&&(r=o,i=0),(e.remove_similar||!i||E(_(i,r),o))&&Y.setStyle(n,r,""),a=1}),a&&""===Y.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),ae(e.attributes,function(e,o){var r;if(e=N(e,t),"number"==typeof o&&(o=e,i=0),!i||E(Y.getAttrib(i,o),e)){if("class"==o&&(e=Y.getAttrib(n,o),e&&(r="",ae(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(r+=(r?" ":"")+e)}),r)))return void Y.setAttrib(n,o,r);"class"==o&&n.removeAttribute("className"),te.test(o)&&n.removeAttribute("data-mce-"+o),n.removeAttribute(o)}}),ae(e.classes,function(e){e=N(e,t),(!i||Y.hasClass(i,e))&&Y.removeClass(n,e)}),r=Y.getAttribs(n),o=0;o<r.length;o++)if(0!==r[o].nodeName.indexOf("_"))return ne;return"none"!=e.remove?(O(n,e),ie):void 0}function O(e,t){function n(e,t,n){return e=B(e,t,n),!e||"BR"==e.nodeName||Q(e)}var i,o=e.parentNode;t.block&&(J?o==Y.getRoot()&&(t.list_block&&E(e,t.list_block)||ae(se(e.childNodes),function(e){G(J,e.nodeName.toLowerCase())?i?i.appendChild(e):(i=D(e,J),Y.setAttribs(i,a.settings.forced_root_block_attrs)):i=0})):Q(e)&&!Q(o)&&(n(e,ne)||n(e.firstChild,ie,1)||e.insertBefore(Y.create("br"),e.firstChild),n(e,ie)||n(e.lastChild,ne,1)||e.appendChild(Y.create("br")))),t.selector&&t.inline&&!E(t.inline,e)||Y.remove(e,1)}function B(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!R(e))return e}function I(e,t){function n(e,t){for(o=e;o;o=o[t]){if(3==o.nodeType&&0!==o.nodeValue.length)return e;if(1==o.nodeType&&!re(o))return o}return e}var o,r,a=new i(Y);if(e&&t&&(e=n(e,"previousSibling"),t=n(t,"nextSibling"),a.compare(e,t))){for(o=e.nextSibling;o&&o!=t;)r=o,o=o.nextSibling,e.appendChild(r);return Y.remove(t),ae(se(t.childNodes),function(t){e.appendChild(t)}),e}return t}function F(t,n){var i,o,r;return i=t[n?"startContainer":"endContainer"],o=t[n?"startOffset":"endOffset"],1==i.nodeType&&(r=i.childNodes.length-1,!n&&o&&o--,i=i.childNodes[o>r?r:o]),3===i.nodeType&&n&&o>=i.nodeValue.length&&(i=new e(i,a.getBody()).next()||i),3!==i.nodeType||n||0!==o||(i=new e(i,a.getBody()).prev()||i),i}function H(t,n,i,o){function r(e){var t=Y.create("span",{id:g,"data-mce-bogus":!0,style:b?"color:red":""});return e&&t.appendChild(a.getDoc().createTextNode(ee)),t}function l(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==ee||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function c(e){for(;e;){if(e.id===g)return e;e=e.parentNode}}function u(t){var n;if(t)for(n=new e(t,t),t=n.current();t;t=n.next())if(3===t.nodeType)return t}function d(e,t){var n,i;if(e)i=X.getRng(!0),l(e)?(t!==!1&&(i.setStartBefore(e),i.setEndBefore(e)),Y.remove(e)):(n=u(e),n.nodeValue.charAt(0)===ee&&(n.deleteData(0,1),i.startContainer==n&&i.startOffset>0&&i.setStart(n,i.startOffset-1),i.endContainer==n&&i.endOffset>0&&i.setEnd(n,i.endOffset-1)),Y.remove(e,1)),X.setRng(i);else if(e=c(X.getStart()),!e)for(;e=Y.get(g);)d(e,!1)}function h(){var e,t,o,a,s,l,d;e=X.getRng(!0),a=e.startOffset,l=e.startContainer,d=l.nodeValue,t=c(X.getStart()),t&&(o=u(t)),d&&a>0&&a<d.length&&/\w/.test(d.charAt(a))&&/\w/.test(d.charAt(a-1))?(s=X.getBookmark(),e.collapse(!0),e=L(e,f(n)),e=K.split(e),v(n,i,e),X.moveToBookmark(s)):(t&&o.nodeValue===ee?v(n,i,t):(t=r(!0),o=t.firstChild,e.insertNode(t),a=1,v(n,i,t)),X.setCursorLocation(o,a))}function p(){var e,t,a,l,c,u,d,h,p=X.getRng(!0),m=[];for(e=p.startContainer,t=p.startOffset,c=e,3==e.nodeType&&(t!=e.nodeValue.length&&(l=!0),c=c.parentNode);c;){if(x(c,n,i,o)){u=c;break}c.nextSibling&&(l=!0),m.push(c),c=c.parentNode}if(u)if(l)a=X.getBookmark(),p.collapse(!0),p=L(p,f(n),!0),p=K.split(p),y(n,i,p),X.moveToBookmark(a);else{for(h=r(),c=h,d=m.length-1;d>=0;d--)c.appendChild(Y.clone(m[d],!1)),c=c.firstChild;c.appendChild(Y.doc.createTextNode(ee)),c=c.firstChild;var g=Y.getParent(u,s);g&&Y.isEmpty(g)?u.parentNode.replaceChild(h,u):Y.insertAfter(h,u),X.setCursorLocation(c,1),Y.isEmpty(u)&&Y.remove(u)}}function m(){var e;e=c(X.getStart()),e&&!Y.isEmpty(e)&&le(e,function(e){1!=e.nodeType||e.id===g||Y.isEmpty(e)||Y.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var g="_mce_caret",b=a.settings.caret_debug;a._hasCaretEvents||(V=function(){var e,t=[];if(l(c(X.getStart()),t))for(e=t.length;e--;)Y.setAttrib(t[e],"data-mce-bogus","1")},j=function(e){var t=e.keyCode;d(),(8==t||37==t||39==t)&&d(c(X.getStart())),m()},a.on("SetContent",function(e){e.selection&&m()}),a._hasCaretEvents=!0),"apply"==t?h():p()}function z(t){var n,i,o,r,a,s=t.startContainer,l=t.startOffset;if(3==s.nodeType&&l>=s.nodeValue.length&&(l=Z(s),s=s.parentNode,n=!0),1==s.nodeType)for(r=s.childNodes,s=r[Math.min(l,r.length-1)],i=new e(s,Y.getParent(s,Y.isBlock)),(l>r.length-1||n)&&i.next(),o=i.current();o;o=i.next())if(3==o.nodeType&&!R(o))return a=Y.create("a",{"data-mce-bogus":"all"},ee),o.parentNode.insertBefore(a,o),t.setStart(o,0),X.setRng(t),void Y.remove(a)}var W,U,j,V,q={},Y=a.dom,X=a.selection,K=new t(Y),G=a.schema.isValidChild,Q=Y.isBlock,J=a.settings.forced_root_block,Z=Y.nodeIndex,ee="\ufeff",te=/^(src|href|style)$/,ne=!1,ie=!0,oe=Y.getContentEditable,re=n.isBookmarkNode,ae=o.each,se=o.grep,le=o.walk,ce=o.extend;ce(this,{get:f,register:h,unregister:p,apply:v,remove:y,toggle:b,match:w,matchAll:C,matchNode:x,canApply:k,formatChanged:S,getCssText:T}),u(),d(),a.on("BeforeGetContent",function(e){V&&"raw"!=e.format&&V()}),a.on("mouseup keydown",function(e){j&&j(e)})}}),/**
 * UndoManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/UndoManager",["tinymce/Env","tinymce/util/Tools","tinymce/html/SaxParser"],function(e,t,n){var i,o=t.trim;return i=new RegExp(["<span[^>]+data-mce-bogus[^>]+>[​\ufeff]+<\\/span>",'\\s?data-mce-selected="[^"]+"'].join("|"),"gi"),function(t){function r(){var e,r,a,s,l,c=t.getContent({format:"raw",no_events:1}),u=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,d=t.schema;for(c=c.replace(i,""),l=d.getShortEndedElements();s=u.exec(c);)r=u.lastIndex,a=s[0].length,e=l[s[1]]?r:n.findEndTag(d,c,r),c=c.substring(0,r-a)+c.substring(e),u.lastIndex=r-a;return o(c)}function a(e){c.typing=!1,c.add({},e)}var s,l,c=this,u=0,d=[],f=0;return t.on("init",function(){c.add()}),t.on("BeforeExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&c.beforeChange()}),t.on("ExecCommand",function(e){var t=e.command;"Undo"!=t&&"Redo"!=t&&"mceRepaint"!=t&&a(e)}),t.on("ObjectResizeStart",function(){c.beforeChange()}),t.on("SaveContent ObjectResized blur",a),t.on("DragEnd",a),t.on("KeyUp",function(n){var i=n.keyCode;(i>=33&&36>=i||i>=37&&40>=i||45==i||13==i||n.ctrlKey)&&(a(),t.nodeChanged()),(46==i||8==i||e.mac&&(91==i||93==i))&&t.nodeChanged(),l&&c.typing&&(t.isDirty()||(t.isNotDirty=!d[0]||r()==d[0].content,t.isNotDirty||t.fire("change",{level:d[0],lastLevel:null})),t.fire("TypingUndo"),l=!1,t.nodeChanged())}),t.on("KeyDown",function(e){var t=e.keyCode;return t>=33&&36>=t||t>=37&&40>=t||45==t?void(c.typing&&a(e)):void((16>t||t>20)&&224!=t&&91!=t&&!c.typing&&(c.beforeChange(),c.typing=!0,c.add({},e),l=!0))}),t.on("MouseDown",function(e){c.typing&&a(e)}),t.addShortcut("ctrl+z","","Undo"),t.addShortcut("ctrl+y,ctrl+shift+z","","Redo"),t.on("AddUndo Undo Redo ClearUndos",function(e){e.isDefaultPrevented()||t.nodeChanged()}),c={data:d,typing:!1,beforeChange:function(){f||(s=t.selection.getBookmark(2,!0))},add:function(e,n){var i,o,a=t.settings;if(e=e||{},e.content=r(),f||t.removed)return null;if(o=d[u],t.fire("BeforeAddUndo",{level:e,lastLevel:o,originalEvent:n}).isDefaultPrevented())return null;if(o&&o.content==e.content)return null;if(d[u]&&(d[u].beforeBookmark=s),a.custom_undo_redo_levels&&d.length>a.custom_undo_redo_levels){for(i=0;i<d.length-1;i++)d[i]=d[i+1];d.length--,u=d.length}e.bookmark=t.selection.getBookmark(2,!0),u<d.length-1&&(d.length=u+1),d.push(e),u=d.length-1;var l={level:e,lastLevel:o,originalEvent:n};return t.fire("AddUndo",l),u>0&&(t.isNotDirty=!1,t.fire("change",l)),e},undo:function(){var e;return c.typing&&(c.add(),c.typing=!1),u>0&&(e=d[--u],0===u&&(t.isNotDirty=!0),t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.beforeBookmark),t.fire("undo",{level:e})),e},redo:function(){var e;return u<d.length-1&&(e=d[++u],t.setContent(e.content,{format:"raw"}),t.selection.moveToBookmark(e.bookmark),t.fire("redo",{level:e})),e},clear:function(){d=[],u=0,c.typing=!1,t.fire("ClearUndos")},hasUndo:function(){return u>0||c.typing&&d[0]&&r()!=d[0].content},hasRedo:function(){return u<d.length-1&&!this.typing},transact:function(e){c.beforeChange();try{f++,e()}finally{f--}c.add()}}}}),/**
 * EnterKey.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/EnterKey",["tinymce/dom/TreeWalker","tinymce/dom/RangeUtils","tinymce/Env"],function(e,t,n){var i=n.ie&&n.ie<11;return function(o){function r(r){function f(e){return e&&a.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==a.getContentEditable(e)}function h(e){var t;a.isBlock(e)&&(t=s.getRng(),e.appendChild(a.create("span",null," ")),s.select(e),e.lastChild.outerHTML="",s.setRng(t))}function p(e){var t,n=e,i=[];if(n){for(;n=n.firstChild;){if(a.isBlock(n))return;1!=n.nodeType||d[n.nodeName.toLowerCase()]||i.push(n)}for(t=i.length;t--;)n=i[t],!n.hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?a.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&a.remove(n)}}function m(t){function i(e){for(;e;){if(1==e.nodeType||3==e.nodeType&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}}var o,r,l,c,u=t;if(t){if(n.ie&&n.ie<9&&N&&N.firstChild&&N.firstChild==N.lastChild&&"BR"==N.firstChild.tagName&&a.remove(N.firstChild),/^(LI|DT|DD)$/.test(t.nodeName)){var f=i(t.firstChild);f&&/^(UL|OL|DL)$/.test(f.nodeName)&&t.insertBefore(a.doc.createTextNode(" "),t.firstChild)}if(l=a.createRng(),n.ie||t.normalize(),t.hasChildNodes()){for(o=new e(t,t);r=o.current();){if(3==r.nodeType){l.setStart(r,0),l.setEnd(r,0);break}if(d[r.nodeName.toLowerCase()]){l.setStartBefore(r),l.setEndBefore(r);break}u=r,r=o.next()}r||(l.setStart(u,0),l.setEnd(u,0))}else"BR"==t.nodeName?t.nextSibling&&a.isBlock(t.nextSibling)?((!R||9>R)&&(c=a.create("br"),t.parentNode.insertBefore(c,t)),l.setStartBefore(t),l.setEndBefore(t)):(l.setStartAfter(t),l.setEndAfter(t)):(l.setStart(t,0),l.setEnd(t,0));s.setRng(l),a.remove(c),s.scrollIntoView(t)}}function g(e){var t=l.forced_root_block;t&&t.toLowerCase()===e.tagName.toLowerCase()&&a.setAttribs(e,l.forced_root_block_attrs)}function v(e){var t,n,o,r=_,s=u.getTextInlineElements();if(e||"TABLE"==O?(t=a.create(e||I),g(t)):t=N.cloneNode(!1),o=t,l.keep_styles!==!1)do if(s[r.nodeName]){if("_mce_caret"==r.id)continue;n=r.cloneNode(!1),a.setAttrib(n,"id",""),t.hasChildNodes()?(n.appendChild(t.firstChild),t.appendChild(n)):(o=n,t.appendChild(n))}while(r=r.parentNode);return i||(o.innerHTML='<br data-mce-bogus="1">'),t}function y(t){var n,i,o;if(3==_.nodeType&&(t?A>0:A<_.nodeValue.length))return!1;if(_.parentNode==N&&F&&!t)return!0;if(t&&1==_.nodeType&&_==N.firstChild)return!0;if("TABLE"===_.nodeName||_.previousSibling&&"TABLE"==_.previousSibling.nodeName)return F&&!t||!F&&t;for(n=new e(_,N),3==_.nodeType&&(t&&0===A?n.prev():t||A!=_.nodeValue.length||n.next());i=n.current();){if(1===i.nodeType){if(!i.getAttribute("data-mce-bogus")&&(o=i.nodeName.toLowerCase(),d[o]&&"br"!==o))return!1}else if(3===i.nodeType&&!/^[ \t\r\n]*$/.test(i.nodeValue))return!1;t?n.prev():n.next()}return!0}function b(e,t){var n,i,r,s,l,c,d=I||"P";if(i=a.getParent(e,a.isBlock),c=o.getBody().nodeName.toLowerCase(),!i||!f(i)){if(i=i||E,!i.hasChildNodes())return n=a.create(d),g(n),i.appendChild(n),T.setStart(n,0),T.setEnd(n,0),n;for(s=e;s.parentNode!=i;)s=s.parentNode;for(;s&&!a.isBlock(s);)r=s,s=s.previousSibling;if(r&&u.isValidChild(c,d.toLowerCase())){for(n=a.create(d),g(n),r.parentNode.insertBefore(n,r),s=r;s&&!a.isBlock(s);)l=s.nextSibling,n.appendChild(s),s=l;T.setStart(e,t),T.setEnd(e,t)}}return e}function x(){function e(e){for(var t=P[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===N}function t(){var e=P.parentNode;return/^(LI|DT|DD)$/.test(e.nodeName)?e:P}var n=P.parentNode.nodeName;/^(OL|UL|LI)$/.test(n)&&(I="LI"),L=I?v(I):a.create("BR"),e(!0)&&e()?"LI"==n?a.insertAfter(L,t()):a.replace(L,P):e(!0)?"LI"==n?(a.insertAfter(L,t()),L.appendChild(a.doc.createTextNode(" ")),L.appendChild(P)):P.parentNode.insertBefore(L,P):e()?(a.insertAfter(L,t()),h(L)):(P=t(),$=T.cloneRange(),$.setStartAfter(N),$.setEndAfter(P),M=$.extractContents(),"LI"==I&&"LI"==M.firstChild.nodeName?(L=M.firstChild,a.insertAfter(M,P)):(a.insertAfter(M,P),a.insertAfter(L,P))),a.remove(N),m(L),c.add()}function w(){o.execCommand("InsertLineBreak",!1,r)}function C(e){do 3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild;while(e)}function k(e){var t,n,i=a.getRoot();for(t=e;t!==i&&"false"!==a.getContentEditable(t);)"true"===a.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==i?n:i}function S(e){var t;i||(e.normalize(),t=e.lastChild,(!t||/^(left|right)$/gi.test(a.getStyle(t,"float",!0)))&&a.add(e,"br"))}var T,$,E,_,A,N,R,D,L,M,P,O,B,I,F;if(T=s.getRng(!0),!r.isDefaultPrevented()){if(!T.collapsed)return void o.execCommand("Delete");if(new t(a).normalize(T),_=T.startContainer,A=T.startOffset,I=(l.force_p_newlines?"p":"")||l.forced_root_block,I=I?I.toUpperCase():"",R=a.doc.documentMode,D=r.shiftKey,1==_.nodeType&&_.hasChildNodes()&&(F=A>_.childNodes.length-1,_=_.childNodes[Math.min(A,_.childNodes.length-1)]||_,A=F&&3==_.nodeType?_.nodeValue.length:0),E=k(_)){if(c.beforeChange(),!a.isBlock(E)&&E!=a.getRoot())return void((!I||D)&&w());if((I&&!D||!I&&D)&&(_=b(_,A)),N=a.getParent(_,a.isBlock),P=N?a.getParent(N.parentNode,a.isBlock):null,O=N?N.nodeName.toUpperCase():"",B=P?P.nodeName.toUpperCase():"","LI"!=B||r.ctrlKey||(N=P,O=B),/^(LI|DT|DD)$/.test(O)){if(!I&&D)return void w();if(a.isEmpty(N))return void x()}if("PRE"==O&&l.br_in_pre!==!1){if(!D)return void w()}else if(!I&&!D&&"LI"!=O||I&&D)return void w();I&&N===o.getBody()||(I=I||"P",y()?(L=/^(H[1-6]|PRE|FIGURE)$/.test(O)&&"HGROUP"!=B?v(I):v(),l.end_container_on_empty_block&&f(P)&&a.isEmpty(N)?L=a.split(P,N):a.insertAfter(L,N),m(L)):y(!0)?(L=N.parentNode.insertBefore(v(),N),h(L),m(N)):($=T.cloneRange(),$.setEndAfter(N),M=$.extractContents(),C(M),L=M.firstChild,a.insertAfter(M,N),p(L),S(N),m(L)),a.setAttrib(L,"id",""),o.fire("NewBlock",{newBlock:L}),c.add())}}}var a=o.dom,s=o.selection,l=o.settings,c=o.undoManager,u=o.schema,d=u.getNonEmptyElements();o.on("keydown",function(e){13==e.keyCode&&r(e)!==!1&&e.preventDefault()})}}),/**
 * ForceBlocks.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ForceBlocks",[],function(){return function(e){function t(){var t,s,l,c,u,d,f,h,p,m,g,v,y=o.getStart(),b=e.getBody(),x=-16777215;if(v=n.forced_root_block,y&&1===y.nodeType&&v){for(;y&&y!=b;){if(a[y.nodeName])return;y=y.parentNode}if(t=o.getRng(),t.setStart){s=t.startContainer,l=t.startOffset,c=t.endContainer,u=t.endOffset;try{p=e.getDoc().activeElement===b}catch(w){}}else t.item&&(y=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(y)),p=t.parentElement().ownerDocument===e.getDoc(),m=t.duplicate(),m.collapse(!0),l=-1*m.move("character",x),m.collapsed||(m=t.duplicate(),m.collapse(!1),u=-1*m.move("character",x)-l);for(y=b.firstChild,g=b.nodeName.toLowerCase();y;)if((3===y.nodeType||1==y.nodeType&&!a[y.nodeName])&&r.isValidChild(g,v.toLowerCase())){if(3===y.nodeType&&0===y.nodeValue.length){f=y,y=y.nextSibling,i.remove(f);continue}d||(d=i.create(v,e.settings.forced_root_block_attrs),y.parentNode.insertBefore(d,y),h=!0),f=y,y=y.nextSibling,d.appendChild(f)}else d=null,y=y.nextSibling;if(h&&p){if(t.setStart)t.setStart(s,l),t.setEnd(c,u),o.setRng(t);else try{t=e.getDoc().body.createTextRange(),t.moveToElementText(b),t.collapse(!0),t.moveStart("character",l),u>0&&t.moveEnd("character",u),t.select()}catch(w){}e.nodeChanged()}}}var n=e.settings,i=e.dom,o=e.selection,r=e.schema,a=r.getBlockElements();n.forced_root_block&&e.on("NodeChange",t)}}),/**
 * EditorCommands.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/EditorCommands",["tinymce/html/Serializer","tinymce/Env","tinymce/util/Tools","tinymce/dom/ElementUtils","tinymce/dom/RangeUtils","tinymce/dom/TreeWalker"],function(e,n,i,o,r,a){var s=i.each,l=i.extend,c=i.map,u=i.inArray,d=i.explode,f=n.gecko,h=n.ie,p=n.ie&&n.ie<11,m=!0,g=!1;return function(i){function v(e,t,n){var i;return e=e.toLowerCase(),(i=A.exec[e])?(i(e,t,n),m):g}function y(e){var t;return e=e.toLowerCase(),(t=A.state[e])?t(e):-1}function b(e){var t;return e=e.toLowerCase(),(t=A.value[e])?t(e):g}function x(e,t){t=t||"exec",s(e,function(e,n){s(n.toLowerCase().split(","),function(n){A[t][n]=e})})}function w(e,n,o){return n===t&&(n=g),o===t&&(o=null),i.getDoc().execCommand(e,n,o)}function C(e){return R.match(e)}function k(e,n){R.toggle(e,n?{value:n}:t),i.nodeChanged()}function S(e){$=_.getBookmark(e)}function T(){_.moveToBookmark($)}var $,E=i.dom,_=i.selection,A={state:{},exec:{},value:{}},N=i.settings,R=i.formatter;l(this,{execCommand:v,queryCommandState:y,queryCommandValue:b,addCommands:x}),x({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){i.undoManager.add()},"Cut,Copy,Paste":function(e){var t,o=i.getDoc();try{w(e)}catch(r){t=m}if(t||!o.queryCommandSupported(e)){var a=i.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");n.mac&&(a=a.replace(/Ctrl\+/g,"⌘+")),i.windowManager.alert(a)}},unlink:function(){if(_.isCollapsed()){var e=_.getNode();return void("A"==e.tagName&&i.dom.remove(e,!0))}R.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);"full"==t&&(t="justify"),s("left,center,right,justify".split(","),function(e){t!=e&&R.remove("align"+e)}),k("align"+t),v("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;w(e),t=E.getParent(_.getNode(),"ol,ul"),t&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(S(),E.split(n,t),T()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){k(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){k(e,n)},FontSize:function(e,t,n){var i,o;n>=1&&7>=n&&(o=d(N.font_size_style_values),i=d(N.font_size_classes),n=i?i[n-1]||n:o[n-1]||n),k(e,n)},RemoveFormat:function(e){R.remove(e)},mceBlockQuote:function(){k("blockquote")},FormatBlock:function(e,t,n){return k(n||"p")},mceCleanup:function(){var e=_.getBookmark();i.setContent(i.getContent({cleanup:m}),{cleanup:m}),_.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var o=n||_.getNode();o!=i.getBody()&&(S(),i.dom.remove(o,m),T())},mceSelectNodeDepth:function(e,t,n){var o=0;E.getParent(_.getNode(),function(e){return 1==e.nodeType&&o++==n?(_.select(e),g):void 0},i.getBody())},mceSelectNode:function(e,t,n){_.select(n)},mceInsertContent:function(t,n,r){function a(e){function t(e){return i[e]&&3==i[e].nodeType}var n,i,o;return n=_.getRng(!0),i=n.startContainer,o=n.startOffset,3==i.nodeType&&(o>0?e=e.replace(/^&nbsp;/," "):t("previousSibling")||(e=e.replace(/^ /,"&nbsp;")),o<i.length?e=e.replace(/&nbsp;(<br>|)$/," "):t("nextSibling")||(e=e.replace(/(&nbsp;| )(<br>|)$/,"&nbsp;"))),e}function l(e){if(C)for(b=e.firstChild;b;b=b.walk(!0))k[b.name]&&b.attr("data-mce-new","true")}function c(){if(C){var e=i.getBody(),t=new o(E);s(E.select("*[data-mce-new]"),function(n){n.removeAttribute("data-mce-new");for(var i=n.parentNode;i&&i!=e;i=i.parentNode)t.compare(i,n)&&E.remove(n,!0)})}}var u,d,f,p,m,g,v,y,b,x,w,C,k=i.schema.getTextInlineElements();"string"!=typeof r&&(C=r.merge,r=r.content),/^ | $/.test(r)&&(r=a(r)),u=i.parser,d=new e({},i.schema),w='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;&#x200B;</span>',g={content:r,format:"html",selection:!0},i.fire("BeforeSetContent",g),r=g.content,-1==r.indexOf("{$caret}")&&(r+="{$caret}"),r=r.replace(/\{\$caret\}/,w),y=_.getRng();var S=y.startContainer||(y.parentElement?y.parentElement():null),T=i.getBody();S===T&&_.isCollapsed()&&E.isBlock(T.firstChild)&&E.isEmpty(T.firstChild)&&(y=E.createRng(),y.setStart(T.firstChild,0),y.setEnd(T.firstChild,0),_.setRng(y)),_.isCollapsed()||i.getDoc().execCommand("Delete",!1,null),f=_.getNode();var $={context:f.nodeName.toLowerCase()};if(m=u.parse(r,$),l(m),b=m.lastChild,"mce_marker"==b.attr("id"))for(v=b,b=b.prev;b;b=b.walk(!0))if(3==b.type||!E.isBlock(b.name)){i.schema.isValidChild(b.parent.name,"span")&&b.parent.insert(v,b,"br"===b.name);break}if($.invalid){for(_.setContent(w),f=_.getNode(),p=i.getBody(),9==f.nodeType?f=b=p:b=f;b!==p;)f=b,b=b.parentNode;r=f==p?p.innerHTML:E.getOuterHTML(f),r=d.serialize(u.parse(r.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return d.serialize(m)}))),f==p?E.setHTML(p,r):E.setOuterHTML(f,r)}else r=d.serialize(m),b=f.firstChild,x=f.lastChild,!b||b===x&&"BR"===b.nodeName?E.setHTML(f,r):_.setContent(r);c(),v=E.get("mce_marker"),_.scrollIntoView(v),y=E.createRng(),b=v.previousSibling,b&&3==b.nodeType?(y.setStart(b,b.nodeValue.length),h||(x=v.nextSibling,x&&3==x.nodeType&&(b.appendData(x.data),x.parentNode.removeChild(x)))):(y.setStartBefore(v),y.setEndBefore(v)),E.remove(v),_.setRng(y),i.fire("SetContent",g),i.addVisual()},mceInsertRawHTML:function(e,t,n){_.setContent("tiny_mce_marker"),i.setContent(i.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){k(n)},mceSetContent:function(e,t,n){i.setContent(n)},"Indent,Outdent":function(e){var t,n,o;t=N.indentation,n=/[a-z%]+$/i.exec(t),t=parseInt(t,10),y("InsertUnorderedList")||y("InsertOrderedList")?w(e):(N.forced_root_block||E.getParent(_.getNode(),E.isBlock)||R.apply("div"),s(_.getSelectedBlocks(),function(r){if("LI"!=r.nodeName){var a=i.getParam("indent_use_margin",!1)?"margin":"padding";a+="rtl"==E.getStyle(r,"direction",!0)?"Right":"Left","outdent"==e?(o=Math.max(0,parseInt(r.style[a]||0,10)-t),E.setStyle(r,a,o?o+n:"")):(o=parseInt(r.style[a]||0,10)+t+n,E.setStyle(r,a,o))}}))},mceRepaint:function(){if(f)try{S(m),_.getSel()&&_.getSel().selectAllChildren(i.getBody()),_.collapse(m),T()}catch(e){}},InsertHorizontalRule:function(){i.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){i.hasVisual=!i.hasVisual,i.addVisual()},mceReplaceContent:function(e,t,n){i.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,_.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var i;"string"==typeof n&&(n={href:n}),i=E.getParent(_.getNode(),"a"),n.href=n.href.replace(" ","%20"),i&&n.href||R.remove("link"),n.href&&R.apply("link",n,i)},selectAll:function(){var e,t=E.getRoot();_.getRng().setStart?(e=E.createRng(),e.setStart(t,0),e.setEnd(t,t.childNodes.length),_.setRng(e)):(e=_.getRng(),e.item||(e.moveToElementText(t),e.select()))},"delete":function(){w("Delete");var e=i.getBody();E.isEmpty(e)&&(i.setContent(""),e.firstChild&&E.isBlock(e.firstChild)?i.selection.setCursorLocation(e.firstChild,0):i.selection.setCursorLocation(e,0))},mceNewDocument:function(){i.setContent("")},InsertLineBreak:function(e,t,n){function o(){for(var e,t=new a(h,v),n=i.schema.getNonEmptyElements();e=t.next();)if(n[e.nodeName.toLowerCase()]||e.length>0)return!0}var s,l,c,u=n,d=_.getRng(!0);new r(E).normalize(d);var f=d.startOffset,h=d.startContainer;if(1==h.nodeType&&h.hasChildNodes()){var g=f>h.childNodes.length-1;h=h.childNodes[Math.min(f,h.childNodes.length-1)]||h,f=g&&3==h.nodeType?h.nodeValue.length:0}var v=E.getParent(h,E.isBlock),y=v?v.nodeName.toUpperCase():"",b=v?E.getParent(v.parentNode,E.isBlock):null,x=b?b.nodeName.toUpperCase():"",w=u&&u.ctrlKey;"LI"!=x||w||(v=b,y=x),h&&3==h.nodeType&&f>=h.nodeValue.length&&(p||o()||(s=E.create("br"),d.insertNode(s),d.setStartAfter(s),d.setEndAfter(s),l=!0)),s=E.create("br"),d.insertNode(s);var C=E.doc.documentMode;return p&&"PRE"==y&&(!C||8>C)&&s.parentNode.insertBefore(E.doc.createTextNode("\r"),s),c=E.create("span",{},"&nbsp;"),s.parentNode.insertBefore(c,s),_.scrollIntoView(c),E.remove(c),l?(d.setStartBefore(s),d.setEndBefore(s)):(d.setStartAfter(s),d.setEndAfter(s)),_.setRng(d),i.undoManager.add(),m}}),x({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t="align"+e.substring(7),n=_.isCollapsed()?[E.getParent(_.getNode(),E.isBlock)]:_.getSelectedBlocks(),i=c(n,function(e){return!!R.matchNode(e,t)});return-1!==u(i,m)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return C(e)},mceBlockQuote:function(){return C("blockquote")},Outdent:function(){var e;if(N.inline_styles){if((e=E.getParent(_.getStart(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m;if((e=E.getParent(_.getEnd(),E.isBlock))&&parseInt(e.style.paddingLeft,10)>0)return m}return y("InsertUnorderedList")||y("InsertOrderedList")||!N.inline_styles&&!!E.getParent(_.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=E.getParent(_.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),x({"FontSize,FontName":function(e){var t,n=0;return(t=E.getParent(_.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),x({Undo:function(){i.undoManager.undo()},Redo:function(){i.undoManager.redo()}})}}),/**
 * URI.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/URI",["tinymce/util/Tools"],function(e){function t(e,r){var a,s,l=this;if(e=i(e),r=l.settings=r||{},a=r.base_uri,/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))return void(l.source=e);var c=0===e.indexOf("//");0!==e.indexOf("/")||c||(e=(a?a.protocol||"http":"http")+"://mce_host"+e),/^[\w\-]*:?\/\//.test(e)||(s=r.base_uri?r.base_uri.path:new t(location.href).directory,""===r.base_uri.protocol?e="//mce_host"+l.toAbsPath(s,e):(e=/([^#?]*)([#?]?.*)/.exec(e),e=(a&&a.protocol||"http")+"://mce_host"+l.toAbsPath(s,e[1])+e[2])),e=e.replace(/@@/g,"(mce_at)"),e=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e),n(o,function(t,n){var i=e[n];i&&(i=i.replace(/\(mce_at\)/g,"@@")),l[t]=i}),a&&(l.protocol||(l.protocol=a.protocol),l.userInfo||(l.userInfo=a.userInfo),l.port||"mce_host"!==l.host||(l.port=a.port),l.host&&"mce_host"!==l.host||(l.host=a.host),l.source=""),c&&(l.protocol="")}var n=e.each,i=e.trim,o="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),r={ftp:21,http:80,https:443,mailto:25};return t.prototype={setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var n,i=this;if("./"===e)return e;if(e=new t(e,{base_uri:i}),"mce_host"!=e.host&&i.host!=e.host&&e.host||i.port!=e.port||i.protocol!=e.protocol&&""!==e.protocol)return e.getURI();var o=i.getURI(),r=e.getURI();return o==r||"/"==o.charAt(o.length-1)&&o.substr(0,o.length-1)==r?o:(n=i.toRelPath(i.path,e.path),e.query&&(n+="?"+e.query),e.anchor&&(n+="#"+e.anchor),n)},toAbsolute:function(e,n){return e=new t(e,{base_uri:this}),e.getURI(n&&this.isSameOrigin(e))},isSameOrigin:function(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=r[this.protocol];if(t&&(this.port||t)==(e.port||t))return!0}return!1},toRelPath:function(e,t){var n,i,o,r=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(i=0,o=e.length;o>i;i++)if(i>=n.length||e[i]!=n[i]){r=i+1;break}if(e.length<n.length)for(i=0,o=n.length;o>i;i++)if(i>=e.length||e[i]!=n[i]){r=i+1;break}if(1===r)return t;for(i=0,o=e.length-(r-1);o>i;i++)a+="../";for(i=r-1,o=n.length;o>i;i++)a+=i!=r-1?"/"+n[i]:n[i];return a},toAbsPath:function(e,t){var i,o,r,a=0,s=[];for(o=/\/$/.test(t)?"/":"",e=e.split("/"),t=t.split("/"),n(e,function(e){e&&s.push(e)}),e=s,i=t.length-1,s=[];i>=0;i--)0!==t[i].length&&"."!==t[i]&&(".."!==t[i]?a>0?a--:s.push(t[i]):a++);return i=e.length-a,r=0>=i?s.reverse().join("/"):e.slice(0,i).join("/")+"/"+s.reverse().join("/"),0!==r.indexOf("/")&&(r="/"+r),o&&r.lastIndexOf("/")!==r.length-1&&(r+=o),r},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(t+=n.protocol?n.protocol+"://":"//",n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}},t}),/**
 * Class.js
 *
 * Copyright 2003-2012, Moxiecode Systems AB, All rights reserved.
 */
i("tinymce/util/Class",["tinymce/util/Tools"],function(e){function t(){}var n,i,o=e.each,r=e.extend;return t.extend=n=function(e){function t(){var e,t,n,o=this;if(!i&&(o.init&&o.init.apply(o,arguments),t=o.Mixins))for(e=t.length;e--;)n=t[e],n.init&&n.init.apply(o,arguments)}function a(){return this}function s(e,t){return function(){var n,i=this,o=i._super;return i._super=f[e],n=t.apply(i,arguments),i._super=o,n}}var l,c,u,d=this,f=d.prototype;i=!0,l=new d,i=!1,e.Mixins&&(o(e.Mixins,function(t){t=t;for(var n in t)"init"!==n&&(e[n]=t[n])}),f.Mixins&&(e.Mixins=f.Mixins.concat(e.Mixins))),e.Methods&&o(e.Methods.split(","),function(t){e[t]=a}),e.Properties&&o(e.Properties.split(","),function(t){var n="_"+t;e[t]=function(e){var t,i=this;return e!==t?(i[n]=e,i):i[n]}}),e.Statics&&o(e.Statics,function(e,n){t[n]=e}),e.Defaults&&f.Defaults&&(e.Defaults=r({},f.Defaults,e.Defaults));for(c in e)u=e[c],"function"==typeof u&&f[c]?l[c]=s(c,u):l[c]=u;return t.prototype=l,t.constructor=t,t.extend=n,t},t}),/**
 * EventDispatcher.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/EventDispatcher",["tinymce/util/Tools"],function(e){function t(e){function t(){return!1}function n(){return!0}function i(i,o){var a,s,c,u;if(i=i.toLowerCase(),o=o||{},o.type=i,o.target||(o.target=l),o.preventDefault||(o.preventDefault=function(){o.isDefaultPrevented=n},o.stopPropagation=function(){o.isPropagationStopped=n},o.stopImmediatePropagation=function(){o.isImmediatePropagationStopped=n},o.isDefaultPrevented=t,o.isPropagationStopped=t,o.isImmediatePropagationStopped=t),e.beforeFire&&e.beforeFire(o),a=d[i])for(s=0,c=a.length;c>s;s++){if(a[s]=u=a[s],u.once&&r(i,u),o.isImmediatePropagationStopped())return o.stopPropagation(),o;if(u.call(l,o)===!1)return o.preventDefault(),o}return o}function o(e,n,i){var o,r,a;if(n===!1&&(n=t),n)for(r=e.toLowerCase().split(" "),a=r.length;a--;)e=r[a],o=d[e],o||(o=d[e]=[],c(e,!0)),i?o.unshift(n):o.push(n);return u}function r(e,t){var n,i,o,r,a;if(e)for(r=e.toLowerCase().split(" "),n=r.length;n--;){if(e=r[n],i=d[e],!e){for(o in d)c(o,!1),delete d[o];return u}if(i){if(t)for(a=i.length;a--;)i[a]===t&&(i=i.slice(0,a).concat(i.slice(a+1)),d[e]=i);else i.length=0;i.length||(c(e,!1),delete d[e])}}else{for(e in d)c(e,!1);d={}}return u}function a(e,t,n){return t.once=!0,o(e,t,n)}function s(e){return e=e.toLowerCase(),!(!d[e]||0===d[e].length)}var l,c,u=this,d={};e=e||{},l=e.scope||u,c=e.toggleEvent||t,u.fire=i,u.on=o,u.off=r,u.once=a,u.has=s}var n=e.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchend"," ");return t.isNative=function(e){return!!n[e.toLowerCase()]},t}),/**
 * Selector.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Selector",["tinymce/util/Class"],function(e){function t(e){for(var t,n=[],i=e.length;i--;)t=e[i],t.__checked||(n.push(t),t.__checked=1);for(i=n.length;i--;)delete n[i].__checked;return n}var n,i=/^([\w\\*]+)?(?:#([\w\\]+))?(?:\.([\w\\\.]+))?(?:\[\@?([\w\\]+)([\^\$\*!~]?=)([\w\\]+)\])?(?:\:(.+))?/i,o=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,r=/^\s*|\s*$/g,a=e.extend({init:function(e){function t(e){return e?(e=e.toLowerCase(),function(t){return"*"===e||t.type===e}):void 0}function n(e){return e?function(t){return t._name===e}:void 0}function a(e){return e?(e=e.split("."),function(t){for(var n=e.length;n--;)if(!t.hasClass(e[n]))return!1;return!0}):void 0}function s(e,t,n){return e?function(i){var o=i[e]?i[e]():"";return t?"="===t?o===n:"*="===t?o.indexOf(n)>=0:"~="===t?(" "+o+" ").indexOf(" "+n+" ")>=0:"!="===t?o!=n:"^="===t?0===o.indexOf(n):"$="===t?o.substr(o.length-n.length)===n:!1:!!n}:void 0}function l(e){var t;return e?(e=/(?:not\((.+)\))|(.+)/i.exec(e),e[1]?(t=u(e[1],[]),function(e){return!d(e,t)}):(e=e[2],function(t,n,i){return"first"===e?0===n:"last"===e?n===i-1:"even"===e?n%2===0:"odd"===e?n%2===1:t[e]?t[e]():!1})):void 0}function c(e,o,c){function u(e){e&&o.push(e)}var d;return d=i.exec(e.replace(r,"")),u(t(d[1])),u(n(d[2])),u(a(d[3])),u(s(d[4],d[5],d[6])),u(l(d[7])),o.psuedo=!!d[7],o.direct=c,o}function u(e,t){var n,i,r,a=[];do if(o.exec(""),i=o.exec(e),i&&(e=i[3],a.push(i[1]),i[2])){n=i[3];break}while(i);for(n&&u(n,t),e=[],r=0;r<a.length;r++)">"!=a[r]&&e.push(c(a[r],[],">"===a[r-1]));return t.push(e),t}var d=this.match;this._selectors=u(e,[])},match:function(e,t){var n,i,o,r,a,s,l,c,u,d,f,h,p;for(t=t||this._selectors,n=0,i=t.length;i>n;n++){for(a=t[n],r=a.length,p=e,h=0,o=r-1;o>=0;o--)for(c=a[o];p;){if(c.psuedo)for(f=p.parent().items(),u=d=f.length;u--&&f[u]!==p;);for(s=0,l=c.length;l>s;s++)if(!c[s](p,u,d)){s=l+1;break}if(s===l){h++;break}if(o===r-1)break;p=p.parent()}if(h===r)return!0}return!1},find:function(e){function i(e,t,n){var o,r,a,l,c,u=t[n];for(o=0,r=e.length;r>o;o++){for(c=e[o],a=0,l=u.length;l>a;a++)if(!u[a](c,o,r)){a=l+1;break}if(a===l)n==t.length-1?s.push(c):c.items&&i(c.items(),t,n+1);else if(u.direct)return;c.items&&i(c.items(),t,n)}}var o,r,s=[],l=this._selectors;if(e.items){for(o=0,r=l.length;r>o;o++)i(e.items(),l[o],0);r>1&&(s=t(s))}return n||(n=a.Collection),new n(s)}});return a}),/**
 * Collection.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Collection",["tinymce/util/Tools","tinymce/ui/Selector","tinymce/util/Class"],function(e,t,n){var i,o,r=Array.prototype.push,a=Array.prototype.slice;return o={length:0,init:function(e){e&&this.add(e)},add:function(t){var n=this;return e.isArray(t)?r.apply(n,t):t instanceof i?n.add(t.toArray()):r.call(n,t),n},set:function(e){var t,n=this,i=n.length;for(n.length=0,n.add(e),t=n.length;i>t;t++)delete n[t];return n},filter:function(e){var n,o,r,a,s=this,l=[];for("string"==typeof e?(e=new t(e),a=function(t){return e.match(t)}):a=e,n=0,o=s.length;o>n;n++)r=s[n],a(r)&&l.push(r);return new i(l)},slice:function(){return new i(a.apply(this,arguments))},eq:function(e){return-1===e?this.slice(e):this.slice(e,+e+1)},each:function(t){return e.each(this,t),this},toArray:function(){return e.toArray(this)},indexOf:function(e){for(var t=this,n=t.length;n--&&t[n]!==e;);return n},reverse:function(){return new i(e.toArray(this).reverse())},hasClass:function(e){return this[0]?this[0].hasClass(e):!1},prop:function(e,t){var n,i,o=this;return t!==n?(o.each(function(n){n[e]&&n[e](t)}),o):(i=o[0],i&&i[e]?i[e]():void 0)},exec:function(t){var n=this,i=e.toArray(arguments).slice(1);return n.each(function(e){e[t]&&e[t].apply(e,i)}),n},remove:function(){for(var e=this.length;e--;)this[e].remove();return this}},e.each("fire on off show hide addClass removeClass append prepend before after reflow".split(" "),function(t){o[t]=function(){var n=e.toArray(arguments);return this.each(function(e){t in e&&e[t].apply(e,n)}),this}}),e.each("text name disabled active selected checked visible parent value data".split(" "),function(e){o[e]=function(t){return this.prop(e,t)}}),i=n.extend(o),t.Collection=i,i}),/**
 * DOMUtils.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/DomUtils",["tinymce/util/Tools","tinymce/dom/DOMUtils"],function(e,t){var n=0;return{id:function(){return"mceu_"+n++},createFragment:function(e){return t.DOM.createFragment(e)},getWindowSize:function(){return t.DOM.getViewPort()},getSize:function(e){var t,n;if(e.getBoundingClientRect){var i=e.getBoundingClientRect();t=Math.max(i.width||i.right-i.left,e.offsetWidth),n=Math.max(i.height||i.bottom-i.bottom,e.offsetHeight)}else t=e.offsetWidth,n=e.offsetHeight;return{width:t,height:n}},getPos:function(e,n){return t.DOM.getPos(e,n)},getViewPort:function(e){return t.DOM.getViewPort(e)},get:function(e){return document.getElementById(e)},addClass:function(e,n){return t.DOM.addClass(e,n)},removeClass:function(e,n){return t.DOM.removeClass(e,n)},hasClass:function(e,n){return t.DOM.hasClass(e,n)},toggleClass:function(e,n,i){return t.DOM.toggleClass(e,n,i)},css:function(e,n,i){return t.DOM.setStyle(e,n,i)},getRuntimeStyle:function(e,n){return t.DOM.getStyle(e,n,!0)},on:function(e,n,i,o){return t.DOM.bind(e,n,i,o)},off:function(e,n,i){return t.DOM.unbind(e,n,i)},fire:function(e,n,i){return t.DOM.fire(e,n,i)},innerHtml:function(e,n){t.DOM.setHTML(e,n)}}}),/**
 * Control.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Control",["tinymce/util/Class","tinymce/util/Tools","tinymce/util/EventDispatcher","tinymce/ui/Collection","tinymce/ui/DomUtils"],function(e,t,n,i,o){function r(e){return e._eventDispatcher||(e._eventDispatcher=new n({scope:e,toggleEvent:function(t,i){i&&n.isNative(t)&&(e._nativeEvents||(e._nativeEvents={}),e._nativeEvents[t]=!0,e._rendered&&e.bindPendingEvents())}})),e._eventDispatcher}var a="onmousewheel"in document,s=!1,l="mce-",c=e.extend({Statics:{classPrefix:l},isRtl:function(){return c.rtl},classPrefix:l,init:function(e){var n,i,r=this;if(r.settings=e=t.extend({},r.Defaults,e),r._id=e.id||o.id(),r._text=r._name="",r._width=r._height=0,r._aria={role:e.role},this._elmCache={},n=e.classes)for(n=n.split(" "),n.map={},i=n.length;i--;)n.map[n[i]]=!0;r._classes=n||[],r.visible(!0),t.each("title text width height name classes visible disabled active value".split(" "),function(t){var n,i=e[t];i!==n?r[t](i):r["_"+t]===n&&(r["_"+t]=!1)}),r.on("click",function(){return r.disabled()?!1:void 0}),e.classes&&t.each(e.classes.split(" "),function(e){r.addClass(e)}),r.settings=e,r._borderBox=r.parseBox(e.border),r._paddingBox=r.parseBox(e.padding),r._marginBox=r.parseBox(e.margin),e.hidden&&r.hide()},Properties:"parent,title,text,width,height,disabled,active,name,value",Methods:"renderHtml",getContainerElm:function(){return document.body},getParentCtrl:function(e){for(var t,n=this.getRoot().controlIdLookup;e&&n&&!(t=n[e.id]);)e=e.parentNode;return t},parseBox:function(e){var t,n=10;if(e)return"number"==typeof e?(e=e||0,{top:e,left:e,bottom:e,right:e}):(e=e.split(" "),t=e.length,1===t?e[1]=e[2]=e[3]=e[0]:2===t?(e[2]=e[0],e[3]=e[1]):3===t&&(e[3]=e[1]),{top:parseInt(e[0],n)||0,right:parseInt(e[1],n)||0,bottom:parseInt(e[2],n)||0,left:parseInt(e[3],n)||0})},borderBox:function(){return this._borderBox},paddingBox:function(){return this._paddingBox},marginBox:function(){return this._marginBox},measureBox:function(e,t){function n(t){var n=document.defaultView;return n?(t=t.replace(/[A-Z]/g,function(e){return"-"+e}),n.getComputedStyle(e,null).getPropertyValue(t)):e.currentStyle[t]}function i(e){var t=parseFloat(n(e),10);return isNaN(t)?0:t}return{top:i(t+"TopWidth"),right:i(t+"RightWidth"),bottom:i(t+"BottomWidth"),left:i(t+"LeftWidth")}},initLayoutRect:function(){var e,t,n,i,r,a,s,l,c,u,d=this,f=d.settings,h=d.getEl();e=d._borderBox=d._borderBox||d.measureBox(h,"border"),d._paddingBox=d._paddingBox||d.measureBox(h,"padding"),d._marginBox=d._marginBox||d.measureBox(h,"margin"),u=o.getSize(h),l=f.minWidth,c=f.minHeight,r=l||u.width,a=c||u.height,n=f.width,i=f.height,s=f.autoResize,s="undefined"!=typeof s?s:!n&&!i,n=n||r,i=i||a;var p=e.left+e.right,m=e.top+e.bottom,g=f.maxWidth||65535,v=f.maxHeight||65535;return d._layoutRect=t={x:f.x||0,y:f.y||0,w:n,h:i,deltaW:p,deltaH:m,contentW:n-p,contentH:i-m,innerW:n-p,innerH:i-m,startMinWidth:l||0,startMinHeight:c||0,minW:Math.min(r,g),minH:Math.min(a,v),maxW:g,maxH:v,autoResize:s,scrollW:0},d._lastLayoutRect={},t},layoutRect:function(e){var t,n,i,o,r,a,s=this,l=s._layoutRect;return l||(l=s.initLayoutRect()),e?(i=l.deltaW,o=l.deltaH,e.x!==r&&(l.x=e.x),e.y!==r&&(l.y=e.y),e.minW!==r&&(l.minW=e.minW),e.minH!==r&&(l.minH=e.minH),n=e.w,n!==r&&(n=n<l.minW?l.minW:n,n=n>l.maxW?l.maxW:n,l.w=n,l.innerW=n-i),n=e.h,n!==r&&(n=n<l.minH?l.minH:n,n=n>l.maxH?l.maxH:n,l.h=n,l.innerH=n-o),n=e.innerW,n!==r&&(n=n<l.minW-i?l.minW-i:n,n=n>l.maxW-i?l.maxW-i:n,l.innerW=n,l.w=n+i),n=e.innerH,n!==r&&(n=n<l.minH-o?l.minH-o:n,n=n>l.maxH-o?l.maxH-o:n,l.innerH=n,l.h=n+o),e.contentW!==r&&(l.contentW=e.contentW),e.contentH!==r&&(l.contentH=e.contentH),t=s._lastLayoutRect,(t.x!==l.x||t.y!==l.y||t.w!==l.w||t.h!==l.h)&&(a=c.repaintControls,a&&a.map&&!a.map[s._id]&&(a.push(s),a.map[s._id]=!0),t.x=l.x,t.y=l.y,t.w=l.w,t.h=l.h),s):l},repaint:function(){var e,t,n,i,o,r,a=this,s=0,l=0;r=document.createRange?function(e){return e}:Math.round,e=a.getEl().style,n=a._layoutRect,o=a._lastRepaintRect||{},i=a._borderBox,s=i.left+i.right,l=i.top+i.bottom,n.x!==o.x&&(e.left=r(n.x)+"px",o.x=n.x),n.y!==o.y&&(e.top=r(n.y)+"px",o.y=n.y),n.w!==o.w&&(e.width=r(n.w-s)+"px",o.w=n.w),n.h!==o.h&&(e.height=r(n.h-l)+"px",o.h=n.h),a._hasBody&&n.innerW!==o.innerW&&(t=a.getEl("body").style,t.width=r(n.innerW)+"px",o.innerW=n.innerW),a._hasBody&&n.innerH!==o.innerH&&(t=t||a.getEl("body").style,t.height=r(n.innerH)+"px",o.innerH=n.innerH),a._lastRepaintRect=o,a.fire("repaint",{},!1)},on:function(e,t){function n(e){var t,n;return"string"!=typeof e?e:function(o){return t||i.parentsAndSelf().each(function(i){var o=i.settings.callbacks;return o&&(t=o[e])?(n=i,!1):void 0}),t.call(n,o)}}var i=this;return r(i).on(e,n(t)),i},off:function(e,t){return r(this).off(e,t),this},fire:function(e,t,n){var i=this;if(t=t||{},t.control||(t.control=i),t=r(i).fire(e,t),n!==!1&&i.parent)for(var o=i.parent();o&&!t.isPropagationStopped();)o.fire(e,t,!1),o=o.parent();return t},hasEventListeners:function(e){return r(this).has(e)},parents:function(e){var t,n=this,o=new i;for(t=n.parent();t;t=t.parent())o.add(t);return e&&(o=o.filter(e)),o},parentsAndSelf:function(e){return new i(this).add(this.parents(e))},next:function(){var e=this.parent().items();return e[e.indexOf(this)+1]},prev:function(){var e=this.parent().items();return e[e.indexOf(this)-1]},findCommonAncestor:function(e,t){for(var n;e;){for(n=t;n&&e!=n;)n=n.parent();if(e==n)break;e=e.parent()}return e},hasClass:function(e,t){var n=this._classes[t||"control"];return e=this.classPrefix+e,n&&!!n.map[e]},addClass:function(e,t){var n,i,o=this;return e=this.classPrefix+e,n=o._classes[t||"control"],n||(n=[],n.map={},o._classes[t||"control"]=n),n.map[e]||(n.map[e]=e,n.push(e),o._rendered&&(i=o.getEl(t),i&&(i.className=n.join(" ")))),o},removeClass:function(e,t){var n,i,o,r=this;if(e=this.classPrefix+e,n=r._classes[t||"control"],n&&n.map[e])for(delete n.map[e],i=n.length;i--;)n[i]===e&&n.splice(i,1);return r._rendered&&(o=r.getEl(t),o&&(o.className=n.join(" "))),r},toggleClass:function(e,t,n){var i=this;return t?i.addClass(e,n):i.removeClass(e,n),i},classes:function(e){var t=this._classes[e||"control"];return t?t.join(" "):""},innerHtml:function(e){return o.innerHtml(this.getEl(),e),this},getEl:function(e){var t=e?this._id+"-"+e:this._id;return this._elmCache[t]||(this._elmCache[t]=o.get(t)),this._elmCache[t]},visible:function(e){var t,n=this;return"undefined"!=typeof e?(n._visible!==e&&(n._rendered&&(n.getEl().style.display=e?"":"none"),n._visible=e,t=n.parent(),t&&(t._lastRect=null),n.fire(e?"show":"hide")),n):n._visible},show:function(){return this.visible(!0)},hide:function(){return this.visible(!1)},focus:function(){try{this.getEl().focus()}catch(e){}return this},blur:function(){return this.getEl().blur(),this},aria:function(e,t){var n=this,i=n.getEl(n.ariaTarget);return"undefined"==typeof t?n._aria[e]:(n._aria[e]=t,n._rendered&&i.setAttribute("role"==e?e:"aria-"+e,t),n)},encode:function(e,t){return t!==!1&&(e=this.translate(e)),(e||"").replace(/[&<>"]/g,function(e){return"&#"+e.charCodeAt(0)+";"})},translate:function(e){return c.translate?c.translate(e):e},before:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t),!0),t},after:function(e){var t=this,n=t.parent();return n&&n.insert(e,n.items().indexOf(t)),t},remove:function(){var e,t,n=this,i=n.getEl(),r=n.parent();if(n.items){var a=n.items().toArray();for(t=a.length;t--;)a[t].remove()}r&&r.items&&(e=[],r.items().each(function(t){t!==n&&e.push(t)}),r.items().set(e),r._lastRect=null),n._eventsRoot&&n._eventsRoot==n&&o.off(i);var s=n.getRoot().controlIdLookup;return s&&delete s[n._id],i&&i.parentNode&&i.parentNode.removeChild(i),n._rendered=!1,n},renderBefore:function(e){var t=this;return e.parentNode.insertBefore(o.createFragment(t.renderHtml()),e),t.postRender(),t},renderTo:function(e){var t=this;return e=e||t.getContainerElm(),e.appendChild(o.createFragment(t.renderHtml())),t.postRender(),t},postRender:function(){var e,t,n,i,r,a=this,s=a.settings;for(i in s)0===i.indexOf("on")&&a.on(i.substr(2),s[i]);if(a._eventsRoot){for(n=a.parent();!r&&n;n=n.parent())r=n._eventsRoot;if(r)for(i in r._nativeEvents)a._nativeEvents[i]=!0}a.bindPendingEvents(),s.style&&(e=a.getEl(),e&&(e.setAttribute("style",s.style),e.style.cssText=s.style)),a._visible||o.css(a.getEl(),"display","none"),a.settings.border&&(t=a.borderBox(),o.css(a.getEl(),{"border-top-width":t.top,"border-right-width":t.right,"border-bottom-width":t.bottom,"border-left-width":t.left}));var l=a.getRoot();l.controlIdLookup||(l.controlIdLookup={}),l.controlIdLookup[a._id]=a;for(var c in a._aria)a.aria(c,a._aria[c]);a.fire("postrender",{},!1)},scrollIntoView:function(e){function t(e,t){var n,i,o=e;for(n=i=0;o&&o!=t&&o.nodeType;)n+=o.offsetLeft||0,i+=o.offsetTop||0,o=o.offsetParent;return{x:n,y:i}}var n,i,o,r,a,s,l=this.getEl(),c=l.parentNode,u=t(l,c);return n=u.x,i=u.y,o=l.offsetWidth,r=l.offsetHeight,a=c.clientWidth,s=c.clientHeight,"end"==e?(n-=a-o,i-=s-r):"center"==e&&(n-=a/2-o/2,i-=s/2-r/2),c.scrollLeft=n,c.scrollTop=i,this},bindPendingEvents:function(){function e(e){var t=h.getParentCtrl(e.target);t&&t.fire(e.type,e)}function t(){var e=u._lastHoverCtrl;e&&(e.fire("mouseleave",{target:e.getEl()}),e.parents().each(function(e){e.fire("mouseleave",{target:e.getEl()})}),u._lastHoverCtrl=null)}function n(e){var t,n,i,o=h.getParentCtrl(e.target),r=u._lastHoverCtrl,a=0;if(o!==r){if(u._lastHoverCtrl=o,n=o.parents().toArray().reverse(),n.push(o),r){for(i=r.parents().toArray().reverse(),i.push(r),a=0;a<i.length&&n[a]===i[a];a++);for(t=i.length-1;t>=a;t--)r=i[t],r.fire("mouseleave",{target:r.getEl()})}for(t=a;t<n.length;t++)o=n[t],o.fire("mouseenter",{target:o.getEl()})}}function i(e){e.preventDefault(),"mousewheel"==e.type?(e.deltaY=-1/40*e.wheelDelta,e.wheelDeltaX&&(e.deltaX=-1/40*e.wheelDeltaX)):(e.deltaX=0,e.deltaY=e.detail),e=h.fire("wheel",e)}var r,l,c,u,d,f,h=this;if(h._rendered=!0,d=h._nativeEvents){for(c=h.parents().toArray(),c.unshift(h),r=0,l=c.length;!u&&l>r;r++)u=c[r]._eventsRoot;for(u||(u=c[c.length-1]||h),h._eventsRoot=u,l=r,r=0;l>r;r++)c[r]._eventsRoot=u;var p=u._delegates;p||(p=u._delegates={});for(f in d){if(!d)return!1;"wheel"!==f||s?("mouseenter"===f||"mouseleave"===f?u._hasMouseEnter||(o.on(u.getEl(),"mouseleave",t),o.on(u.getEl(),"mouseover",n),u._hasMouseEnter=1):p[f]||(o.on(u.getEl(),f,e),p[f]=!0),d[f]=!1):a?o.on(h.getEl(),"mousewheel",i):o.on(h.getEl(),"DOMMouseScroll",i)}}},getRoot:function(){for(var e,t=this,n=[];t;){if(t.rootControl){e=t.rootControl;break}n.push(t),e=t,t=t.parent()}e||(e=this);for(var i=n.length;i--;)n[i].rootControl=e;return e},reflow:function(){return this.repaint(),this}});return c}),/**
 * Factory.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Factory",[],function(){var e,t={};return{add:function(e,n){t[e.toLowerCase()]=n},has:function(e){return!!t[e.toLowerCase()]},create:function(n,i){var o,r,a;if(!e){a=tinymce.ui;for(r in a)t[r.toLowerCase()]=a[r];e=!0}if("string"==typeof n?(i=i||{},i.type=n):(i=n,n=i.type),n=n.toLowerCase(),o=t[n],!o)throw new Error("Could not find control by type: "+n);return o=new o(i),o.type=n,o}}}),/**
 * KeyboardNavigation.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/KeyboardNavigation",[],function(){return function(e){function t(e){return e=e||y,e&&e.getAttribute("role")}function n(e){for(var n,i=e||y;i=i.parentNode;)if(n=t(i))return n}function i(e){var t=y;return t?t.getAttribute("aria-"+e):void 0}function o(e){var t=e.tagName.toUpperCase();return"INPUT"==t||"TEXTAREA"==t}function r(e){return o(e)&&!e.hidden?!0:/^(button|menuitem|checkbox|tab|menuitemcheckbox|option|gridcell)$/.test(t(e))?!0:!1}function a(e){function t(e){if(1==e.nodeType&&"none"!=e.style.display){r(e)&&n.push(e);for(var i=0;i<e.childNodes.length;i++)t(e.childNodes[i])}}var n=[];return t(e||x.getEl()),n}function s(e){var t,n;e=e||b,n=e.parents().toArray(),n.unshift(e);for(var i=0;i<n.length&&(t=n[i],!t.settings.ariaRoot);i++);return t}function l(e){var t=s(e),n=a(t.getEl());t.settings.ariaRemember&&"lastAriaIndex"in t?c(t.lastAriaIndex,n):c(0,n)}function c(e,t){return 0>e?e=t.length-1:e>=t.length&&(e=0),t[e]&&t[e].focus(),e}function u(e,t){var n=-1,i=s();t=t||a(i.getEl());for(var o=0;o<t.length;o++)t[o]===y&&(n=o);n+=e,i.lastAriaIndex=c(n,t)}function d(){var e=n();"tablist"==e?u(-1,a(y.parentNode)):b.parent().submenu?g():u(-1)}function f(){var e=t(),o=n();"tablist"==o?u(1,a(y.parentNode)):"menuitem"==e&&"menu"==o&&i("haspopup")?v():u(1)}function h(){u(-1)}function p(){var e=t(),o=n();"menuitem"==e&&"menubar"==o?v():"button"==e&&i("haspopup")?v({key:"down"}):u(1)}function m(e){var t=n();if("tablist"==t){var i=a(b.getEl("body"))[0];i&&i.focus()}else u(e.shiftKey?-1:1)}function g(){b.fire("cancel")}function v(e){e=e||{},b.fire("click",{target:y,aria:e})}var y,b,x=e.root;try{y=document.activeElement}catch(w){y=document.body}return b=x.getParentCtrl(y),x.on("keydown",function(e){function t(e,t){o(y)||t(e)!==!1&&e.preventDefault()}if(!e.isDefaultPrevented())switch(e.keyCode){case 37:t(e,d);break;case 39:t(e,f);break;case 38:t(e,h);break;case 40:t(e,p);break;case 27:g();break;case 14:case 13:case 32:t(e,v);break;case 9:m(e)!==!1&&e.preventDefault()}}),x.on("focusin",function(e){y=e.target,b=e.control}),{focusFirst:l}}}),/**
 * Container.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Container",["tinymce/ui/Control","tinymce/ui/Collection","tinymce/ui/Selector","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/util/Tools","tinymce/ui/DomUtils"],function(e,t,n,i,o,r,a){var s={};return e.extend({layout:"",innerClass:"container-inner",init:function(e){var n=this;n._super(e),e=n.settings,n._fixed=e.fixed,n._items=new t,n.isRtl()&&n.addClass("rtl"),n.addClass("container"),n.addClass("container-body","body"),e.containerCls&&n.addClass(e.containerCls),n._layout=i.create((e.layout||n.layout)+"layout"),n.settings.items&&n.add(n.settings.items),n._hasBody=!0},items:function(){return this._items},find:function(e){return e=s[e]=s[e]||new n(e),e.find(this)},add:function(e){var t=this;return t.items().add(t.create(e)).parent(t),t},focus:function(e){var t,n,i,o=this;return e&&(n=o.keyboardNav||o.parents().eq(-1)[0].keyboardNav)?void n.focusFirst(o):(i=o.find("*"),o.statusbar&&i.add(o.statusbar.items()),i.each(function(e){return e.settings.autofocus?(t=null,!1):void(e.canFocus&&(t=t||e))}),t&&t.focus(),o)},replace:function(e,t){for(var n,i=this.items(),o=i.length;o--;)if(i[o]===e){i[o]=t;break}o>=0&&(n=t.getEl(),n&&n.parentNode.removeChild(n),n=e.getEl(),n&&n.parentNode.removeChild(n)),t.parent(this)},create:function(t){var n,o=this,a=[];return r.isArray(t)||(t=[t]),r.each(t,function(t){t&&(t instanceof e||("string"==typeof t&&(t={type:t}),n=r.extend({},o.settings.defaults,t),t.type=n.type=n.type||t.type||o.settings.defaultType||(n.defaults?n.defaults.type:null),t=i.create(n)),a.push(t))}),a},renderNew:function(){var e=this;return e.items().each(function(t,n){var i,o;t.parent(e),t._rendered||(i=e.getEl("body"),o=a.createFragment(t.renderHtml()),i.hasChildNodes()&&n<=i.childNodes.length-1?i.insertBefore(o,i.childNodes[n]):i.appendChild(o),t.postRender())}),e._layout.applyClasses(e),e._lastRect=null,e},append:function(e){return this.add(e).renderNew()},prepend:function(e){var t=this;return t.items().set(t.create(e).concat(t.items().toArray())),t.renderNew()},insert:function(e,t,n){var i,o,r,a=this;return e=a.create(e),i=a.items(),!n&&t<i.length-1&&(t+=1),t>=0&&t<i.length&&(o=i.slice(0,t).toArray(),r=i.slice(t).toArray(),i.set(o.concat(e,r))),a.renderNew()},fromJSON:function(e){var t=this;for(var n in e)t.find("#"+n).value(e[n]);return t},toJSON:function(){var e=this,t={};return e.find("*").each(function(e){var n=e.name(),i=e.value();n&&"undefined"!=typeof i&&(t[n]=i)}),t},preRender:function(){},renderHtml:function(){var e=this,t=e._layout,n=this.settings.role;return e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"'+(n?' role="'+this.settings.role+'"':"")+'><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"},postRender:function(){var e,t=this;return t.items().exec("postRender"),t._super(),t._layout.postRender(t),t._rendered=!0,t.settings.style&&a.css(t.getEl(),t.settings.style),t.settings.border&&(e=t.borderBox(),a.css(t.getEl(),{"border-top-width":e.top,"border-right-width":e.right,"border-bottom-width":e.bottom,"border-left-width":e.left})),t.parent()||(t.keyboardNav=new o({root:t})),t},initLayoutRect:function(){var e=this,t=e._super();return e._layout.recalc(e),t},recalc:function(){var e=this,t=e._layoutRect,n=e._lastRect;return n&&n.w==t.w&&n.h==t.h?void 0:(e._layout.recalc(e),t=e.layoutRect(),e._lastRect={x:t.x,y:t.y,w:t.w,h:t.h},!0)},reflow:function(){var t;if(this.visible()){for(e.repaintControls=[],e.repaintControls.map={},this.recalc(),t=e.repaintControls.length;t--;)e.repaintControls[t].repaint();"flow"!==this.settings.layout&&"stack"!==this.settings.layout&&this.repaint(),e.repaintControls=[]}return this}})}),/**
 * DragHelper.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/DragHelper",["tinymce/ui/DomUtils"],function(e){function t(){var e,t,n,i,o,r,a,s,l=document,c=Math.max;return e=l.documentElement,t=l.body,n=c(e.scrollWidth,t.scrollWidth),i=c(e.clientWidth,t.clientWidth),o=c(e.offsetWidth,t.offsetWidth),r=c(e.scrollHeight,t.scrollHeight),a=c(e.clientHeight,t.clientHeight),s=c(e.offsetHeight,t.offsetHeight),{width:o>n?i:n,height:s>r?a:r}}return function(n,i){function o(){return f.getElementById(i.handle||n)}var r,a,s,l,c,u,d,f=document;i=i||{},s=function(n){var s,h,p=t();n.preventDefault(),a=n.button,s=o(),u=n.screenX,d=n.screenY,h=window.getComputedStyle?window.getComputedStyle(s,null).getPropertyValue("cursor"):s.runtimeStyle.cursor,r=f.createElement("div"),e.css(r,{position:"absolute",top:0,left:0,width:p.width,height:p.height,zIndex:2147483647,opacity:1e-4,cursor:h}),f.body.appendChild(r),e.on(f,"mousemove",c),e.on(f,"mouseup",l),i.start(n)},c=function(e){return e.button!==a?l(e):(e.deltaX=e.screenX-u,e.deltaY=e.screenY-d,e.preventDefault(),void i.drag(e))},l=function(t){e.off(f,"mousemove",c),e.off(f,"mouseup",l),r.parentNode.removeChild(r),i.stop&&i.stop(t)},this.destroy=function(){e.off(o())},e.on(o(),"mousedown",s)}}),/**
 * Scrollable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Scrollable",["tinymce/ui/DomUtils","tinymce/ui/DragHelper"],function(e,t){return{init:function(){var e=this;e.on("repaint",e.renderScroll)},renderScroll:function(){function n(){function t(t,a,s,l,c,u){var d,f,h,p,m,g,v,y,b;if(f=o.getEl("scroll"+t)){if(y=a.toLowerCase(),b=s.toLowerCase(),o.getEl("absend")&&e.css(o.getEl("absend"),y,o.layoutRect()[l]-1),!c)return void e.css(f,"display","none");e.css(f,"display","block"),d=o.getEl("body"),h=o.getEl("scroll"+t+"t"),p=d["client"+s]-2*r,p-=n&&i?f["client"+u]:0,m=d["scroll"+s],g=p/m,v={},v[y]=d["offset"+a]+r,v[b]=p,e.css(f,v),v={},v[y]=d["scroll"+a]*g,v[b]=p*g,e.css(h,v)}}var n,i,a;a=o.getEl("body"),n=a.scrollWidth>a.clientWidth,i=a.scrollHeight>a.clientHeight,t("h","Left","Width","contentW",n,"Height"),t("v","Top","Height","contentH",i,"Width")}function i(){function n(n,i,a,s,l){var c,u=o._id+"-scroll"+n,d=o.classPrefix;o.getEl().appendChild(e.createFragment('<div id="'+u+'" class="'+d+"scrollbar "+d+"scrollbar-"+n+'"><div id="'+u+'t" class="'+d+'scrollbar-thumb"></div></div>')),o.draghelper=new t(u+"t",{start:function(){c=o.getEl("body")["scroll"+i],e.addClass(e.get(u),d+"active")},drag:function(e){var t,u,d,f,h=o.layoutRect();u=h.contentW>h.innerW,d=h.contentH>h.innerH,f=o.getEl("body")["client"+a]-2*r,f-=u&&d?o.getEl("scroll"+n)["client"+l]:0,t=f/o.getEl("body")["scroll"+a],o.getEl("body")["scroll"+i]=c+e["delta"+s]/t},stop:function(){e.removeClass(e.get(u),d+"active")}})}o.addClass("scroll"),n("v","Top","Height","Y","Width"),n("h","Left","Width","X","Height")}var o=this,r=2;o.settings.autoScroll&&(o._hasScroll||(o._hasScroll=!0,i(),o.on("wheel",function(e){var t=o.getEl("body");t.scrollLeft+=10*(e.deltaX||0),t.scrollTop+=10*e.deltaY,n()}),e.on(o.getEl("body"),"scroll",n)),n())}}}),/**
 * Panel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Panel",["tinymce/ui/Container","tinymce/ui/Scrollable"],function(e,t){return e.extend({Defaults:{layout:"fit",containerCls:"panel"},Mixins:[t],renderHtml:function(){var e=this,t=e._layout,n=e.settings.html;return e.preRender(),t.preRender(e),"undefined"==typeof n?n='<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div>":("function"==typeof n&&(n=n.call(e)),e._hasBody=!1),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1" role="group">'+(e._preBodyHtml||"")+n+"</div>"}})}),/**
 * Movable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Movable",["tinymce/ui/DomUtils"],function(e){function t(t,n,i){var o,r,a,s,l,c,u,d,f,h;return f=e.getViewPort(),r=e.getPos(n),a=r.x,s=r.y,t._fixed&&"static"==e.getRuntimeStyle(document.body,"position")&&(a-=f.x,s-=f.y),o=t.getEl(),h=e.getSize(o),l=h.width,c=h.height,h=e.getSize(n),u=h.width,d=h.height,i=(i||"").split(""),"b"===i[0]&&(s+=d),"r"===i[1]&&(a+=u),"c"===i[0]&&(s+=Math.round(d/2)),"c"===i[1]&&(a+=Math.round(u/2)),"b"===i[3]&&(s-=c),"r"===i[4]&&(a-=l),"c"===i[3]&&(s-=Math.round(c/2)),"c"===i[4]&&(a-=Math.round(l/2)),{x:a,y:s,w:l,h:c}}return{testMoveRel:function(n,i){for(var o=e.getViewPort(),r=0;r<i.length;r++){var a=t(this,n,i[r]);if(this._fixed){if(a.x>0&&a.x+a.w<o.w&&a.y>0&&a.y+a.h<o.h)return i[r]}else if(a.x>o.x&&a.x+a.w<o.w+o.x&&a.y>o.y&&a.y+a.h<o.h+o.y)return i[r]}return i[0]},moveRel:function(e,n){"string"!=typeof n&&(n=this.testMoveRel(e,n));var i=t(this,e,n);return this.moveTo(i.x,i.y)},moveBy:function(e,t){var n=this,i=n.layoutRect();return n.moveTo(i.x+e,i.y+t),n},moveTo:function(t,n){function i(e,t,n){return 0>e?0:e+n>t?(e=t-n,0>e?0:e):e}var o=this;if(o.settings.constrainToViewport){var r=e.getViewPort(window),a=o.layoutRect();t=i(t,r.w+r.x,a.w),n=i(n,r.h+r.y,a.h)}return o._rendered?o.layoutRect({x:t,y:n}).repaint():(o.settings.x=t,o.settings.y=n),o.fire("move",{x:t,y:n}),o}}}),/**
 * Resizable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Resizable",["tinymce/ui/DomUtils"],function(e){return{resizeToContent:function(){this._layoutRect.autoResize=!0,this._lastRect=null,this.reflow()},resizeTo:function(t,n){if(1>=t||1>=n){var i=e.getWindowSize();t=1>=t?t*i.w:t,n=1>=n?n*i.h:n}return this._layoutRect.autoResize=!1,this.layoutRect({minW:t,minH:n,w:t,h:n}).reflow()},resizeBy:function(e,t){var n=this,i=n.layoutRect();return n.resizeTo(i.w+e,i.h+t)}}}),/**
 * FloatPanel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FloatPanel",["tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/DomUtils"],function(e,t,n,i){function o(){function e(e,t){for(;e;){if(e==t)return!0;e=e.parent()}}u||(u=function(t){if(2!=t.button)for(var n=p.length;n--;){var i=p[n],o=i.getParentCtrl(t.target);if(i.settings.autohide){if(o&&(e(o,i)||i.parent()===o))continue;t=i.fire("autohide",{target:t.target}),t.isDefaultPrevented()||i.hide()}}},i.on(document,"click",u))}function r(){d||(d=function(){var e;for(e=p.length;e--;)s(p[e])},i.on(window,"scroll",d))}function a(){if(!f){var e=document.documentElement,t=e.clientWidth,n=e.clientHeight;f=function(){document.all&&t==e.clientWidth&&n==e.clientHeight||(t=e.clientWidth,n=e.clientHeight,g.hideAll())},i.on(window,"resize",f)}}function s(e){function t(t,n){for(var i,o=0;o<p.length;o++)if(p[o]!=e)for(i=p[o].parent();i&&(i=i.parent());)i==e&&p[o].fixed(t).moveBy(0,n).repaint()}var n=i.getViewPort().y;e.settings.autofix&&(e._fixed?e._autoFixY>n&&(e.fixed(!1).layoutRect({y:e._autoFixY}).repaint(),t(!1,e._autoFixY-n)):(e._autoFixY=e.layoutRect().y,e._autoFixY<n&&(e.fixed(!0).layoutRect({y:0}).repaint(),t(!0,n-e._autoFixY))))}function l(e,t){var n,o,r=g.zIndex||65535;if(e)m.push(t);else for(n=m.length;n--;)m[n]===t&&m.splice(n,1);if(m.length)for(n=0;n<m.length;n++)m[n].modal&&(r++,o=m[n]),m[n].getEl().style.zIndex=r,m[n].zIndex=r,r++;var a=document.getElementById(t.classPrefix+"modal-block");o?i.css(a,"z-index",o.zIndex-1):a&&(a.parentNode.removeChild(a),h=!1),g.currentZIndex=r}function c(e){var t;for(t=p.length;t--;)p[t]===e&&p.splice(t,1);for(t=m.length;t--;)m[t]===e&&m.splice(t,1)}var u,d,f,h,p=[],m=[],g=e.extend({Mixins:[t,n],init:function(e){var t=this;t._super(e),t._eventsRoot=t,t.addClass("floatpanel"),e.autohide&&(o(),a(),p.push(t)),e.autofix&&(r(),t.on("move",function(){s(this)})),t.on("postrender show",function(e){if(e.control==t){var n,o=t.classPrefix;t.modal&&!h&&(n=i.createFragment('<div id="'+o+'modal-block" class="'+o+"reset "+o+'fade"></div>'),n=n.firstChild,t.getContainerElm().appendChild(n),setTimeout(function(){i.addClass(n,o+"in"),i.addClass(t.getEl(),o+"in")},0),h=!0),l(!0,t)}}),t.on("show",function(){t.parents().each(function(e){return e._fixed?(t.fixed(!0),!1):void 0})}),e.popover&&(t._preBodyHtml='<div class="'+t.classPrefix+'arrow"></div>',t.addClass("popover").addClass("bottom").addClass(t.isRtl()?"end":"start"))},fixed:function(e){var t=this;if(t._fixed!=e){if(t._rendered){var n=i.getViewPort();e?t.layoutRect().y-=n.y:t.layoutRect().y+=n.y}t.toggleClass("fixed",e),t._fixed=e}return t},show:function(){var e,t=this,n=t._super();for(e=p.length;e--&&p[e]!==t;);return-1===e&&p.push(t),n},hide:function(){return c(this),l(!1,this),this._super()},hideAll:function(){g.hideAll()},close:function(){var e=this;return e.fire("close").isDefaultPrevented()||(e.remove(),l(!1,e)),e},remove:function(){c(this),this._super()},postRender:function(){var e=this;return e.settings.bodyRole&&this.getEl("body").setAttribute("role",e.settings.bodyRole),e._super()}});return g.hideAll=function(){for(var e=p.length;e--;){var t=p[e];t&&t.settings.autohide&&(t.hide(),p.splice(e,1))}},g}),/**
 * Window.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Window",["tinymce/ui/FloatPanel","tinymce/ui/Panel","tinymce/ui/DomUtils","tinymce/ui/DragHelper"],function(e,t,n,i){var o=e.extend({modal:!0,Defaults:{border:1,layout:"flex",containerCls:"panel",role:"dialog",callbacks:{submit:function(){this.fire("submit",{data:this.toJSON()})},close:function(){this.close()}}},init:function(e){var n=this;n._super(e),n.isRtl()&&n.addClass("rtl"),n.addClass("window"),n._fixed=!0,e.buttons&&(n.statusbar=new t({layout:"flex",border:"1 0 0 0",spacing:3,padding:10,align:"center",pack:n.isRtl()?"start":"end",defaults:{type:"button"},items:e.buttons}),n.statusbar.addClass("foot"),n.statusbar.parent(n)),n.on("click",function(e){-1!=e.target.className.indexOf(n.classPrefix+"close")&&n.close()}),n.on("cancel",function(){n.close()}),n.aria("describedby",n.describedBy||n._id+"-none"),n.aria("label",e.title),n._fullscreen=!1},recalc:function(){var e,t,i,o,r=this,a=r.statusbar;r._fullscreen&&(r.layoutRect(n.getWindowSize()),r.layoutRect().contentH=r.layoutRect().innerH),r._super(),e=r.layoutRect(),r.settings.title&&!r._fullscreen&&(t=e.headerW,t>e.w&&(i=e.x-Math.max(0,t/2),r.layoutRect({w:t,x:i}),o=!0)),a&&(a.layoutRect({w:r.layoutRect().innerW}).recalc(),t=a.layoutRect().minW+e.deltaW,t>e.w&&(i=e.x-Math.max(0,t-e.w),r.layoutRect({w:t,x:i}),o=!0)),o&&r.recalc()},initLayoutRect:function(){var e,t=this,i=t._super(),o=0;if(t.settings.title&&!t._fullscreen){e=t.getEl("head");var r=n.getSize(e);i.headerW=r.width,i.headerH=r.height,o+=i.headerH}t.statusbar&&(o+=t.statusbar.layoutRect().h),i.deltaH+=o,i.minH+=o,i.h+=o;var a=n.getWindowSize();return i.x=Math.max(0,a.w/2-i.w/2),i.y=Math.max(0,a.h/2-i.h/2),i},renderHtml:function(){var e=this,t=e._layout,n=e._id,i=e.classPrefix,o=e.settings,r="",a="",s=o.html;return e.preRender(),t.preRender(e),o.title&&(r='<div id="'+n+'-head" class="'+i+'window-head"><div id="'+n+'-title" class="'+i+'title">'+e.encode(o.title)+'</div><button type="button" class="'+i+'close" aria-hidden="true">×</button><div id="'+n+'-dragh" class="'+i+'dragh"></div></div>'),o.url&&(s='<iframe src="'+o.url+'" tabindex="-1"></iframe>'),"undefined"==typeof s&&(s=t.renderHtml(e)),e.statusbar&&(a=e.statusbar.renderHtml()),'<div id="'+n+'" class="'+e.classes()+'" hidefocus="1"><div class="'+e.classPrefix+'reset" role="application">'+r+'<div id="'+n+'-body" class="'+e.classes("body")+'">'+s+"</div>"+a+"</div></div>"},fullscreen:function(e){var t,i,o=this,r=document.documentElement,a=o.classPrefix;if(e!=o._fullscreen)if(n.on(window,"resize",function(){var e;if(o._fullscreen)if(t)o._timer||(o._timer=setTimeout(function(){var e=n.getWindowSize();o.moveTo(0,0).resizeTo(e.w,e.h),o._timer=0},50));else{e=(new Date).getTime();var i=n.getWindowSize();o.moveTo(0,0).resizeTo(i.w,i.h),(new Date).getTime()-e>50&&(t=!0)}}),i=o.layoutRect(),o._fullscreen=e,e){o._initial={x:i.x,y:i.y,w:i.w,h:i.h},o._borderBox=o.parseBox("0"),o.getEl("head").style.display="none",i.deltaH-=i.headerH+2,n.addClass(r,a+"fullscreen"),n.addClass(document.body,a+"fullscreen"),o.addClass("fullscreen");var s=n.getWindowSize();o.moveTo(0,0).resizeTo(s.w,s.h)}else o._borderBox=o.parseBox(o.settings.border),o.getEl("head").style.display="",i.deltaH+=i.headerH,n.removeClass(r,a+"fullscreen"),n.removeClass(document.body,a+"fullscreen"),o.removeClass("fullscreen"),o.moveTo(o._initial.x,o._initial.y).resizeTo(o._initial.w,o._initial.h);return o.reflow()},postRender:function(){var e,t=this;setTimeout(function(){t.addClass("in")},0),t._super(),t.statusbar&&t.statusbar.postRender(),t.focus(),this.dragHelper=new i(t._id+"-dragh",{start:function(){e={x:t.layoutRect().x,y:t.layoutRect().y}},drag:function(n){t.moveTo(e.x+n.deltaX,e.y+n.deltaY)}}),t.on("submit",function(e){e.isDefaultPrevented()||t.close()})},submit:function(){return this.fire("submit",{data:this.toJSON()})},remove:function(){var e=this,t=e.classPrefix;e.dragHelper.destroy(),e._super(),e.statusbar&&this.statusbar.remove(),e._fullscreen&&(n.removeClass(document.documentElement,t+"fullscreen"),n.removeClass(document.body,t+"fullscreen"))},getContentWindow:function(){var e=this.getEl().getElementsByTagName("iframe")[0];return e?e.contentWindow:null}});return o}),/**
 * MessageBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/MessageBox",["tinymce/ui/Window"],function(e){var t=e.extend({init:function(e){e={border:1,padding:20,layout:"flex",pack:"center",align:"center",containerCls:"panel",autoScroll:!0,buttons:{type:"button",text:"Ok",action:"ok"},items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200}},this._super(e)},Statics:{OK:1,OK_CANCEL:2,YES_NO:3,YES_NO_CANCEL:4,msgBox:function(n){function i(e,t,n){return{type:"button",text:e,subtype:n?"primary":"",onClick:function(e){e.control.parents()[1].close(),r(t)}}}var o,r=n.callback||function(){};switch(n.buttons){case t.OK_CANCEL:o=[i("Ok",!0,!0),i("Cancel",!1)];break;case t.YES_NO:case t.YES_NO_CANCEL:o=[i("Yes",1,!0),i("No",0)],n.buttons==t.YES_NO_CANCEL&&o.push(i("Cancel",-1));break;default:o=[i("Ok",!0,!0)]}return new e({padding:20,x:n.x,y:n.y,minWidth:300,minHeight:100,layout:"flex",pack:"center",align:"center",buttons:o,title:n.title,role:"alertdialog",items:{type:"label",multiline:!0,maxWidth:500,maxHeight:200,text:n.text},onPostRender:function(){this.aria("describedby",this.items()[0]._id)},onClose:n.onClose,onCancel:function(){r(!1)}}).renderTo(document.body).reflow()},alert:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,t.msgBox(e)},confirm:function(e,n){return"string"==typeof e&&(e={text:e}),e.callback=n,e.buttons=t.OK_CANCEL,t.msgBox(e)}}});return t}),/**
 * WindowManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/WindowManager",["tinymce/ui/Window","tinymce/ui/MessageBox"],function(e,t){return function(n){function i(){return r.length?r[r.length-1]:void 0}var o=this,r=[];o.windows=r,n.on("remove",function(){for(var e=r.length;e--;)r[e].close()}),o.open=function(t,i){var o;return n.editorManager.setActive(n),t.title=t.title||" ",t.url=t.url||t.file,t.url&&(t.width=parseInt(t.width||320,10),t.height=parseInt(t.height||240,10)),t.body&&(t.items={defaults:t.defaults,type:t.bodyType||"form",items:t.body}),t.url||t.buttons||(t.buttons=[{text:"Ok",subtype:"primary",onclick:function(){o.find("form")[0].submit()}},{text:"Cancel",onclick:function(){o.close()}}]),o=new e(t),r.push(o),o.on("close",function(){for(var e=r.length;e--;)r[e]===o&&r.splice(e,1);r.length||n.focus()}),t.data&&o.on("postRender",function(){this.find("*").each(function(e){var n=e.name();n in t.data&&e.value(t.data[n])})}),o.features=t||{},o.params=i||{},1===r.length&&n.nodeChanged(),o.renderTo().reflow()},o.alert=function(e,i,o){t.alert(e,function(){i?i.call(o||this):n.focus()})},o.confirm=function(e,n,i){t.confirm(e,function(e){n.call(i||this,e)})},o.close=function(){i()&&i().close()},o.getParams=function(){return i()?i().params:null},o.setParams=function(e){i()&&(i().params=e)},o.getWindows=function(){return r}}}),/**
 * Quirks.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 *
 * @ignore-file
 */
i("tinymce/util/Quirks",["tinymce/util/VK","tinymce/dom/RangeUtils","tinymce/html/Node","tinymce/html/Entities","tinymce/Env","tinymce/util/Tools"],function(e,t,n,i,o,r){return function(a){function s(e,t){try{a.getDoc().execCommand(e,!1,t)}catch(n){}}function l(){var e=a.getDoc().documentMode;return e?e:6}function c(e){return e.isDefaultPrevented()}function u(){function t(e){var t=new l(function(){});r.each(a.getBody().getElementsByTagName("*"),function(e){"SPAN"==e.tagName&&e.setAttribute("mce-data-marked",1),!e.hasAttribute("data-mce-style")&&e.hasAttribute("style")&&a.dom.setAttrib(e,"style",a.dom.getAttrib(e,"style"))}),t.observe(a.getDoc(),{childList:!0,attributes:!0,subtree:!0,attributeFilter:["style"]}),a.getDoc().execCommand(e?"ForwardDelete":"Delete",!1,null);var n=a.selection.getRng(),i=n.startContainer.parentNode;r.each(t.takeRecords(),function(e){if(V.isChildOf(e.target,a.getBody())){if("style"==e.attributeName){var t=e.target.getAttribute("data-mce-style");t?e.target.setAttribute("style",t):e.target.removeAttribute("style")}r.each(e.addedNodes,function(e){if("SPAN"==e.nodeName&&!e.getAttribute("mce-data-marked")){var t,o;e==i&&(t=n.startOffset,o=e.firstChild),V.remove(e,!0),o&&(n.setStart(o,t),n.setEnd(o,t),a.selection.setRng(n))}})}}),t.disconnect(),r.each(a.dom.select("span[mce-data-marked]"),function(e){e.removeAttribute("mce-data-marked")})}var n,i,o=a.getDoc(),s="data:text/mce-internal,",l=window.MutationObserver;l||(n=!0,l=function(){function e(e){var t=e.relatedNode||e.target;i.push({target:t,addedNodes:[t]})}function t(e){var t=e.relatedNode||e.target;i.push({target:t,attributeName:e.attrName})}var n,i=[];this.observe=function(i){n=i,n.addEventListener("DOMSubtreeModified",e,!1),n.addEventListener("DOMNodeInsertedIntoDocument",e,!1),n.addEventListener("DOMNodeInserted",e,!1),n.addEventListener("DOMAttrModified",t,!1)},this.disconnect=function(){n.removeEventListener("DOMSubtreeModified",e,!1),n.removeEventListener("DOMNodeInsertedIntoDocument",e,!1),n.removeEventListener("DOMNodeInserted",e,!1),n.removeEventListener("DOMAttrModified",t,!1)},this.takeRecords=function(){return i}}),a.on("keydown",function(n){var i=n.keyCode==j,o=e.metaKeyPressed(n);if(!c(n)&&(i||n.keyCode==U)){var r=a.selection.getRng(),s=r.startContainer,l=r.startOffset;if(!o&&r.collapsed&&3==s.nodeType&&(i?l<s.data.length:l>0))return;n.preventDefault(),o&&a.selection.getSel().modify("extend",i?"forward":"backward","word"),t(i)}}),a.on("keypress",function(n){c(n)||q.isCollapsed()||!n.charCode||e.metaKeyPressed(n)||(n.preventDefault(),t(!0),a.selection.setContent(String.fromCharCode(n.charCode)))}),a.addCommand("Delete",function(){t()}),a.addCommand("ForwardDelete",function(){t(!0)}),n||(a.on("dragstart",function(e){var t;a.selection.isCollapsed()&&"IMG"==e.target.tagName&&q.select(e.target),i=q.getRng(),t=a.selection.getContent(),t.length>0&&e.dataTransfer.setData("URL","data:text/mce-internal,"+escape(t))}),a.on("drop",function(e){if(!c(e)){var n=e.dataTransfer.getData("URL");if(!n||-1==n.indexOf(s)||!o.caretRangeFromPoint)return;n=unescape(n.substr(s.length)),o.caretRangeFromPoint&&(e.preventDefault(),window.setTimeout(function(){var r=o.caretRangeFromPoint(e.x,e.y);i&&(q.setRng(i),i=null),t(),q.setRng(r),a.insertContent(n)},0))}}),a.on("cut",function(e){!c(e)&&e.clipboardData&&(e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/html",a.selection.getContent()),e.clipboardData.setData("text/plain",a.selection.getContent({format:"text"})),t(!0))}))}function d(){function e(e){var t=V.create("body"),n=e.cloneContents();return t.appendChild(n),q.serializer.serialize(t,{format:"html"})}function n(n){if(!n.setStart){if(n.item)return!1;var i=n.duplicate();return i.moveToElementText(a.getBody()),t.compareRanges(n,i)}var o=e(n),r=V.createRng();r.selectNode(a.getBody());var s=e(r);return o===s}a.on("keydown",function(e){var t,i,o=e.keyCode;if(!c(e)&&(o==j||o==U)){if(t=a.selection.isCollapsed(),i=a.getBody(),t&&!V.isEmpty(i))return;if(!t&&!n(a.selection.getRng()))return;e.preventDefault(),a.setContent(""),i.firstChild&&V.isBlock(i.firstChild)?a.selection.setCursorLocation(i.firstChild,0):a.selection.setCursorLocation(i,0),a.nodeChanged()}})}function f(){a.shortcuts.add("ctrl+a",null,"SelectAll")}function h(){a.settings.content_editable||(V.bind(a.getDoc(),"focusin",function(){q.setRng(q.getRng())}),V.bind(a.getDoc(),"mousedown mouseup",function(e){e.target==a.getDoc().documentElement&&(a.getBody().focus(),"mousedown"==e.type?q.placeCaretAt(e.clientX,e.clientY):q.setRng(q.getRng()))}))}function p(){a.on("keydown",function(e){if(!c(e)&&e.keyCode===U){if(!a.getBody().getElementsByTagName("hr").length)return;if(q.isCollapsed()&&0===q.getRng(!0).startOffset){var t=q.getNode(),n=t.previousSibling;if("HR"==t.nodeName)return V.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(V.remove(n),e.preventDefault())}}})}function m(){window.Range.prototype.getClientRects||a.on("mousedown",function(e){if(!c(e)&&"HTML"===e.target.nodeName){var t=a.getBody();t.blur(),setTimeout(function(){t.focus()},0)}})}function g(){a.on("click",function(e){var t=e.target;/^(IMG|HR)$/.test(t.nodeName)&&(e.preventDefault(),q.getSel().setBaseAndExtent(t,0,t,1),a.nodeChanged()),"A"==t.nodeName&&V.hasClass(t,"mce-item-anchor")&&(e.preventDefault(),q.select(t))})}function v(){function e(){var e=V.getAttribs(q.getStart().cloneNode(!1));return function(){var t=q.getStart();t!==a.getBody()&&(V.setAttrib(t,"style",null),W(e,function(e){t.setAttributeNode(e.cloneNode(!0))}))}}function t(){return!q.isCollapsed()&&V.getParent(q.getStart(),V.isBlock)!=V.getParent(q.getEnd(),V.isBlock)}a.on("keypress",function(n){var i;return c(n)||8!=n.keyCode&&46!=n.keyCode||!t()?void 0:(i=e(),a.getDoc().execCommand("delete",!1,null),i(),n.preventDefault(),!1)}),V.bind(a.getDoc(),"cut",function(n){var i;!c(n)&&t()&&(i=e(),setTimeout(function(){i()},0))})}function y(){document.body.setAttribute("role","application")}function b(){a.on("keydown",function(e){if(!c(e)&&e.keyCode===U&&q.isCollapsed()&&0===q.getRng(!0).startOffset){var t=q.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}})}function x(){l()>7||(s("RespectVisibilityInDesign",!0),a.contentStyles.push(".mceHideBrInPre pre br {display: none}"),V.addClass(a.getBody(),"mceHideBrInPre"),X.addNodeFilter("pre",function(e){for(var t,i,o,r,a=e.length;a--;)for(t=e[a].getAll("br"),i=t.length;i--;)o=t[i],r=o.prev,r&&3===r.type&&"\n"!=r.value.charAt(r.value-1)?r.value+="\n":o.parent.insert(new n("#text",3),o,!0).value="\n"}),K.addNodeFilter("pre",function(e){for(var t,n,i,o,r=e.length;r--;)for(t=e[r].getAll("br"),n=t.length;n--;)i=t[n],o=i.prev,o&&3==o.type&&(o.value=o.value.replace(/\r?\n$/,""))}))}function w(){V.bind(a.getBody(),"mouseup",function(){var e,t=q.getNode();"IMG"==t.nodeName&&((e=V.getStyle(t,"width"))&&(V.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),V.setStyle(t,"width","")),(e=V.getStyle(t,"height"))&&(V.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),V.setStyle(t,"height","")))})}function C(){a.on("keydown",function(t){var n,i,o,r,s;if(!c(t)&&t.keyCode==e.BACKSPACE&&(n=q.getRng(),i=n.startContainer,o=n.startOffset,r=V.getRoot(),s=i,n.collapsed&&0===o)){for(;s&&s.parentNode&&s.parentNode.firstChild==s&&s.parentNode!=r;)s=s.parentNode;"BLOCKQUOTE"===s.tagName&&(a.formatter.toggle("blockquote",null,s),n=V.createRng(),n.setStart(i,0),n.setEnd(i,0),q.setRng(n))}})}function k(){function e(){a._refreshContentEditable(),s("StyleWithCSS",!1),s("enableInlineTableEditing",!1),Y.object_resizing||s("enableObjectResizing",!1)}Y.readonly||a.on("BeforeExecCommand MouseDown",e)}function S(){function e(){W(V.select("a"),function(e){var t=e.parentNode,n=V.getRoot();if(t.lastChild===e){for(;t&&!V.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}V.add(t,"br",{"data-mce-bogus":1})}})}a.on("SetContent ExecCommand",function(t){("setcontent"==t.type||"mceInsertLink"===t.command)&&e()})}function T(){Y.forced_root_block&&a.on("init",function(){s("DefaultParagraphSeparator",Y.forced_root_block)})}function $(){a.on("Undo Redo SetContent",function(e){e.initial||a.execCommand("mceRepaint")})}function E(){a.on("keydown",function(e){var t;c(e)||e.keyCode!=U||(t=a.getDoc().selection.createRange(),t&&t.item&&(e.preventDefault(),a.undoManager.beforeChange(),V.remove(t.item(0)),a.undoManager.add()))})}function _(){var e;l()>=10&&(e="",W("p div h1 h2 h3 h4 h5 h6".split(" "),function(t,n){e+=(n>0?",":"")+t+":empty"}),a.contentStyles.push(e+"{padding-right: 1px !important}"))}function A(){l()<9&&(X.addNodeFilter("noscript",function(e){for(var t,n,i=e.length;i--;)t=e[i],n=t.firstChild,n&&t.attr("data-mce-innertext",n.value)}),K.addNodeFilter("noscript",function(e){for(var t,o,r,a=e.length;a--;)t=e[a],o=e[a].firstChild,o?o.value=i.decode(o.value):(r=t.attributes.map["data-mce-innertext"],r&&(t.attr("data-mce-innertext",null),o=new n("#text",3),o.value=r,o.raw=!0,t.append(o)))}))}function N(){function e(e,t){var n=s.createTextRange();try{n.moveToPoint(e,t)}catch(i){n=null}return n}function t(t){var i;t.button?(i=e(t.x,t.y),i&&(i.compareEndPoints("StartToStart",o)>0?i.setEndPoint("StartToStart",o):i.setEndPoint("EndToEnd",o),i.select())):n()}function n(){var e=a.selection.createRange();o&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&o.select(),V.unbind(a,"mouseup",n),V.unbind(a,"mousemove",t),o=i=0}var i,o,r,a=V.doc,s=a.body;a.documentElement.unselectable=!0,V.bind(a,"mousedown contextmenu",function(s){if("HTML"===s.target.nodeName){if(i&&n(),r=a.documentElement,r.scrollHeight>r.clientHeight)return;i=1,o=e(s.x,s.y),o&&(V.bind(a,"mouseup",n),V.bind(a,"mousemove",t),V.getRoot().focus(),o.select())}})}function R(){a.on("keyup focusin mouseup",function(t){65==t.keyCode&&e.metaKeyPressed(t)||q.normalize()},!0)}function D(){a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function L(){a.inline||a.on("keydown",function(){document.activeElement==document.body&&a.getWin().focus()})}function M(){a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(e){"HTML"==e.target.nodeName&&(a.getBody().focus(),a.selection.normalize(),a.nodeChanged())}))}function P(){o.mac&&a.on("keydown",function(t){!e.metaKeyPressed(t)||37!=t.keyCode&&39!=t.keyCode||(t.preventDefault(),a.selection.getSel().modify("move",37==t.keyCode?"backward":"forward","word"))})}function O(){s("AutoUrlDetect",!1)}function B(){a.inline||a.on("focus blur beforegetcontent",function(){var e=a.dom.create("br");a.getBody().appendChild(e),e.parentNode.removeChild(e)},!0)}function I(){a.on("click",function(e){var t=e.target;do if("A"===t.tagName)return void e.preventDefault();while(t=t.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function F(){a.on("touchstart",function(e){var t,n,i,o;t=e.target,n=(new Date).getTime(),o=e.changedTouches,!o||o.length>1||(i=o[0],a.once("touchend",function(e){var o,r=e.changedTouches[0];(new Date).getTime()-n>500||Math.abs(i.clientX-r.clientX)>5||Math.abs(i.clientY-r.clientY)>5||(o={target:t},W("pageX pageY clientX clientY screenX screenY".split(" "),function(e){o[e]=r[e]}),o=a.fire("click",o),o.isDefaultPrevented()||(a.selection.placeCaretAt(r.clientX,r.clientY),a.nodeChanged()))}))})}function H(){a.on("init",function(){a.dom.bind(a.getBody(),"submit",function(e){e.preventDefault()})})}function z(){X.addNodeFilter("br",function(e){for(var t=e.length;t--;)"Apple-interchange-newline"==e[t].attr("class")&&e[t].remove()})}var W=r.each,U=e.BACKSPACE,j=e.DELETE,V=a.dom,q=a.selection,Y=a.settings,X=a.parser,K=a.serializer,G=o.gecko,Q=o.ie,J=o.webkit;C(),d(),R(),J&&(u(),h(),g(),T(),H(),b(),z(),F(),o.iOS?(L(),M(),I()):f()),Q&&o.ie<11&&(p(),y(),x(),w(),E(),_(),A(),N()),o.ie>=11&&(M(),B(),b()),o.ie&&(f(),O()),G&&(p(),m(),v(),k(),S(),$(),D(),P(),b())}}),/**
 * Observable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/Observable",["tinymce/util/EventDispatcher"],function(e){function t(t){return t._eventDispatcher||(t._eventDispatcher=new e({scope:t,toggleEvent:function(n,i){e.isNative(n)&&t.toggleNativeEvent&&t.toggleNativeEvent(n,i)}})),t._eventDispatcher}return{fire:function(e,n,i){var o=this;if(o.removed&&"remove"!==e)return n;if(n=t(o).fire(e,n,i),i!==!1&&o.parent)for(var r=o.parent();r&&!n.isPropagationStopped();)r.fire(e,n,!1),r=r.parent();return n},on:function(e,n,i){return t(this).on(e,n,i)},off:function(e,n){return t(this).off(e,n)},once:function(e,n){return t(this).once(e,n)},hasEventListeners:function(e){return t(this).has(e)}}}),/**
 * EditorObservable.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/EditorObservable",["tinymce/util/Observable","tinymce/dom/DOMUtils","tinymce/util/Tools"],function(e,t,n){function i(e,t){return"selectionchange"==t?e.getDoc():!e.inline&&/^mouse|click|contextmenu|drop|dragover|dragend/.test(t)?e.getDoc().documentElement:e.settings.event_root?(e.eventRoot||(e.eventRoot=a.select(e.settings.event_root)[0]),e.eventRoot):e.getBody()}function o(e,t){var n,o=i(e,t);if(e.delegates||(e.delegates={}),!e.delegates[t])if(e.settings.event_root){if(r||(r={},e.editorManager.on("removeEditor",function(){var t;if(!e.editorManager.activeEditor&&r){for(t in r)e.dom.unbind(i(e,t));r=null}})),r[t])return;n=function(n){for(var i=n.target,o=e.editorManager.editors,r=o.length;r--;){var s=o[r].getBody();(s===i||a.isChildOf(i,s))&&(o[r].hidden||o[r].fire(t,n))}},r[t]=n,a.bind(o,t,n)}else n=function(n){e.hidden||e.fire(t,n)},a.bind(o,t,n),e.delegates[t]=n}var r,a=t.DOM,s={bindPendingEventDelegates:function(){var e=this;n.each(e._pendingNativeEvents,function(t){o(e,t)})},toggleNativeEvent:function(e,t){var n=this;n.settings.readonly||"focus"!=e&&"blur"!=e&&(t?n.initialized?o(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&(n.dom.unbind(i(n,e),e,n.delegates[e]),delete n.delegates[e]))},unbindAllNativeEvents:function(){var e,t=this;if(t.delegates){for(e in t.delegates)t.dom.unbind(i(t,e),e,t.delegates[e]);delete t.delegates}t.inline||(t.getBody().onload=null,t.dom.unbind(t.getWin()),t.dom.unbind(t.getDoc())),t.dom.unbind(t.getBody()),t.dom.unbind(t.getContainer())}};return s=n.extend({},e,s)}),/**
 * Shortcuts.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/Shortcuts",["tinymce/util/Tools","tinymce/Env"],function(e,t){var n=e.each,i=e.explode,o={f9:120,f10:121,f11:122};return function(r){var a=this,s={};r.on("keyup keypress keydown",function(e){(e.altKey||e.ctrlKey||e.metaKey)&&!e.isDefaultPrevented()&&n(s,function(n){var i=t.mac?e.metaKey:e.ctrlKey;if(n.ctrl==i&&n.alt==e.altKey&&n.shift==e.shiftKey)return e.keyCode==n.keyCode||e.charCode&&e.charCode==n.charCode?(e.preventDefault(),"keydown"==e.type&&n.func.call(n.scope),!0):void 0})}),a.add=function(t,a,l,c){var u;return u=l,"string"==typeof l?l=function(){r.execCommand(u,!1,null)}:e.isArray(u)&&(l=function(){r.execCommand(u[0],u[1],u[2])}),n(i(t.toLowerCase()),function(e){var t={func:l,scope:c||r,desc:r.translate(a),alt:!1,ctrl:!1,shift:!1};n(i(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":t[e]=!0;break;default:/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=o[e]||e.toUpperCase().charCodeAt(0))}}),s[(t.ctrl?"ctrl":"")+","+(t.alt?"alt":"")+","+(t.shift?"shift":"")+","+t.keyCode]=t}),!0}}}),/**
 * Editor.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/Editor",["tinymce/dom/DOMUtils","tinymce/dom/DomQuery","tinymce/AddOnManager","tinymce/NodeChange","tinymce/html/Node","tinymce/dom/Serializer","tinymce/html/Serializer","tinymce/dom/Selection","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/dom/ScriptLoader","tinymce/dom/EventUtils","tinymce/WindowManager","tinymce/html/Schema","tinymce/html/DomParser","tinymce/util/Quirks","tinymce/Env","tinymce/util/Tools","tinymce/EditorObservable","tinymce/Shortcuts"],function(e,n,i,o,r,a,s,l,c,u,d,f,h,p,m,g,v,y,b,x,w,C,k,S){function T(e,t,o){var r,a,s=this;r=s.documentBaseUrl=o.documentBaseURL,a=o.baseURI,s.settings=t=A({id:e,theme:"modern",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:r,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,padd_empty_editor:!0,render_ui:!0,indentation:"30px",inline_styles:!0,convert_fonts_to_spans:!0,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:!0,entity_encoding:"named",url_converter:s.convertURL,url_converter_scope:s,ie7_compat:!0},t),i.language=t.language||"en",i.languageLoad=t.language_load,i.baseURL=o.baseURL,s.id=t.id=e,s.isNotDirty=!0,s.plugins={},s.documentBaseURI=new p(t.document_base_url||r,{base_uri:a}),s.baseURI=a,s.contentCSS=[],s.contentStyles=[],s.shortcuts=new S(s),s.execCommands={},s.queryStateCommands={},s.queryValueCommands={},s.loadedCSS={},t.target&&(s.targetElm=t.target),s.suffix=o.suffix,s.editorManager=o,s.inline=t.inline,o.fire("SetupEditor",s),s.execCallback("setup",s),s.$=n.overrideDefaults(function(){return{context:s.inline?s.getBody():s.getDoc(),element:s.getBody()}})}var $=e.DOM,E=i.ThemeManager,_=i.PluginManager,A=C.extend,N=C.each,R=C.explode,D=C.inArray,L=C.trim,M=C.resolve,P=g.Event,O=w.gecko,B=w.ie;return T.prototype={render:function(){function e(){$.unbind(window,"ready",e),n.render()}function t(){var e=m.ScriptLoader;if(i.language&&"en"!=i.language&&!i.language_url&&(i.language_url=n.editorManager.baseURL+"/langs/"+i.language+".js"),i.language_url&&e.add(i.language_url),i.theme&&"function"!=typeof i.theme&&"-"!=i.theme.charAt(0)&&!E.urls[i.theme]){var t=i.theme_url;t=t?n.documentBaseURI.toAbsolute(t):"themes/"+i.theme+"/theme"+r+".js",E.load(i.theme,t)}C.isArray(i.plugins)&&(i.plugins=i.plugins.join(" ")),N(i.external_plugins,function(e,t){_.load(t,e),i.plugins+=" "+t}),N(i.plugins.split(/[ ,]/),function(e){if(e=L(e),e&&!_.urls[e])if("-"==e.charAt(0)){e=e.substr(1,e.length);var t=_.dependencies(e);N(t,function(e){var t={prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"};e=_.createUrl(t,e),_.load(e.resource,e)})}else _.load(e,{prefix:"plugins/",resource:e,suffix:"/plugin"+r+".js"})}),e.loadQueue(function(){n.removed||n.init()})}var n=this,i=n.settings,o=n.id,r=n.suffix;if(!P.domLoaded)return void $.bind(window,"ready",e);if(n.getElement()&&w.contentEditable){i.inline?n.inline=!0:(n.orgVisibility=n.getElement().style.visibility,n.getElement().style.visibility="hidden");var a=n.getElement().form||$.getParent(o,"form");a&&(n.formElement=a,i.hidden_input&&!/TEXTAREA|INPUT/i.test(n.getElement().nodeName)&&($.insertAfter($.create("input",{type:"hidden",name:o}),o),n.hasHiddenInput=!0),n.formEventDelegate=function(e){n.fire(e.type,e)},$.bind(a,"submit reset",n.formEventDelegate),n.on("reset",function(){n.setContent(n.startContent,{format:"raw"})}),!i.submit_patch||a.submit.nodeType||a.submit.length||a._mceOldSubmit||(a._mceOldSubmit=a.submit,a.submit=function(){return n.editorManager.triggerSave(),n.isNotDirty=!0,a._mceOldSubmit(a)})),n.windowManager=new v(n),"xml"==i.encoding&&n.on("GetContent",function(e){e.save&&(e.content=$.encode(e.content))}),i.add_form_submit_trigger&&n.on("submit",function(){n.initialized&&n.save()}),i.add_unload_trigger&&(n._beforeUnload=function(){!n.initialized||n.destroyed||n.isHidden()||n.save({format:"raw",no_events:!0,set_dirty:!1})},n.editorManager.on("BeforeUnload",n._beforeUnload)),t()}},init:function(){function e(t){var n,i,o=_.get(t);n=_.urls[t]||f.documentBaseUrl.replace(/\/$/,""),t=L(t),o&&-1===D(m,t)&&(N(_.dependencies(t),function(t){e(t)}),i=new o(f,n,f.$),f.plugins[t]=i,i.init&&(i.init(f,n),m.push(t)))}var t,n,i,o,r,a,s,l,c,u,d,f=this,h=f.settings,p=f.getElement(),m=[];if(f.rtl=this.editorManager.i18n.rtl,f.editorManager.add(f),h.aria_label=h.aria_label||$.getAttrib(p,"aria-label",f.getLang("aria.rich_text_area")),h.theme&&("function"!=typeof h.theme?(h.theme=h.theme.replace(/-/,""),a=E.get(h.theme),f.theme=new a(f,E.urls[h.theme]),f.theme.init&&f.theme.init(f,E.urls[h.theme]||f.documentBaseUrl.replace(/\/$/,""),f.$)):f.theme=h.theme),N(h.plugins.replace(/\-/g,"").split(/[ ,]/),e),h.render_ui&&f.theme&&(f.orgDisplay=p.style.display,"function"!=typeof h.theme?(t=h.width||p.style.width||p.offsetWidth,n=h.height||p.style.height||p.offsetHeight,i=h.min_height||100,u=/^[0-9\.]+(|px)$/i,u.test(""+t)&&(t=Math.max(parseInt(t,10),100)),u.test(""+n)&&(n=Math.max(parseInt(n,10),i)),r=f.theme.renderUI({targetNode:p,width:t,height:n,deltaWidth:h.delta_width,deltaHeight:h.delta_height}),h.content_editable||(n=(r.iframeHeight||n)+("number"==typeof n?r.deltaHeight||0:""),i>n&&(n=i))):(r=h.theme(f,p),r.editorContainer.nodeType&&(r.editorContainer=r.editorContainer.id=r.editorContainer.id||f.id+"_parent"),r.iframeContainer.nodeType&&(r.iframeContainer=r.iframeContainer.id=r.iframeContainer.id||f.id+"_iframecontainer"),n=r.iframeHeight||p.offsetHeight),f.editorContainer=r.editorContainer),h.content_css&&N(R(h.content_css),function(e){f.contentCSS.push(f.documentBaseURI.toAbsolute(e))}),h.content_style&&f.contentStyles.push(h.content_style),h.content_editable)return p=o=r=null,f.initContentBody();for(f.iframeHTML=h.doctype+"<html><head>",h.document_base_url!=f.documentBaseUrl&&(f.iframeHTML+='<base href="'+f.documentBaseURI.getURI()+'" />'),!w.caretAfter&&h.ie7_compat&&(f.iframeHTML+='<meta http-equiv="X-UA-Compatible" content="IE=7" />'),f.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',f.iframeHTML+='<style type="text/css">.mce-content-body img {max-width:100%;height:100%; }</style>',d=0;d<f.contentCSS.length;d++){var g=f.contentCSS[d];f.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+g+'" />',f.loadedCSS[g]=!0}l=h.body_id||"tinymce",-1!=l.indexOf("=")&&(l=f.getParam("body_id","","hash"),l=l[f.id]||l),c=h.body_class||"",-1!=c.indexOf("=")&&(c=f.getParam("body_class","","hash"),c=c[f.id]||""),h.content_security_policy&&(f.iframeHTML+='<meta http-equiv="Content-Security-Policy" content="'+h.content_security_policy+'" />'),f.iframeHTML+='</head><body id="'+l+'" class="mce-content-body '+c+'" data-id="'+f.id+'"><br></body></html>';var v='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+f.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody(true);})()';document.domain!=location.hostname&&(s=v);var y=$.create("iframe",{id:f.id+"_ifr",frameBorder:"0",allowTransparency:"true",title:f.editorManager.translate("Rich Text Area. Press ALT-F9 for menu. Press ALT-F10 for toolbar. Press ALT-0 for help"),style:{width:"100%",height:n,display:"block"}});if(y.onload=function(){y.onload=null,f.fire("load")},$.setAttrib(y,"src",s||'javascript:""'),f.contentAreaContainer=r.iframeContainer,f.iframeElement=y,o=$.add(r.iframeContainer,y),B)try{f.getDoc()}catch(b){o.src=s=v}r.editorContainer&&($.get(r.editorContainer).style.display=f.orgDisplay,f.hidden=$.isHidden(r.editorContainer)),f.getElement().style.display="none",$.setAttrib(f.id,"aria-hidden",!0),s||f.initContentBody(),p=o=r=null},initContentBody:function(t){var n,i,s=this,p=s.settings,m=s.getElement(),g=s.getDoc();p.inline||(s.getElement().style.visibility=s.orgVisibility),t||p.content_editable||(g.open(),g.write(s.iframeHTML),g.close()),p.content_editable&&(s.on("remove",function(){var e=this.getBody();$.removeClass(e,"mce-content-body"),$.removeClass(e,"mce-edit-focus"),$.setAttrib(e,"contentEditable",null)}),$.addClass(m,"mce-content-body"),s.contentDocument=g=p.content_document||document,s.contentWindow=p.content_window||window,s.bodyElement=m,p.content_document=p.content_window=null,p.root_name=m.nodeName.toLowerCase()),n=s.getBody(),n.disabled=!0,p.readonly||(s.inline&&"static"==$.getStyle(n,"position",!0)&&(n.style.position="relative"),n.contentEditable=s.getParam("content_editable_state",!0)),n.disabled=!1,s.schema=new y(p),s.dom=new e(g,{keep_values:!0,url_converter:s.convertURL,url_converter_scope:s,hex_colors:p.force_hex_style_colors,class_filter:p.class_filter,update_styles:!0,root_element:s.inline?s.getBody():null,collect:p.content_editable,schema:s.schema,onSetAttrib:function(e){s.fire("SetAttrib",e)}}),s.parser=new b(p,s.schema),s.parser.addAttributeFilter("src,href,style,tabindex",function(e,t){for(var n,i,o,r=e.length,a=s.dom;r--;)n=e[r],i=n.attr(t),o="data-mce-"+t,n.attributes.map[o]||("style"===t?(i=a.serializeStyle(a.parseStyle(i),n.name),i.length||(i=null),n.attr(o,i),n.attr(t,i)):"tabindex"===t?(n.attr(o,i),n.attr(t,null)):n.attr(o,s.convertURL(i,t,n.name)))}),s.parser.addNodeFilter("script",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("type","mce-"+(t.attr("type")||"no/type"))}),s.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),s.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(e){for(var t,n=e.length,i=s.schema.getNonEmptyElements();n--;)t=e[n],t.isEmpty(i)&&(t.append(new r("br",1)).shortEnded=!0)}),s.serializer=new a(p,s),s.selection=new l(s.dom,s.getWin(),s.serializer,s),s.formatter=new c(s),s.undoManager=new u(s),s.forceBlocks=new f(s),s.enterKey=new d(s),s.editorCommands=new h(s),s._nodeChangeDispatcher=new o(s),s.fire("PreInit"),p.browser_spellcheck||p.gecko_spellcheck||(g.body.spellcheck=!1,$.setAttrib(n,"spellcheck","false")),s.fire("PostRender"),s.quirks=new x(s),p.directionality&&(n.dir=p.directionality),p.nowrap&&(n.style.whiteSpace="nowrap"),p.protect&&s.on("BeforeSetContent",function(e){N(p.protect,function(t){e.content=e.content.replace(t,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),s.on("SetContent",function(){s.addVisual(s.getBody())}),p.padd_empty_editor&&s.on("PostProcess",function(e){e.content=e.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),s.load({initial:!0,format:"html"}),s.startContent=s.getContent({format:"raw"}),s.initialized=!0,s.bindPendingEventDelegates(),s.fire("init"),s.focus(!0),s.nodeChanged({initial:!0}),s.execCallback("init_instance_callback",s),s.contentStyles.length>0&&(i="",N(s.contentStyles,function(e){i+=e+"\r\n"}),s.dom.addStyle(i)),N(s.contentCSS,function(e){s.loadedCSS[e]||(s.dom.loadCSS(e),s.loadedCSS[e]=!0)}),p.auto_focus&&setTimeout(function(){var e;e=p.auto_focus===!0?s:s.editorManager.get(p.auto_focus),e.focus()},100),m=g=n=null},focus:function(e){var t,n,i,o=this,r=o.selection,a=o.settings.content_editable,s=o.getDoc();if(!e){if(t=r.getRng(),t.item&&(n=t.item(0)),o._refreshContentEditable(),a||(w.opera||o.getBody().focus(),o.getWin().focus()),O||a){if(i=o.getBody(),i.setActive)try{i.setActive()}catch(l){i.focus()}else i.focus();a&&r.normalize()}n&&n.ownerDocument==s&&(t=s.body.createControlRange(),t.addElement(n),t.select())}o.editorManager.setActive(o)},execCallback:function(e){var t,n=this,i=n.settings[e];if(i)return n.callbackLookup&&(t=n.callbackLookup[e])&&(i=t.func,t=t.scope),"string"==typeof i&&(t=i.replace(/\.\w+$/,""),t=t?M(t):0,i=M(i),n.callbackLookup=n.callbackLookup||{},n.callbackLookup[e]={func:i,scope:t}),i.apply(t||n,Array.prototype.slice.call(arguments,1))},translate:function(e){var t=this.settings.language||"en",n=this.editorManager.i18n;return e?n.data[t+"."+e]||e.replace(/\{\#([^\}]+)\}/g,function(e,i){return n.data[t+"."+i]||"{#"+i+"}"}):""},getLang:function(e,n){return this.editorManager.i18n.data[(this.settings.language||"en")+"."+e]||(n!==t?n:"{#"+e+"}")},getParam:function(e,t,n){var i,o=e in this.settings?this.settings[e]:t;return"hash"===n?(i={},"string"==typeof o?N(o.indexOf("=")>0?o.split(/[;,](?![^=;,]*(?:[;,]|$))/):o.split(","),function(e){e=e.split("="),e.length>1?i[L(e[0])]=L(e[1]):i[L(e[0])]=L(e)}):i=o,i):o},nodeChanged:function(e){this._nodeChangeDispatcher.nodeChanged(e)},addButton:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),t.text||t.icon||(t.icon=e),n.buttons=n.buttons||{},t.tooltip=t.tooltip||t.title,n.buttons[e]=t},addMenuItem:function(e,t){var n=this;t.cmd&&(t.onclick=function(){n.execCommand(t.cmd)}),n.menuItems=n.menuItems||{},n.menuItems[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,i){this.shortcuts.add(e,t,n,i)},execCommand:function(e,t,n,i){var o,r=this,a=0;if(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(e)||i&&i.skip_focus||r.focus(),i=A({},i),i=r.fire("BeforeExecCommand",{command:e,ui:t,value:n}),i.isDefaultPrevented())return!1;if((o=r.execCommands[e])&&o.func.call(o.scope,t,n)!==!0)return r.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(N(r.plugins,function(i){return i.execCommand&&i.execCommand(e,t,n)?(r.fire("ExecCommand",{command:e,ui:t,value:n}),a=!0,!1):void 0}),a)return a;if(r.theme&&r.theme.execCommand&&r.theme.execCommand(e,t,n))return r.fire("ExecCommand",{command:e,ui:t,value:n}),!0;if(r.editorCommands.execCommand(e,t,n))return r.fire("ExecCommand",{command:e,ui:t,value:n}),!0;try{a=r.getDoc().execCommand(e,t,n)}catch(s){}return a?(r.fire("ExecCommand",{command:e,ui:t,value:n}),!0):!1},queryCommandState:function(e){var t,n,i=this;if(!i._isHidden()){if((t=i.queryStateCommands[e])&&(n=t.func.call(t.scope),n===!0||n===!1))return n;if(n=i.editorCommands.queryCommandState(e),-1!==n)return n;try{return i.getDoc().queryCommandState(e)}catch(o){}}},queryCommandValue:function(e){var n,i,o=this;if(!o._isHidden()){if((n=o.queryValueCommands[e])&&(i=n.func.call(n.scope),i!==!0))return i;if(i=o.editorCommands.queryCommandValue(e),i!==t)return i;try{return o.getDoc().queryCommandValue(e)}catch(r){}}},show:function(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable=!0:($.show(e.getContainer()),$.hide(e.id)),e.load(),e.fire("show"))},hide:function(){var e=this,t=e.getDoc();e.hidden||(B&&t&&!e.inline&&t.execCommand("SelectAll"),e.save(),e.inline?(e.getBody().contentEditable=!1,e==e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):($.hide(e.getContainer()),$.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.fire("hide"))},isHidden:function(){return!!this.hidden},setProgressState:function(e,t){this.fire("ProgressState",{state:e,time:t})},load:function(e){var n,i=this,o=i.getElement();return o?(e=e||{},e.load=!0,n=i.setContent(o.value!==t?o.value:o.innerHTML,e),e.element=o,e.no_events||i.fire("LoadContent",e),e.element=o=null,n):void 0},save:function(e){var t,n,i=this,o=i.getElement();if(o&&i.initialized)return e=e||{},e.save=!0,e.element=o,t=e.content=i.getContent(e),e.no_events||i.fire("SaveContent",e),t=e.content,/TEXTAREA|INPUT/i.test(o.nodeName)?o.value=t:(i.inline||(o.innerHTML=t),(n=$.getParent(i.id,"form"))&&N(n.elements,function(e){return e.name==i.id?(e.value=t,!1):void 0})),e.element=o=null,e.set_dirty!==!1&&(i.isNotDirty=!0),t},setContent:function(e,t){var n,i=this,o=i.getBody();return t=t||{},t.format=t.format||"html",t.set=!0,t.content=e,t.no_events||i.fire("BeforeSetContent",t),e=t.content,0===e.length||/^\s+$/.test(e)?(n=i.settings.forced_root_block,n&&i.schema.isValidChild(o.nodeName.toLowerCase(),n.toLowerCase())?(e=B&&11>B?"":'<br data-mce-bogus="1">',e=i.dom.createHTML(n,i.settings.forced_root_block_attrs,e)):B||(e='<br data-mce-bogus="1">'),i.dom.setHTML(o,e),i.fire("SetContent",t)):("raw"!==t.format&&(e=new s({},i.schema).serialize(i.parser.parse(e,{isRootContent:!0}))),t.content=L(e),i.dom.setHTML(o,t.content),t.no_events||i.fire("SetContent",t)),t.content},getContent:function(e){var t,n=this,i=n.getBody();return e=e||{},e.format=e.format||"html",e.get=!0,e.getInner=!0,e.no_events||n.fire("BeforeGetContent",e),t="raw"==e.format?i.innerHTML:"text"==e.format?i.innerText||i.textContent:n.serializer.serialize(i,e),"text"!=e.format?e.content=L(t):e.content=t,e.no_events||n.fire("GetContent",e),e.content},insertContent:function(e,t){t&&(e=A({content:e},t)),this.execCommand("mceInsertContent",!1,e)},isDirty:function(){return!this.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=$.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return this.targetElm||(this.targetElm=$.get(this.id)),this.targetElm},getWin:function(){var e,t=this;return t.contentWindow||(e=t.iframeElement,e&&(t.contentWindow=e.contentWindow)),t.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin(),e&&(t.contentDocument=e.document)),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var i=this,o=i.settings;return o.urlconverter_callback?i.execCallback("urlconverter_callback",e,n,!0,t):!o.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")||0===e.length?e:o.relative_urls?i.documentBaseURI.toRelative(e):e=i.documentBaseURI.toAbsolute(e,o.remove_script_host)},addVisual:function(e){var n,i=this,o=i.settings,r=i.dom;e=e||i.getBody(),i.hasVisual===t&&(i.hasVisual=o.visual),N(r.select("table,a",e),function(e){var t;switch(e.nodeName){case"TABLE":return n=o.visual_table_class||"mce-item-table",t=r.getAttrib(e,"border"),void(t&&"0"!=t||!i.hasVisual?r.removeClass(e,n):r.addClass(e,n));case"A":return void(r.getAttrib(e,"href",!1)||(t=r.getAttrib(e,"name")||e.id,n=o.visual_anchor_class||"mce-item-anchor",t&&i.hasVisual?r.addClass(e,n):r.removeClass(e,n)))}}),i.fire("VisualAid",{element:e,hasVisual:i.hasVisual})},remove:function(){var e=this;e.removed||(e.save(),e.removed=1,e.unbindAllNativeEvents(),e.hasHiddenInput&&$.remove(e.getElement().nextSibling),e.inline||(B&&10>B&&e.getDoc().execCommand("SelectAll",!1,null),$.setStyle(e.id,"display",e.orgDisplay),e.getBody().onload=null),e.fire("remove"),e.editorManager.remove(e),$.remove(e.getContainer()),e.destroy())},destroy:function(e){var t,n=this;if(!n.destroyed){if(!e&&!n.removed)return void n.remove();e||(n.editorManager.off("beforeunload",n._beforeUnload),n.theme&&n.theme.destroy&&n.theme.destroy(),n.selection.destroy(),n.dom.destroy()),t=n.formElement,t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,t._mceOldSubmit=null),$.unbind(t,"submit reset",n.formEventDelegate)),n.contentAreaContainer=n.formElement=n.container=n.editorContainer=null,n.bodyElement=n.contentDocument=n.contentWindow=null,n.iframeElement=n.targetElm=null,n.selection&&(n.selection=n.selection.win=n.selection.dom=n.selection.dom.doc=null),n.destroyed=1}},_refreshContentEditable:function(){var e,t,n=this;n._isHidden()&&(e=n.getBody(),t=e.parentNode,t.removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return O?(e=this.selection.getSel(),!e||!e.rangeCount||0===e.rangeCount):0}},A(T.prototype,k),T}),/**
 * I18n.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/I18n",[],function(){var e={};return{rtl:!1,add:function(t,n){for(var i in n)e[i]=n[i];this.rtl=this.rtl||"rtl"===e._dir},translate:function(t){if("undefined"==typeof t)return t;if("string"!=typeof t&&t.raw)return t.raw;if(t.push){var n=t.slice(1);t=(e[t[0]]||t[0]).replace(/\{([^\}]+)\}/g,function(e,t){return n[t]})}return e[t]||t},data:e}}),/**
 * FocusManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/FocusManager",["tinymce/dom/DOMUtils","tinymce/Env"],function(e,t){function n(e){function s(){try{return document.activeElement}catch(e){return document.body}}function l(e,t){if(t&&t.startContainer){if(!e.isChildOf(t.startContainer,e.getRoot())||!e.isChildOf(t.endContainer,e.getRoot()))return;return{startContainer:t.startContainer,startOffset:t.startOffset,endContainer:t.endContainer,endOffset:t.endOffset}}return t}function c(e,t){var n;return t.startContainer?(n=e.getDoc().createRange(),n.setStart(t.startContainer,t.startOffset),n.setEnd(t.endContainer,t.endOffset)):n=t,n}function u(e){return!!a.getParent(e,n.isEditorUIElement)}function d(n){var d=n.editor;d.on("init",function(){(d.inline||t.ie)&&("onbeforedeactivate"in document&&t.ie<9?d.dom.bind(d.getBody(),"beforedeactivate",function(e){if(e.target==d.getBody())try{d.lastRng=d.selection.getRng()}catch(t){}}):d.on("nodechange mouseup keyup",function(e){var t=s();"nodechange"==e.type&&e.selectionChange||(t&&t.id==d.id+"_ifr"&&(t=d.getBody()),d.dom.isChildOf(t,d.getBody())&&(d.lastRng=d.selection.getRng()))}),t.webkit&&!i&&(i=function(){var t=e.activeEditor;if(t&&t.selection){var n=t.selection.getRng();n&&!n.collapsed&&(d.lastRng=n)}},a.bind(document,"selectionchange",i)))}),d.on("setcontent",function(){d.lastRng=null}),d.on("mousedown",function(){d.selection.lastFocusBookmark=null}),d.on("focusin",function(){var t=e.focusedEditor;d.selection.lastFocusBookmark&&(d.selection.setRng(c(d,d.selection.lastFocusBookmark)),d.selection.lastFocusBookmark=null),t!=d&&(t&&t.fire("blur",{focusedEditor:d}),e.setActive(d),e.focusedEditor=d,d.fire("focus",{blurredEditor:t}),d.focus(!0)),d.lastRng=null}),d.on("focusout",function(){window.setTimeout(function(){var t=e.focusedEditor;u(s())||t!=d||(d.fire("blur",{focusedEditor:null}),e.focusedEditor=null,d.selection&&(d.selection.lastFocusBookmark=null))},0)}),o||(o=function(t){var n=e.activeEditor;n&&t.target.ownerDocument==document&&(n.selection&&t.target!=n.getBody()&&(n.selection.lastFocusBookmark=l(n.dom,n.lastRng)),t.target==document.body||u(t.target)||e.focusedEditor!=n||(n.fire("blur",{focusedEditor:null}),e.focusedEditor=null))},a.bind(document,"focusin",o)),d.inline&&!r&&(r=function(t){var n=e.activeEditor;if(n.inline&&!n.dom.isChildOf(t.target,n.getBody())){var i=n.selection.getRng();i.collapsed||(n.lastRng=i)}},a.bind(document,"mouseup",r))}function f(t){e.focusedEditor==t.editor&&(e.focusedEditor=null),e.activeEditor||(a.unbind(document,"selectionchange",i),a.unbind(document,"focusin",o),a.unbind(document,"mouseup",r),i=o=r=null)}e.on("AddEditor",d),e.on("RemoveEditor",f)}var i,o,r,a=e.DOM;return n.isEditorUIElement=function(e){return-1!==e.className.toString().indexOf("mce-")},n}),/**
 * EditorManager.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/EditorManager",["tinymce/Editor","tinymce/dom/DomQuery","tinymce/dom/DOMUtils","tinymce/util/URI","tinymce/Env","tinymce/util/Tools","tinymce/util/Observable","tinymce/util/I18n","tinymce/FocusManager"],function(e,t,n,i,o,r,a,s,l){function c(e){var t,n=f.editors;delete n[e.id];for(var i=0;i<n.length;i++)if(n[i]==e){n.splice(i,1),t=!0;break}return f.activeEditor==e&&(f.activeEditor=n[0]),f.focusedEditor==e&&(f.focusedEditor=null),t}function u(e){return e&&!(e.getContainer()||e.getBody()).parentNode&&(c(e),e.unbindAllNativeEvents(),e.destroy(!0),e=null),e}var d,f,h=n.DOM,p=r.explode,m=r.each,g=r.extend,v=0;return f={$:t,majorVersion:"4",minorVersion:"1.6",releaseDate:"2014-10-08",editors:[],i18n:s,activeEditor:null,setup:function(){var e,t,n,o,r=this,a="";if(t=document.location.href,/^[^:]+:\/\/\/?[^\/]+\//.test(t)&&(t=t.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(t)||(t+="/")),n=window.tinymce||window.tinyMCEPreInit)e=n.base||n.baseURL,a=n.suffix;else{for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++)if(o=s[c].src,/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(o)){-1!=o.indexOf(".min")&&(a=".min"),e=o.substring(0,o.lastIndexOf("/"));break}!e&&document.currentScript&&(o=document.currentScript.src,-1!=o.indexOf(".min")&&(a=".min"),e=o.substring(0,o.lastIndexOf("/")))}r.baseURL=new i(t).toAbsolute(e),r.documentBaseURL=t,r.baseURI=new i(r.baseURL),r.suffix=a,r.focusManager=new l(r)},init:function(t){function n(e){var t=e.id;return t||(t=e.name,t=t&&!h.get(t)?e.name:h.uniqueId(),e.setAttribute("id",t)),t}function i(t,n,i){if(!u(s.get(t))){var o=new e(t,n,s);o.targetElm=o.targetElm||i,l.push(o),o.render()}}function o(e){var n=t[e];if(n)return n.apply(s,Array.prototype.slice.call(arguments,2))}function r(e,t){return t.constructor===RegExp?t.test(e.className):h.hasClass(e,t)}function a(){var e,s;if(h.unbind(window,"ready",a),o("onpageload"),t.types)return void m(t.types,function(e){m(h.select(e.selector),function(o){i(n(o),g({},t,e),o)})});if(t.selector)return void m(h.select(t.selector),function(e){i(n(e),t,e)});switch(t.target&&i(n(t.target),t),t.mode){case"exact":e=t.elements||"",e.length>0&&m(p(e),function(e){var n;(n=h.get(e))?i(e,t,n):m(document.forms,function(n){m(n.elements,function(n){n.name===e&&(e="mce_editor_"+v++,h.setAttrib(n,"id",e),i(e,t,n))})})});break;case"textareas":case"specific_textareas":m(h.select("textarea"),function(e){t.editor_deselector&&r(e,t.editor_deselector)||(!t.editor_selector||r(e,t.editor_selector))&&i(n(e),t,e)})}t.oninit&&(e=s=0,m(l,function(t){s++,t.initialized?e++:t.on("init",function(){e++,e==s&&o("oninit")}),e==s&&o("oninit")}))}var s=this,l=[];s.settings=t,h.bind(window,"ready",a)},get:function(e){return arguments.length?e in this.editors?this.editors[e]:null:this.editors},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t.activeEditor=e,t.fire("AddEditor",{editor:e}),d||(d=function(){t.fire("BeforeUnload")},h.bind(window,"beforeunload",d)),e},createEditor:function(t,n){return this.add(new e(t,n,this))},remove:function(e){var t,n,i=this,o=i.editors;{if(e)return"string"==typeof e?(e=e.selector||e,void m(h.select(e),function(e){n=o[e.id],n&&i.remove(n)})):(n=e,o[n.id]?(c(n)&&i.fire("RemoveEditor",{editor:n}),o.length||h.unbind(window,"beforeunload",d),n.remove(),n):null);for(t=o.length-1;t>=0;t--)i.remove(o[t])}},execCommand:function(t,n,i){var o=this,r=o.get(i);switch(t){case"mceAddEditor":return o.get(i)||new e(i,o.settings,o).render(),!0;case"mceRemoveEditor":return r&&r.remove(),!0;case"mceToggleEditor":return r?(r.isHidden()?r.show():r.hide(),!0):(o.execCommand("mceAddEditor",0,i),!0)}return o.activeEditor?o.activeEditor.execCommand(t,n,i):!1},triggerSave:function(){m(this.editors,function(e){e.save()})},addI18n:function(e,t){s.add(e,t)},translate:function(e){return s.translate(e)},setActive:function(e){var t=this.activeEditor;this.activeEditor!=e&&(t&&t.fire("deactivate",{relatedTarget:e}),e.fire("activate",{relatedTarget:t})),this.activeEditor=e}},g(f,a),f.setup(),window.tinymce=window.tinyMCE=f,f}),/**
 * LegacyInput.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/LegacyInput",["tinymce/EditorManager","tinymce/util/Tools"],function(e,t){var n=t.each,i=t.explode;e.on("AddEditor",function(e){var t=e.editor;t.on("preInit",function(){function e(e,t){n(t,function(t,n){t&&s.setStyle(e,n,t)}),s.rename(e,"span")}function o(e){s=t.dom,l.convert_fonts_to_spans&&n(s.select("font,u,strike",e.node),function(e){r[e.nodeName.toLowerCase()](s,e)})}var r,a,s,l=t.settings;l.inline_styles&&(a=i(l.font_size_legacy_values),r={font:function(t,n){e(n,{backgroundColor:n.style.backgroundColor,color:n.color,fontFamily:n.face,fontSize:a[parseInt(n.size,10)-1]})},u:function(t,n){e(n,{textDecoration:"underline"})},strike:function(t,n){e(n,{textDecoration:"line-through"})}},t.on("PreProcess SetContent",o))})})}),/**
 * XHR.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/XHR",["tinymce/util/Observable","tinymce/util/Tools"],function(e,t){var n={send:function(e){function t(){!e.async||4==i.readyState||o++>1e4?(e.success&&1e4>o&&200==i.status?e.success.call(e.success_scope,""+i.responseText,i,e):e.error&&e.error.call(e.error_scope,o>1e4?"TIMED_OUT":"GENERAL",i,e),i=null):setTimeout(t,10)}var i,o=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=e.async===!1?!1:!0,e.data=e.data||"",i=new XMLHttpRequest){if(i.overrideMimeType&&i.overrideMimeType(e.content_type),i.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.crossDomain&&(i.withCredentials=!0),e.content_type&&i.setRequestHeader("Content-Type",e.content_type),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i=n.fire("beforeSend",{xhr:i,settings:e}).xhr,i.send(e.data),!e.async)return t();setTimeout(t,10)}}};return t.extend(n,e),n}),/**
 * JSON.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/JSON",[],function(){function e(t,n){var i,o,r,a;if(n=n||'"',null===t)return"null";if(r=typeof t,"string"==r)return o="\bb	t\nn\ff\rr\"\"''\\\\",n+t.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,t){return'"'===n&&"'"===e?e:(i=o.indexOf(t),i+1?"\\"+o.charAt(i+1):(e=t.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+n;if("object"==r){if(t.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(t)){for(i=0,o="[";i<t.length;i++)o+=(i>0?",":"")+e(t[i],n);return o+"]"}o="{";for(a in t)t.hasOwnProperty(a)&&(o+="function"!=typeof t[a]?(o.length>1?","+n:n)+a+n+":"+e(t[a],n):"");return o+"}"}return""+t}return{serialize:e,parse:function(e){try{return window[String.fromCharCode(101)+"val"]("("+e+")")}catch(t){}}}}),/**
 * JSONRequest.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/JSONRequest",["tinymce/util/JSON","tinymce/util/XHR","tinymce/util/Tools"],function(e,t,n){function i(e){this.settings=o({},e),this.count=0}var o=n.extend;return i.sendRPC=function(e){return(new i).send(e)},i.prototype={send:function(n){var i=n.error,r=n.success;n=o(this.settings,n),n.success=function(t,o){t=e.parse(t),"undefined"==typeof t&&(t={error:"JSON Parse error."}),t.error?i.call(n.error_scope||n.scope,t.error,o):r.call(n.success_scope||n.scope,t.result)},n.error=function(e,t){i&&i.call(n.error_scope||n.scope,e,t)},n.data=e.serialize({id:n.id||"c"+this.count++,method:n.method,params:n.params}),n.content_type="application/json",t.send(n)}},i}),/**
 * JSONP.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/JSONP",["tinymce/dom/DOMUtils"],function(e){return{callbacks:{},count:0,send:function(n){var i=this,o=e.DOM,r=n.count!==t?n.count:i.count,a="tinymce_jsonp_"+r;i.callbacks[r]=function(e){o.remove(a),delete i.callbacks[r],n.callback(e)},o.add(o.doc.body,"script",{id:a,src:n.url,type:"text/javascript"}),i.count++}}}),/**
 * LocalStorage.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/LocalStorage",[],function(){function e(){s=[];for(var e in a)s.push(e);o.length=s.length}function n(){function n(e){var n,i;return i=e!==t?u+e:o.indexOf(",",u),-1===i||i>o.length?null:(n=o.substring(u,i),u=i+1,n)}var i,o,s,u=0;if(a={},c){r.load(l),o=r.getAttribute(l)||"";do{var d=n();if(null===d)break;if(i=n(parseInt(d,32)||0),null!==i){if(d=n(),null===d)break;s=n(parseInt(d,32)||0),i&&(a[i]=s)}}while(null!==i);e()}}function i(){var t,n="";if(c){for(var i in a)t=a[i],n+=(n?",":"")+i.length.toString(32)+","+i+","+t.length.toString(32)+","+t;r.setAttribute(l,n);try{r.save(l)}catch(o){}e()}}var o,r,a,s,l,c;try{if(window.localStorage)return localStorage}catch(u){}return l="tinymce",r=document.documentElement,c=!!r.addBehavior,c&&r.addBehavior("#default#userData"),o={key:function(e){return s[e]},getItem:function(e){return e in a?a[e]:null},setItem:function(e,t){a[e]=""+t,i()},removeItem:function(e){delete a[e],i()},clear:function(){a={},i()}},n(),o}),/**
 * Compat.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/Compat",["tinymce/dom/DOMUtils","tinymce/dom/EventUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/util/Tools","tinymce/Env"],function(e,t,n,i,o,r){var a=window.tinymce;return a.DOM=e.DOM,a.ScriptLoader=n.ScriptLoader,a.PluginManager=i.PluginManager,a.ThemeManager=i.ThemeManager,a.dom=a.dom||{},a.dom.Event=t.Event,o.each(o,function(e,t){a[t]=e}),o.each("isOpera isWebKit isIE isGecko isMac".split(" "),function(e){a[e]=r[e.substr(2).toLowerCase()]}),{}}),/**
 * Layout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Layout",["tinymce/util/Class","tinymce/util/Tools"],function(e,t){return e.extend({Defaults:{firstControlClass:"first",lastControlClass:"last"},init:function(e){this.settings=t.extend({},this.Defaults,e)},preRender:function(e){e.addClass(this.settings.containerClass,"body")},applyClasses:function(e){var t,n,i,o=this,r=o.settings;t=e.items().filter(":visible"),n=r.firstControlClass,i=r.lastControlClass,t.each(function(e){e.removeClass(n).removeClass(i),r.controlClass&&e.addClass(r.controlClass)}),t.eq(0).addClass(n),t.eq(-1).addClass(i)},renderHtml:function(e){var t,n=this,i=n.settings,o="";return t=e.items(),t.eq(0).addClass(i.firstControlClass),t.eq(-1).addClass(i.lastControlClass),t.each(function(e){i.controlClass&&e.addClass(i.controlClass),o+=e.renderHtml()}),o},recalc:function(){},postRender:function(){}})}),/**
 * AbsoluteLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/AbsoluteLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"abs-layout",controlClass:"abs-layout-item"},recalc:function(e){e.items().filter(":visible").each(function(e){var t=e.settings;e.layoutRect({x:t.x,y:t.y,w:t.w,h:t.h}),e.recalc&&e.recalc()})},renderHtml:function(e){return'<div id="'+e._id+'-absend" class="'+e.classPrefix+'abs-end"></div>'+this._super(e)}})}),/**
 * Tooltip.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Tooltip",["tinymce/ui/Control","tinymce/ui/Movable"],function(e,t){return e.extend({Mixins:[t],Defaults:{classes:"widget tooltip tooltip-n"},text:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().lastChild.innerHTML=t.encode(e)),t):t._value},renderHtml:function(){var e=this,t=e.classPrefix;return'<div id="'+e._id+'" class="'+e.classes()+'" role="presentation"><div class="'+t+'tooltip-arrow"></div><div class="'+t+'tooltip-inner">'+e.encode(e._text)+"</div></div>"},repaint:function(){var e,t,n=this;e=n.getEl().style,t=n._layoutRect,e.left=t.x+"px",e.top=t.y+"px",e.zIndex=131070}})}),/**
 * Widget.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Widget",["tinymce/ui/Control","tinymce/ui/Tooltip"],function(e,t){var n,i=e.extend({init:function(e){var t=this;t._super(e),e=t.settings,t.canFocus=!0,e.tooltip&&i.tooltips!==!1&&(t.on("mouseenter",function(n){var i=t.tooltip().moveTo(-65535);if(n.control==t){var o=i.text(e.tooltip).show().testMoveRel(t.getEl(),["bc-tc","bc-tl","bc-tr"]);i.toggleClass("tooltip-n","bc-tc"==o),i.toggleClass("tooltip-nw","bc-tl"==o),i.toggleClass("tooltip-ne","bc-tr"==o),i.moveRel(t.getEl(),o)}else i.hide()}),t.on("mouseleave mousedown click",function(){t.tooltip().hide()})),t.aria("label",e.ariaLabel||e.tooltip)},tooltip:function(){return n||(n=new t({type:"tooltip"}),n.renderTo()),n},active:function(e){var t,n=this;return e!==t&&(n.aria("pressed",e),n.toggleClass("active",e)),n._super(e)},disabled:function(e){var t,n=this;return e!==t&&(n.aria("disabled",e),n.toggleClass("disabled",e)),n._super(e)},postRender:function(){var e=this,t=e.settings;e._rendered=!0,e._super(),e.parent()||!t.width&&!t.height||(e.initLayoutRect(),e.repaint()),t.autofocus&&e.focus()},remove:function(){this._super(),n&&(n.remove(),n=null)}});return i}),/**
 * Button.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Button",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"widget btn",role:"button"},init:function(e){var t,n=this;n.on("click mousedown",function(e){e.preventDefault()}),n._super(e),t=e.size,e.subtype&&n.addClass(e.subtype),t&&n.addClass("btn-"+t)},icon:function(e){var t=this,n=t.classPrefix;if("undefined"==typeof e)return t.settings.icon;if(t.settings.icon=e,e=e?n+"ico "+n+"i-"+t.settings.icon:"",t._rendered){var i=t.getEl().firstChild,o=i.getElementsByTagName("i")[0];e?(o&&o==i.firstChild||(o=document.createElement("i"),i.insertBefore(o,i.firstChild)),o.className=e):o&&i.removeChild(o),t.text(t._text)}return t},repaint:function(){var e=this.getEl().firstChild.style;e.width=e.height="100%",this._super()},text:function(e){var t=this;if(t._rendered){var n=t.getEl().lastChild.lastChild;n&&(n.data=t.translate(e))}return t._super(e)},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,o=t.settings.icon;return e=t.settings.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o=t.settings.icon?i+"ico "+i+"i-"+o:"",'<div id="'+n+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+n+'"><button role="presentation" type="button" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+(t._text?(o?" ":"")+t.encode(t._text):"")+"</button></div>"}})}),/**
 * ButtonGroup.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ButtonGroup",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{defaultType:"button",role:"group"},renderHtml:function(){var e=this,t=e._layout;return e.addClass("btn-group"),e.preRender(),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'"><div id="'+e._id+'-body">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),/**
 * Checkbox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Checkbox",["tinymce/ui/Widget"],function(e){return e.extend({Defaults:{classes:"checkbox",role:"checkbox",checked:!1},init:function(e){var t=this;t._super(e),t.on("click mousedown",function(e){e.preventDefault()}),t.on("click",function(e){e.preventDefault(),t.disabled()||t.checked(!t.checked())}),t.checked(t.settings.checked)},checked:function(e){var t=this;return"undefined"!=typeof e?(e?t.addClass("checked"):t.removeClass("checked"),t._checked=e,t.aria("checked",e),t):t._checked},value:function(e){return this.checked(e)},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix;return'<div id="'+t+'" class="'+e.classes()+'" unselectable="on" aria-labelledby="'+t+'-al" tabindex="-1"><i class="'+n+"ico "+n+'i-checkbox"></i><span id="'+t+'-al" class="'+n+'label">'+e.encode(e._text)+"</span></div>"}})}),/**
 * ComboBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ComboBox",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/ui/DomUtils"],function(e,t,n){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("combobox"),t.subinput=!0,t.ariaTarget="inp",e=t.settings,e.menu=e.menu||e.values,e.menu&&(e.icon="caret"),t.on("click",function(n){for(var i=n.target,o=t.getEl();i&&i!=o;)i.id&&-1!=i.id.indexOf("-open")&&(t.fire("action"),e.menu&&(t.showMenu(),n.aria&&t.menu.items()[0].focus())),i=i.parentNode}),t.on("keydown",function(e){"INPUT"==e.target.nodeName&&13==e.keyCode&&t.parents().reverse().each(function(n){return e.preventDefault(),t.fire("change"),n.hasEventListeners("submit")&&n.toJSON?(n.fire("submit",{data:n.toJSON()}),!1):void 0})}),e.placeholder&&(t.addClass("placeholder"),t.on("focusin",function(){t._hasOnChange||(n.on(t.getEl("inp"),"change",function(){t.fire("change")}),t._hasOnChange=!0),t.hasClass("placeholder")&&(t.getEl("inp").value="",t.removeClass("placeholder"))}),t.on("focusout",function(){0===t.value().length&&(t.getEl("inp").value=e.placeholder,t.addClass("placeholder"))}))},showMenu:function(){var e,n=this,i=n.settings;n.menu||(e=i.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(n.getContainerElm()),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control===n.menu&&n.focus()}),n.menu.on("show hide",function(e){e.control.items().each(function(e){e.active(e.value()==n.value())})}).fire("show"),n.menu.on("select",function(e){n.value(e.control.value())}),n.on("focusin",function(e){"INPUT"==e.target.tagName.toUpperCase()&&n.menu.hide()}),n.aria("expanded",!0)),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"])},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t.removeClass("placeholder"),t._rendered&&(t.getEl("inp").value=e),t):t._rendered?(e=t.getEl("inp").value,e!=t.settings.placeholder?e:""):t._value},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl("inp").disabled=e),t._super(e)},focus:function(){this.getEl("inp").focus()},repaint:function(){var e,t,i=this,o=i.getEl(),r=i.getEl("open"),a=i.layoutRect();e=r?a.w-n.getSize(r).width-10:a.w-10;var s=document;return s.all&&(!s.documentMode||s.documentMode<=8)&&(t=i.layoutRect().h-2+"px"),n.css(o.firstChild,{width:e,lineHeight:t}),i._super(),i},postRender:function(){var e=this;return n.on(this.getEl("inp"),"change",function(){e.fire("change")}),e._super()},remove:function(){n.off(this.getEl("inp")),this._super()},renderHtml:function(){var e,t,n=this,i=n._id,o=n.settings,r=n.classPrefix,a=o.value||o.placeholder||"",s="",l="";return"spellcheck"in o&&(l+=' spellcheck="'+o.spellcheck+'"'),o.maxLength&&(l+=' maxlength="'+o.maxLength+'"'),o.size&&(l+=' size="'+o.size+'"'),o.subtype&&(l+=' type="'+o.subtype+'"'),n.disabled()&&(l+=' disabled="disabled"'),e=o.icon,e&&"caret"!=e&&(e=r+"ico "+r+"i-"+o.icon),t=n._text,(e||t)&&(s='<div id="'+i+'-open" class="'+r+"btn "+r+'open" tabIndex="-1" role="button"><button id="'+i+'-action" type="button" hidefocus="1" tabindex="-1">'+("caret"!=e?'<i class="'+e+'"></i>':'<i class="'+r+'caret"></i>')+(t?(e?" ":"")+t:"")+"</button></div>",n.addClass("has-open")),'<div id="'+i+'" class="'+n.classes()+'"><input id="'+i+'-inp" class="'+r+"textbox "+r+'placeholder" value="'+a+'" hidefocus="1"'+l+" />"+s+"</div>"}})}),/**
 * ColorBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ColorBox",["tinymce/ui/ComboBox"],function(e){return e.extend({init:function(e){var t=this;e.spellcheck=!1,e.onaction&&(e.icon="none"),t._super(e),t.addClass("colorbox"),t.on("change keyup postrender",function(){t.repaintColor(t.value())})},repaintColor:function(e){var t=this.getEl().getElementsByTagName("i")[0];if(t)try{t.style.background=e}catch(n){}},value:function(e){var t=this;return"undefined"!=typeof e&&t._rendered&&t.repaintColor(e),t._super(e)}})}),/**
 * PanelButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/PanelButton",["tinymce/ui/Button","tinymce/ui/FloatPanel"],function(e,t){return e.extend({showPanel:function(){var e=this,n=e.settings;if(e.active(!0),e.panel)e.panel.show();else{var i=n.panel;i.type&&(i={layout:"grid",items:i}),i.role=i.role||"dialog",i.popover=!0,i.autohide=!0,i.ariaRoot=!0,e.panel=new t(i).on("hide",function(){e.active(!1)}).on("cancel",function(t){t.stopPropagation(),e.focus(),e.hidePanel()}).parent(e).renderTo(e.getContainerElm()),e.panel.fire("show"),e.panel.reflow()}e.panel.moveRel(e.getEl(),n.popoverAlign||(e.isRtl()?["bc-tr","bc-tc"]:["bc-tl","bc-tc"]))},hidePanel:function(){var e=this;e.panel&&e.panel.hide()},postRender:function(){var e=this;return e.aria("haspopup",!0),e.on("click",function(t){t.control===e&&(e.panel&&e.panel.visible()?e.hidePanel():(e.showPanel(),e.panel.focus(!!t.aria)))}),e._super()},remove:function(){return this.panel&&(this.panel.remove(),this.panel=null),this._super()}})}),/**
 * ColorButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ColorButton",["tinymce/ui/PanelButton","tinymce/dom/DOMUtils"],function(e,t){var n=t.DOM;return e.extend({init:function(e){this._super(e),this.addClass("colorbutton")},color:function(e){return e?(this._color=e,this.getEl("preview").style.backgroundColor=e,this):this._color},renderHtml:function(){var e=this,t=e._id,n=e.classPrefix,i=e.settings.icon?n+"ico "+n+"i-"+e.settings.icon:"",o=e.settings.image?" style=\"background-image: url('"+e.settings.image+"')\"":"";return'<div id="'+t+'" class="'+e.classes()+'" role="button" tabindex="-1" aria-haspopup="true"><button role="presentation" hidefocus="1" type="button" tabindex="-1">'+(i?'<i class="'+i+'"'+o+"></i>":"")+'<span id="'+t+'-preview" class="'+n+'preview"></span>'+(e._text?(i?" ":"")+e._text:"")+'</button><button type="button" class="'+n+'open" hidefocus="1" tabindex="-1"> <i class="'+n+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(i){i.aria&&"down"==i.aria.key||i.control!=e||n.getParent(i.target,"."+e.classPrefix+"open")||(i.stopImmediatePropagation(),t.call(e,i))}),delete e.settings.onclick,e._super()}})}),/**
 * Color.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/util/Color",[],function(){function e(e){function o(e,o,r){var a,s,l,c,u,d;return a=0,s=0,l=0,e/=255,o/=255,r/=255,u=t(e,t(o,r)),d=n(e,n(o,r)),u==d?(l=u,{h:0,s:0,v:100*l}):(c=e==u?o-r:r==u?e-o:r-e,a=e==u?3:r==u?1:5,a=60*(a-c/(d-u)),s=(d-u)/d,l=d,{h:i(a),s:i(100*s),v:i(100*l)})}function r(e,o,r){var a,s,l,c;if(e=(parseInt(e,10)||0)%360,o=parseInt(o,10)/100,r=parseInt(r,10)/100,o=n(0,t(o,1)),r=n(0,t(r,1)),0===o)return void(d=f=h=i(255*r));switch(a=e/60,s=r*o,l=s*(1-Math.abs(a%2-1)),c=r-s,Math.floor(a)){case 0:d=s,f=l,h=0;break;case 1:d=l,f=s,h=0;break;case 2:d=0,f=s,h=l;break;case 3:d=0,f=l,h=s;break;case 4:d=l,f=0,h=s;break;case 5:d=s,f=0,h=l;break;default:d=f=h=0}d=i(255*(d+c)),f=i(255*(f+c)),h=i(255*(h+c))}function a(){function e(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}return"#"+e(d)+e(f)+e(h)}function s(){return{r:d,g:f,b:h}}function l(){return o(d,f,h)}function c(e){var t;return"object"==typeof e?"r"in e?(d=e.r,f=e.g,h=e.b):"v"in e&&r(e.h,e.s,e.v):(t=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(e))?(d=parseInt(t[1],10),f=parseInt(t[2],10),h=parseInt(t[3],10)):(t=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(e))?(d=parseInt(t[1],16),f=parseInt(t[2],16),h=parseInt(t[3],16)):(t=/#([0-F])([0-F])([0-F])/gi.exec(e))&&(d=parseInt(t[1]+t[1],16),f=parseInt(t[2]+t[2],16),h=parseInt(t[3]+t[3],16)),d=0>d?0:d>255?255:d,f=0>f?0:f>255?255:f,h=0>h?0:h>255?255:h,u}var u=this,d=0,f=0,h=0;e&&c(e),u.toRgb=s,u.toHsv=l,u.toHex=a,u.parse=c}var t=Math.min,n=Math.max,i=Math.round;return e}),/**
 * ColorPicker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ColorPicker",["tinymce/ui/Widget","tinymce/ui/DragHelper","tinymce/ui/DomUtils","tinymce/util/Color"],function(e,t,n,i){return e.extend({Defaults:{classes:"widget colorpicker"},init:function(e){this._super(e)},postRender:function(){function e(e,t){var i,o,r=n.getPos(e);return i=t.pageX-r.x,o=t.pageY-r.y,i=Math.max(0,Math.min(i/e.clientWidth,1)),o=Math.max(0,Math.min(o/e.clientHeight,1)),{x:i,y:o}}function o(e,t){var o=(360-e.h)/360;n.css(c,{top:100*o+"%"}),t||n.css(d,{left:e.s+"%",top:100-e.v+"%"}),u.style.background=new i({s:100,v:100,h:e.h}).toHex(),f.color().parse({s:e.s,v:e.v,h:e.h})}function r(t){var n;n=e(u,t),s.s=100*n.x,s.v=100*(1-n.y),o(s),f.fire("change")}function a(t){var n;n=e(l,t),s=h.toHsv(),s.h=360*(1-n.y),o(s,!0),f.fire("change")}var s,l,c,u,d,f=this,h=f.color();l=f.getEl("h"),c=f.getEl("hp"),u=f.getEl("sv"),d=f.getEl("svp"),f._repaint=function(){s=h.toHsv(),o(s)},f._super(),f._svdraghelper=new t(f._id+"-sv",{start:r,drag:r}),f._hdraghelper=new t(f._id+"-h",{start:a,drag:a}),f._repaint()},rgb:function(){return this.color().toRgb()},value:function(e){var t=this;return arguments.length?(t.color().parse(e),void(t._rendered&&t._repaint())):t.color().toHex()},color:function(){return this._color||(this._color=new i),this._color},renderHtml:function(){function e(){var e,t,n,i,a="";for(n="filter:progid:DXImageTransform.Microsoft.gradient(GradientType=0,startColorstr=",i=r.split(","),e=0,t=i.length-1;t>e;e++)a+='<div class="'+o+'colorpicker-h-chunk" style="height:'+100/t+"%;"+n+i[e]+",endColorstr="+i[e+1]+");-ms-"+n+i[e]+",endColorstr="+i[e+1]+')"></div>';return a}var t,n=this,i=n._id,o=n.classPrefix,r="#ff0000,#ff0080,#ff00ff,#8000ff,#0000ff,#0080ff,#00ffff,#00ff80,#00ff00,#80ff00,#ffff00,#ff8000,#ff0000",a="background: -ms-linear-gradient(top,"+r+");background: linear-gradient(to bottom,"+r+");";return t='<div id="'+i+'-h" class="'+o+'colorpicker-h" style="'+a+'">'+e()+'<div id="'+i+'-hp" class="'+o+'colorpicker-h-marker"></div></div>','<div id="'+i+'" class="'+n.classes()+'"><div id="'+i+'-sv" class="'+o+'colorpicker-sv"><div class="'+o+'colorpicker-overlay1"><div class="'+o+'colorpicker-overlay2"><div id="'+i+'-svp" class="'+o+'colorpicker-selector1"><div class="'+o+'colorpicker-selector2"></div></div></div></div></div>'+t+"</div>"}})}),/**
 * Path.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Path",["tinymce/ui/Widget"],function(e){return e.extend({init:function(e){var t=this;e.delimiter||(e.delimiter="»"),t._super(e),t.addClass("path"),t.canFocus=!0,t.on("click",function(e){var n,i=e.target;(n=i.getAttribute("data-index"))&&t.fire("select",{value:t.data()[n],index:n})})},focus:function(){var e=this;return e.getEl().firstChild.focus(),e},data:function(e){var t=this;return"undefined"!=typeof e?(t._data=e,t.update(),t):t._data},update:function(){this.innerHtml(this._getPathHtml())},postRender:function(){var e=this;e._super(),e.data(e.settings.data)},renderHtml:function(){var e=this;return'<div id="'+e._id+'" class="'+e.classes()+'">'+e._getPathHtml()+"</div>"},_getPathHtml:function(){var e,t,n=this,i=n._data||[],o="",r=n.classPrefix;for(e=0,t=i.length;t>e;e++)o+=(e>0?'<div class="'+r+'divider" aria-hidden="true"> '+n.settings.delimiter+" </div>":"")+'<div role="button" class="'+r+"path-item"+(e==t-1?" "+r+"last":"")+'" data-index="'+e+'" tabindex="-1" id="'+n._id+"-"+e+'" aria-level="'+e+'">'+i[e].name+"</div>";return o||(o='<div class="'+r+'path-item"> </div>'),o}})}),/**
 * ElementPath.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ElementPath",["tinymce/ui/Path","tinymce/EditorManager"],function(e,t){return e.extend({postRender:function(){function e(e){if(1===e.nodeType){if("BR"==e.nodeName||e.getAttribute("data-mce-bogus"))return!0;if("bookmark"===e.getAttribute("data-mce-type"))return!0}return!1}var n=this,i=t.activeEditor;return n.on("select",function(e){i.focus(),i.selection.select(this.data()[e.index].element),i.nodeChanged()}),i.on("nodeChange",function(t){for(var o=[],r=t.parents,a=r.length;a--;)if(1==r[a].nodeType&&!e(r[a])){var s=i.fire("ResolveName",{name:r[a].nodeName.toLowerCase(),target:r[a]});if(s.isDefaultPrevented()||o.push({name:s.name,element:r[a]}),s.isPropagationStopped())break}n.data(o)}),n._super()}})}),/**
 * FormItem.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FormItem",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{layout:"flex",align:"center",defaults:{flex:1}},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.addClass("formitem"),t.preRender(e),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<div id="'+e._id+'-title" class="'+n+'title">'+e.settings.title+"</div>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></div>"}})}),/**
 * Form.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Form",["tinymce/ui/Container","tinymce/ui/FormItem","tinymce/util/Tools"],function(e,t,n){return e.extend({Defaults:{containerCls:"form",layout:"flex",direction:"column",align:"stretch",flex:1,padding:20,labelGap:30,spacing:10,callbacks:{submit:function(){this.submit()}}},preRender:function(){var e=this,i=e.items();e.settings.formItemDefaults||(e.settings.formItemDefaults={layout:"flex",autoResize:"overflow",defaults:{flex:1}}),i.each(function(i){var o,r=i.settings.label;r&&(o=new t(n.extend({items:{type:"label",id:i._id+"-l",text:r,flex:0,forId:i._id,disabled:i.disabled()}},e.settings.formItemDefaults)),o.type="formitem",i.aria("labelledby",i._id+"-l"),"undefined"==typeof i.settings.flex&&(i.settings.flex=1),e.replace(i,o),o.add(i))})},recalcLabels:function(){var e,t,n,i=this,o=0,r=[];if(i.settings.labelGapCalc!==!1)for(n="children"==i.settings.labelGapCalc?i.find("formitem"):i.items(),n.filter("formitem").each(function(e){var t=e.items()[0],n=t.getEl().clientWidth;o=n>o?n:o,r.push(t)}),t=i.settings.labelGap||0,e=r.length;e--;)r[e].settings.minWidth=o+t},visible:function(e){var t=this._super(e);return e===!0&&this._rendered&&this.recalcLabels(),t},submit:function(){return this.fire("submit",{data:this.toJSON()})},postRender:function(){var e=this;e._super(),e.recalcLabels(),e.fromJSON(e.settings.data)}})}),/**
 * FieldSet.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FieldSet",["tinymce/ui/Form"],function(e){return e.extend({Defaults:{containerCls:"fieldset",layout:"flex",direction:"column",align:"stretch",flex:1,padding:"25 15 5 15",labelGap:30,spacing:10,border:1},renderHtml:function(){var e=this,t=e._layout,n=e.classPrefix;return e.preRender(),t.preRender(e),'<fieldset id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1">'+(e.settings.title?'<legend id="'+e._id+'-title" class="'+n+'fieldset-title">'+e.settings.title+"</legend>":"")+'<div id="'+e._id+'-body" class="'+e.classes("body")+'">'+(e.settings.html||"")+t.renderHtml(e)+"</div></fieldset>"}})}),/**
 * FilePicker.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FilePicker",["tinymce/ui/ComboBox","tinymce/util/Tools"],function(e,t){return e.extend({init:function(e){var n,i,o,r=this,a=tinymce.activeEditor,s=a.settings;e.spellcheck=!1,o=s.file_picker_types||s.file_browser_callback_types,o&&(o=t.makeMap(o,/[, ]/)),(!o||o[e.filetype])&&(i=s.file_picker_callback,!i||o&&!o[e.filetype]?(i=s.file_browser_callback,!i||o&&!o[e.filetype]||(n=function(){i(r.getEl("inp").id,r.value(),e.filetype,window)})):n=function(){var n=r.fire("beforecall").meta;n=t.extend({filetype:e.filetype},n),i.call(a,function(e,t){r.value(e).fire("change",{meta:t})},r.value(),n)}),n&&(e.icon="browse",e.onaction=n),r._super(e)}})}),/**
 * FitLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FitLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t=e.layoutRect(),n=e.paddingBox();e.items().filter(":visible").each(function(e){e.layoutRect({x:n.left,y:n.top,w:t.innerW-n.right-n.left,h:t.innerH-n.top-n.bottom}),e.recalc&&e.recalc()})}})}),/**
 * FlexLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FlexLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t,n,i,o,r,a,s,l,c,u,d,f,h,p,m,g,v,y,b,x,w,C,k,S,T,$,E,_,A,N,R,D,L,M,P,O,B,I,F=[],H=Math.max,z=Math.min;for(i=e.items().filter(":visible"),o=e.layoutRect(),r=e._paddingBox,a=e.settings,f=e.isRtl()?a.direction||"row-reversed":a.direction,s=a.align,l=e.isRtl()?a.pack||"end":a.pack,c=a.spacing||0,("row-reversed"==f||"column-reverse"==f)&&(i=i.set(i.toArray().reverse()),f=f.split("-")[0]),"column"==f?(T="y",k="h",S="minH",$="maxH",_="innerH",E="top",A="deltaH",N="contentH",P="left",L="w",R="x",D="innerW",M="minW",O="right",B="deltaW",I="contentW"):(T="x",k="w",S="minW",$="maxW",_="innerW",E="left",A="deltaW",N="contentW",P="top",L="h",R="y",D="innerH",M="minH",O="bottom",B="deltaH",I="contentH"),d=o[_]-r[E]-r[E],C=u=0,t=0,n=i.length;n>t;t++)h=i[t],p=h.layoutRect(),m=h.settings,g=m.flex,d-=n-1>t?c:0,g>0&&(u+=g,p[$]&&F.push(h),p.flex=g),d-=p[S],v=r[P]+p[M]+r[O],v>C&&(C=v);if(x={},0>d?x[S]=o[S]-d+o[A]:x[S]=o[_]-d+o[A],x[M]=C+o[B],x[N]=o[_]-d,x[I]=C,x.minW=z(x.minW,o.maxW),x.minH=z(x.minH,o.maxH),x.minW=H(x.minW,o.startMinWidth),x.minH=H(x.minH,o.startMinHeight),!o.autoResize||x.minW==o.minW&&x.minH==o.minH){for(b=d/u,t=0,n=F.length;n>t;t++)h=F[t],p=h.layoutRect(),y=p[$],v=p[S]+p.flex*b,v>y?(d-=p[$]-p[S],u-=p.flex,p.flex=0,p.maxFlexSize=y):p.maxFlexSize=0;for(b=d/u,w=r[E],x={},0===u&&("end"==l?w=d+r[E]:"center"==l?(w=Math.round(o[_]/2-(o[_]-d)/2)+r[E],0>w&&(w=r[E])):"justify"==l&&(w=r[E],c=Math.floor(d/(i.length-1)))),x[R]=r[P],t=0,n=i.length;n>t;t++)h=i[t],p=h.layoutRect(),v=p.maxFlexSize||p[S],"center"===s?x[R]=Math.round(o[D]/2-p[L]/2):"stretch"===s?(x[L]=H(p[M]||0,o[D]-r[P]-r[O]),x[R]=r[P]):"end"===s&&(x[R]=o[D]-p[L]-r.top),p.flex>0&&(v+=p.flex*b),x[k]=v,x[T]=w,h.layoutRect(x),h.recalc&&h.recalc(),w+=v+c}else if(x.w=x.minW,x.h=x.minH,e.layoutRect(x),this.recalc(e),null===e._lastRect){var W=e.parent();W&&(W._lastRect=null,W.recalc())}}})}),/**
 * FlowLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FlowLayout",["tinymce/ui/Layout"],function(e){return e.extend({Defaults:{containerClass:"flow-layout",controlClass:"flow-layout-item",endClass:"break"},recalc:function(e){e.items().filter(":visible").each(function(e){e.recalc&&e.recalc()})}})}),/**
 * FormatControls.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/FormatControls",["tinymce/ui/Control","tinymce/ui/Widget","tinymce/ui/FloatPanel","tinymce/util/Tools","tinymce/EditorManager","tinymce/Env"],function(e,t,n,i,o,r){function a(e){function t(t,n){return function(){var i=this;e.on("nodeChange",function(o){var r=e.formatter,a=null;s(o.parents,function(e){return s(t,function(t){return n?r.matchNode(e,n,{value:t.value})&&(a=t.value):r.matchNode(e,t.value)&&(a=t.value),a?!1:void 0}),a?!1:void 0}),i.value(a)})}}function i(e){e=e.replace(/;$/,"").split(";");for(var t=e.length;t--;)e[t]=e[t].split("=");return e}function o(){function t(e){var n=[];if(e)return s(e,function(e){var r={text:e.title,icon:e.icon};if(e.items)r.menu=t(e.items);else{var a=e.format||"custom"+i++;e.format||(e.name=a,o.push(e)),r.format=a,r.cmd=e.cmd}n.push(r)}),n}function n(){var n;return n=t(e.settings.style_formats_merge?e.settings.style_formats?r.concat(e.settings.style_formats):r:e.settings.style_formats||r)}var i=0,o=[],r=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",icon:"bold",format:"bold"},{title:"Italic",icon:"italic",format:"italic"},{title:"Underline",icon:"underline",format:"underline"},{title:"Strikethrough",icon:"strikethrough",format:"strikethrough"},{title:"Superscript",icon:"superscript",format:"superscript"},{title:"Subscript",icon:"subscript",format:"subscript"},{title:"Code",icon:"code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Alignment",items:[{title:"Left",icon:"alignleft",format:"alignleft"},{title:"Center",icon:"aligncenter",format:"aligncenter"},{title:"Right",icon:"alignright",format:"alignright"},{title:"Justify",icon:"alignjustify",format:"alignjustify"}]}];return e.on("init",function(){s(o,function(t){e.formatter.register(t.name,t)})}),{type:"menu",items:n(),onPostRender:function(t){e.fire("renderFormatsMenu",{control:t.control})},itemDefaults:{preview:!0,textStyle:function(){return this.settings.format?e.formatter.getCssText(this.settings.format):void 0},onPostRender:function(){var t=this;t.parent().on("show",function(){var n,i;n=t.settings.format,n&&(t.disabled(!e.formatter.canApply(n)),t.active(e.formatter.match(n))),i=t.settings.cmd,i&&t.active(e.queryCommandState(i))})},onclick:function(){this.settings.format&&l(this.settings.format),this.settings.cmd&&e.execCommand(this.settings.cmd)}}}}function r(t){return function(){function n(){return e.undoManager?e.undoManager[t]():!1}var i=this;t="redo"==t?"hasRedo":"hasUndo",i.disabled(!n()),e.on("Undo Redo AddUndo TypingUndo ClearUndos",function(){i.disabled(!n())})}}function a(){var t=this;e.on("VisualAid",function(e){t.active(e.hasVisual)}),t.active(e.hasVisual)}function l(t){t.control&&(t=t.control.value()),t&&e.execCommand("mceToggleFormat",!1,t)}var c;c=o(),s({bold:"Bold",italic:"Italic",underline:"Underline",strikethrough:"Strikethrough",subscript:"Subscript",superscript:"Superscript"},function(t,n){e.addButton(n,{tooltip:t,onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})},onclick:function(){l(n)}})}),s({outdent:["Decrease indent","Outdent"],indent:["Increase indent","Indent"],cut:["Cut","Cut"],copy:["Copy","Copy"],paste:["Paste","Paste"],help:["Help","mceHelp"],selectall:["Select all","SelectAll"],removeformat:["Clear formatting","RemoveFormat"],visualaid:["Visual aids","mceToggleVisualAid"],newdocument:["New document","mceNewDocument"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1]})}),s({blockquote:["Blockquote","mceBlockQuote"],numlist:["Numbered list","InsertOrderedList"],bullist:["Bullet list","InsertUnorderedList"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],alignleft:["Align left","JustifyLeft"],aligncenter:["Align center","JustifyCenter"],alignright:["Align right","JustifyRight"],alignjustify:["Justify","JustifyFull"]},function(t,n){e.addButton(n,{tooltip:t[0],cmd:t[1],onPostRender:function(){var t=this;e.formatter?e.formatter.formatChanged(n,function(e){t.active(e)}):e.on("init",function(){e.formatter.formatChanged(n,function(e){t.active(e)})})}})}),e.addButton("undo",{tooltip:"Undo",onPostRender:r("undo"),cmd:"undo"}),e.addButton("redo",{tooltip:"Redo",onPostRender:r("redo"),cmd:"redo"}),e.addMenuItem("newdocument",{text:"New document",shortcut:"Ctrl+N",icon:"newdocument",cmd:"mceNewDocument"}),e.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Ctrl+Z",onPostRender:r("undo"),cmd:"undo"}),e.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Ctrl+Y",onPostRender:r("redo"),cmd:"redo"}),e.addMenuItem("visualaid",{text:"Visual aids",selectable:!0,onPostRender:a,cmd:"mceToggleVisualAid"}),s({cut:["Cut","Cut","Ctrl+X"],copy:["Copy","Copy","Ctrl+C"],paste:["Paste","Paste","Ctrl+V"],selectall:["Select all","SelectAll","Ctrl+A"],bold:["Bold","Bold","Ctrl+B"],italic:["Italic","Italic","Ctrl+I"],underline:["Underline","Underline"],strikethrough:["Strikethrough","Strikethrough"],subscript:["Subscript","Subscript"],superscript:["Superscript","Superscript"],removeformat:["Clear formatting","RemoveFormat"]},function(t,n){e.addMenuItem(n,{text:t[0],icon:n,shortcut:t[2],cmd:t[1]})}),e.on("mousedown",function(){n.hideAll()}),e.addButton("styleselect",{type:"menubutton",text:"Formats",menu:c}),e.addButton("formatselect",function(){var n=[],o=i(e.settings.block_formats||"Paragraph=p;Address=address;Pre=pre;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6");return s(o,function(t){n.push({text:t[0],value:t[1],textStyle:function(){return e.formatter.getCssText(t[1])}})}),{type:"listbox",text:o[0][0],values:n,fixedWidth:!0,onselect:l,onPostRender:t(n)}}),e.addButton("fontselect",function(){var n="Andale Mono=andale mono,times;Arial=arial,helvetica,sans-serif;Arial Black=arial black,avant garde;Book Antiqua=book antiqua,palatino;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier;Georgia=georgia,palatino;Helvetica=helvetica;Impact=impact,chicago;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco;Times New Roman=times new roman,times;Trebuchet MS=trebuchet ms,geneva;Verdana=verdana,geneva;Webdings=webdings;Wingdings=wingdings,zapf dingbats",o=[],r=i(e.settings.font_formats||n);return s(r,function(e){o.push({text:{raw:e[0]},value:e[1],textStyle:-1==e[1].indexOf("dings")?"font-family:"+e[1]:""})}),{type:"listbox",text:"Font Family",tooltip:"Font Family",values:o,fixedWidth:!0,onPostRender:t(o,"fontname"),onselect:function(t){t.control.settings.value&&e.execCommand("FontName",!1,t.control.settings.value)}}}),e.addButton("fontsizeselect",function(){var n=[],i="8pt 10pt 12pt 14pt 18pt 24pt 36pt",o=e.settings.fontsize_formats||i;return s(o.split(" "),function(e){var t=e,i=e,o=e.split("=");o.length>1&&(t=o[0],i=o[1]),n.push({text:t,value:i})}),{type:"listbox",text:"Font Sizes",tooltip:"Font Sizes",values:n,fixedWidth:!0,onPostRender:t(n,"fontsize"),onclick:function(t){t.control.settings.value&&e.execCommand("FontSize",!1,t.control.settings.value)}}}),e.addMenuItem("formats",{text:"Formats",menu:c})}var s=i.each;o.on("AddEditor",function(t){t.editor.rtl&&(e.rtl=!0),a(t.editor)}),e.translate=function(e){return o.translate(e)},t.tooltips=!r.iOS}),/**
 * GridLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/GridLayout",["tinymce/ui/AbsoluteLayout"],function(e){return e.extend({recalc:function(e){var t,n,i,o,r,a,s,l,c,u,d,f,h,p,m,g,v,y,b,x,w,C,k,S,T,$,E,_,A=e.settings,N=[],R=[];A=e.settings,i=e.items().filter(":visible"),o=e.layoutRect(),n=A.columns||Math.ceil(Math.sqrt(i.length)),t=Math.ceil(i.length/n),v=A.spacingH||A.spacing||0,y=A.spacingV||A.spacing||0,b=A.alignH||A.align,x=A.alignV||A.align,m=e._paddingBox,E="reverseRows"in A?A.reverseRows:e.isRtl(),b&&"string"==typeof b&&(b=[b]),x&&"string"==typeof x&&(x=[x]);for(u=0;n>u;u++)N.push(0);for(d=0;t>d;d++)R.push(0);for(d=0;t>d;d++)for(u=0;n>u&&(c=i[d*n+u],c);u++)l=c.layoutRect(),k=l.minW,S=l.minH,N[u]=k>N[u]?k:N[u],R[d]=S>R[d]?S:R[d];for(T=o.innerW-m.left-m.right,w=0,u=0;n>u;u++)w+=N[u]+(u>0?v:0),T-=(u>0?v:0)+N[u];for($=o.innerH-m.top-m.bottom,C=0,d=0;t>d;d++)C+=R[d]+(d>0?y:0),$-=(d>0?y:0)+R[d];if(w+=m.left+m.right,C+=m.top+m.bottom,s={},s.minW=w+(o.w-o.innerW),s.minH=C+(o.h-o.innerH),s.contentW=s.minW-o.deltaW,s.contentH=s.minH-o.deltaH,s.minW=Math.min(s.minW,o.maxW),s.minH=Math.min(s.minH,o.maxH),s.minW=Math.max(s.minW,o.startMinWidth),s.minH=Math.max(s.minH,o.startMinHeight),!o.autoResize||s.minW==o.minW&&s.minH==o.minH){o.autoResize&&(s=e.layoutRect(s),s.contentW=s.minW-o.deltaW,s.contentH=s.minH-o.deltaH);var D;D="start"==A.packV?0:$>0?Math.floor($/t):0;var L=0,M=A.flexWidths;if(M)for(u=0;u<M.length;u++)L+=M[u];else L=n;var P=T/L;for(u=0;n>u;u++)N[u]+=M?M[u]*P:P;for(h=m.top,d=0;t>d;d++){for(f=m.left,a=R[d]+D,u=0;n>u&&(_=E?d*n+n-1-u:d*n+u,c=i[_],c);u++)p=c.settings,l=c.layoutRect(),r=Math.max(N[u],l.startMinWidth),l.x=f,l.y=h,g=p.alignH||(b?b[u]||b[0]:null),"center"==g?l.x=f+r/2-l.w/2:"right"==g?l.x=f+r-l.w:"stretch"==g&&(l.w=r),g=p.alignV||(x?x[u]||x[0]:null),"center"==g?l.y=h+a/2-l.h/2:"bottom"==g?l.y=h+a-l.h:"stretch"==g&&(l.h=a),c.layoutRect(l),f+=r+v,c.recalc&&c.recalc();h+=a+y}}else if(s.w=s.minW,s.h=s.minH,e.layoutRect(s),this.recalc(e),null===e._lastRect){var O=e.parent();O&&(O._lastRect=null,O.recalc())}}})}),/**
 * Iframe.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Iframe",["tinymce/ui/Widget"],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("iframe"),e.canFocus=!1,'<iframe id="'+e._id+'" class="'+e.classes()+'" tabindex="-1" src="'+(e.settings.url||"javascript:''")+'" frameborder="0"></iframe>'},src:function(e){this.getEl().src=e},html:function(e,t){var n=this,i=this.getEl().contentWindow.document.body;return i?(i.innerHTML=e,t&&t()):setTimeout(function(){n.html(e)},0),this}})}),/**
 * Label.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Label",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t.addClass("widget"),t.addClass("label"),t.canFocus=!1,e.multiline&&t.addClass("autoscroll"),e.strong&&t.addClass("strong")},initLayoutRect:function(){var e=this,n=e._super();if(e.settings.multiline){var i=t.getSize(e.getEl());i.width>n.maxW&&(n.minW=n.maxW,e.addClass("multiline")),e.getEl().style.width=n.minW+"px",n.startMinH=n.h=n.minH=Math.min(n.maxH,t.getSize(e.getEl()).height)}return n},repaint:function(){var e=this;return e.settings.multiline||(e.getEl().style.lineHeight=e.layoutRect().h+"px"),e._super()},text:function(e){var t=this;return t._rendered&&e&&this.innerHtml(t.encode(e)),t._super(e)},renderHtml:function(){var e=this,t=e.settings.forId;return'<label id="'+e._id+'" class="'+e.classes()+'"'+(t?' for="'+t+'"':"")+">"+e.encode(e._text)+"</label>"}})}),/**
 * Toolbar.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Toolbar",["tinymce/ui/Container"],function(e){return e.extend({Defaults:{role:"toolbar",layout:"flow"},init:function(e){var t=this;t._super(e),t.addClass("toolbar")},postRender:function(){var e=this;return e.items().addClass("toolbar-item"),e._super()}})}),/**
 * MenuBar.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/MenuBar",["tinymce/ui/Toolbar"],function(e){return e.extend({Defaults:{role:"menubar",containerCls:"menubar",ariaRoot:!0,defaults:{type:"menubutton"}}})}),/**
 * MenuButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/MenuButton",["tinymce/ui/Button","tinymce/ui/Factory","tinymce/ui/MenuBar"],function(e,t,n){function i(e,t){for(;e;){if(t===e)return!0;e=e.parentNode}return!1}var o=e.extend({init:function(e){var t=this;t._renderOpen=!0,t._super(e),t.addClass("menubtn"),e.fixedWidth&&t.addClass("fixed-width"),t.aria("haspopup",!0),t.hasPopup=!0},showMenu:function(){var e,n=this,i=n.settings;return n.menu&&n.menu.visible()?n.hideMenu():(n.menu||(e=i.menu||[],e.length?e={type:"menu",items:e}:e.type=e.type||"menu",n.menu=t.create(e).parent(n).renderTo(),n.fire("createmenu"),n.menu.reflow(),n.menu.on("cancel",function(e){e.control.parent()===n.menu&&(e.stopPropagation(),n.focus(),n.hideMenu())}),n.menu.on("select",function(){n.focus()}),n.menu.on("show hide",function(e){e.control==n.menu&&n.activeMenu("show"==e.type),n.aria("expanded","show"==e.type)}).fire("show")),n.menu.show(),n.menu.layoutRect({w:n.layoutRect().w}),void n.menu.moveRel(n.getEl(),n.isRtl()?["br-tr","tr-br"]:["bl-tl","tl-bl"]))},hideMenu:function(){var e=this;e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide())},activeMenu:function(e){this.toggleClass("active",e)},renderHtml:function(){var e,t=this,i=t._id,o=t.classPrefix,r=t.settings.icon;return e=t.settings.image,e?(r="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",r=t.settings.icon?o+"ico "+o+"i-"+r:"",t.aria("role",t.parent()instanceof n?"menuitem":"button"),'<div id="'+i+'" class="'+t.classes()+'" tabindex="-1" aria-labelledby="'+i+'"><button id="'+i+'-open" role="presentation" type="button" tabindex="-1">'+(r?'<i class="'+r+'"'+e+"></i>":"")+"<span>"+(t._text?(r?" ":"")+t.encode(t._text):"")+'</span> <i class="'+o+'caret"></i></button></div>'},postRender:function(){var e=this;return e.on("click",function(t){t.control===e&&i(t.target,e.getEl())&&(e.showMenu(),t.aria&&e.menu.items()[0].focus())}),e.on("mouseenter",function(t){var n,i=t.control,r=e.parent();i&&r&&i instanceof o&&i.parent()==r&&(r.items().filter("MenuButton").each(function(e){e.hideMenu&&e!=i&&(e.menu&&e.menu.visible()&&(n=!0),e.hideMenu())}),n&&(i.focus(),i.showMenu()))}),e._super()},text:function(e){var t,n,i=this;if(i._rendered)for(n=i.getEl("open").getElementsByTagName("span"),t=0;t<n.length;t++)n[t].innerHTML=(i.settings.icon&&e?" ":"")+i.encode(e);return this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}});return o}),/**
 * ListBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ListBox",["tinymce/ui/MenuButton"],function(e){return e.extend({init:function(e){function t(n){for(var r=0;r<n.length;r++){if(i=n[r].selected||e.value===n[r].value){o=o||n[r].text,a._value=n[r].value;break}n[r].menu&&t(n[r].menu)}}var n,i,o,r,a=this;a._values=n=e.values,n&&("undefined"!=typeof e.value&&t(n),!i&&n.length>0&&(o=n[0].text,a._value=n[0].value),e.menu=n),e.text=e.text||o||n[0].text,a._super(e),a.addClass("listbox"),a.on("select",function(t){var n=t.control;r&&(t.lastControl=r),e.multiple?n.active(!n.active()):a.value(t.control.settings.value),r=n})},value:function(e){function t(e,n){e.items().each(function(e){i=e.value()===n,i&&(o=o||e.text()),e.active(i),e.menu&&t(e.menu,n)})}function n(t){for(var r=0;r<t.length;r++)i=t[r].value==e,i&&(o=o||t[r].text),t[r].active=i,t[r].menu&&n(t[r].menu)}var i,o,r,a=this;return"undefined"!=typeof e&&(a.menu?t(a.menu,e):(r=a.settings.menu,n(r)),a.text(o||this.settings.text)),a._super(e)}})}),/**
 * MenuItem.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/MenuItem",["tinymce/ui/Widget","tinymce/ui/Factory","tinymce/Env"],function(e,t,n){return e.extend({Defaults:{border:0,role:"menuitem"},init:function(e){var t=this;t.hasPopup=!0,t._super(e),e=t.settings,t.addClass("menu-item"),e.menu&&t.addClass("menu-item-expand"),e.preview&&t.addClass("menu-item-preview"),("-"===t._text||"|"===t._text)&&(t.addClass("menu-item-sep"),t.aria("role","separator"),t._text="-"),e.selectable&&(t.aria("role","menuitemcheckbox"),t.addClass("menu-item-checkbox"),e.icon="selected"),e.preview||e.selectable||t.addClass("menu-item-normal"),t.on("mousedown",function(e){e.preventDefault()}),e.menu&&!e.ariaHideMenu&&t.aria("haspopup",!0)},hasMenus:function(){return!!this.settings.menu},showMenu:function(){var e,n=this,i=n.settings,o=n.parent();if(o.items().each(function(e){e!==n&&e.hideMenu()}),i.menu){e=n.menu,e?e.show():(e=i.menu,e.length?e={type:"menu",items:e}:e.type=e.type||"menu",o.settings.itemDefaults&&(e.itemDefaults=o.settings.itemDefaults),e=n.menu=t.create(e).parent(n).renderTo(),e.reflow(),e.on("cancel",function(t){t.stopPropagation(),n.focus(),e.hide()}),e.on("show hide",function(e){e.control.items().each(function(e){e.active(e.settings.selected)})}).fire("show"),e.on("hide",function(t){t.control===e&&n.removeClass("selected")}),e.submenu=!0),e._parentMenu=o,e.addClass("menu-sub");var r=e.testMoveRel(n.getEl(),n.isRtl()?["tl-tr","bl-br","tr-tl","br-bl"]:["tr-tl","br-bl","tl-tr","bl-br"]);e.moveRel(n.getEl(),r),e.rel=r,r="menu-sub-"+r,e.removeClass(e._lastRel),e.addClass(r),e._lastRel=r,n.addClass("selected"),n.aria("expanded",!0)}},hideMenu:function(){var e=this;return e.menu&&(e.menu.items().each(function(e){e.hideMenu&&e.hideMenu()}),e.menu.hide(),e.aria("expanded",!1)),e},renderHtml:function(){var e=this,t=e._id,i=e.settings,o=e.classPrefix,r=e.encode(e._text),a=e.settings.icon,s="",l=i.shortcut;return a&&e.parent().addClass("menu-has-icons"),i.image&&(a="none",s=" style=\"background-image: url('"+i.image+"')\""),l&&n.mac&&(l=l.replace(/ctrl\+alt\+/i,"&#x2325;&#x2318;"),l=l.replace(/ctrl\+/i,"&#x2318;"),l=l.replace(/alt\+/i,"&#x2325;"),l=l.replace(/shift\+/i,"&#x21E7;")),a=o+"ico "+o+"i-"+(e.settings.icon||"none"),'<div id="'+t+'" class="'+e.classes()+'" tabindex="-1">'+("-"!==r?'<i class="'+a+'"'+s+"></i> ":"")+("-"!==r?'<span id="'+t+'-text" class="'+o+'text">'+r+"</span>":"")+(l?'<div id="'+t+'-shortcut" class="'+o+'menu-shortcut">'+l+"</div>":"")+(i.menu?'<div class="'+o+'caret"></div>':"")+"</div>"},postRender:function(){var e=this,t=e.settings,n=t.textStyle;if("function"==typeof n&&(n=n.call(this)),n){var i=e.getEl("text");i&&i.setAttribute("style",n)}return e.on("mouseenter click",function(n){n.control===e&&(t.menu||"click"!==n.type?(e.showMenu(),n.aria&&e.menu.focus(!0)):(e.fire("select"),e.parent().hideAll()))}),e._super(),e},active:function(e){return"undefined"!=typeof e&&this.aria("checked",e),this._super(e)},remove:function(){this._super(),this.menu&&this.menu.remove()}})}),/**
 * Menu.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Menu",["tinymce/ui/FloatPanel","tinymce/ui/MenuItem","tinymce/util/Tools"],function(e,t,n){var i=e.extend({Defaults:{defaultType:"menuitem",border:1,layout:"stack",role:"application",bodyRole:"menu",ariaRoot:!0},init:function(e){var t=this;if(e.autohide=!0,e.constrainToViewport=!0,e.itemDefaults)for(var i=e.items,o=i.length;o--;)i[o]=n.extend({},e.itemDefaults,i[o]);t._super(e),t.addClass("menu")},repaint:function(){return this.toggleClass("menu-align",!0),this._super(),this.getEl().style.height="",this.getEl("body").style.height="",this},cancel:function(){var e=this;e.hideAll(),e.fire("select")},hideAll:function(){var e=this;return this.find("menuitem").exec("hideMenu"),e._super()},preRender:function(){var e=this;return e.items().each(function(t){var n=t.settings;return n.icon||n.selectable?(e._hasIcons=!0,!1):void 0}),e._super()}});return i}),/**
 * Radio.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Radio",["tinymce/ui/Checkbox"],function(e){return e.extend({Defaults:{classes:"radio",role:"radio"}})}),/**
 * ResizeHandle.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/ResizeHandle",["tinymce/ui/Widget","tinymce/ui/DragHelper"],function(e,t){return e.extend({renderHtml:function(){var e=this,t=e.classPrefix;return e.addClass("resizehandle"),"both"==e.settings.direction&&e.addClass("resizehandle-both"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"><i class="'+t+"ico "+t+'i-resize"></i></div>'},postRender:function(){var e=this;e._super(),e.resizeDragHelper=new t(this._id,{start:function(){e.fire("ResizeStart")},drag:function(t){"both"!=e.settings.direction&&(t.deltaX=0),e.fire("Resize",t)},stop:function(){e.fire("ResizeEnd")}})},remove:function(){return this.resizeDragHelper&&this.resizeDragHelper.destroy(),this._super()}})}),/**
 * Spacer.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Spacer",["tinymce/ui/Widget"],function(e){return e.extend({renderHtml:function(){var e=this;return e.addClass("spacer"),e.canFocus=!1,'<div id="'+e._id+'" class="'+e.classes()+'"></div>'}})}),/**
 * SplitButton.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/SplitButton",["tinymce/ui/MenuButton","tinymce/ui/DomUtils"],function(e,t){return e.extend({Defaults:{classes:"widget btn splitbtn",role:"button"},repaint:function(){var e,n,i=this,o=i.getEl(),r=i.layoutRect();return i._super(),e=o.firstChild,n=o.lastChild,t.css(e,{width:r.w-t.getSize(n).width,height:r.h-2}),t.css(n,{height:r.h-2}),i},activeMenu:function(e){var n=this;t.toggleClass(n.getEl().lastChild,n.classPrefix+"active",e)},renderHtml:function(){var e,t=this,n=t._id,i=t.classPrefix,o=t.settings.icon;return e=t.settings.image,e?(o="none","string"!=typeof e&&(e=window.getSelection?e[0]:e[1]),e=" style=\"background-image: url('"+e+"')\""):e="",o=t.settings.icon?i+"ico "+i+"i-"+o:"",'<div id="'+n+'" class="'+t.classes()+'" role="button" tabindex="-1"><button type="button" hidefocus="1" tabindex="-1">'+(o?'<i class="'+o+'"'+e+"></i>":"")+(t._text?(o?" ":"")+t._text:"")+'</button><button type="button" class="'+i+'open" hidefocus="1" tabindex="-1">'+(t._menuBtnText?(o?" ":"")+t._menuBtnText:"")+' <i class="'+i+'caret"></i></button></div>'},postRender:function(){var e=this,t=e.settings.onclick;return e.on("click",function(e){var n=e.target;if(e.control==this)for(;n;){if(e.aria&&"down"!=e.aria.key||"BUTTON"==n.nodeName&&-1==n.className.indexOf("open"))return e.stopImmediatePropagation(),void t.call(this,e);n=n.parentNode}}),delete e.settings.onclick,e._super()}})}),/**
 * StackLayout.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/StackLayout",["tinymce/ui/FlowLayout"],function(e){return e.extend({Defaults:{containerClass:"stack-layout",controlClass:"stack-layout-item",endClass:"break"}})}),/**
 * TabPanel.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/TabPanel",["tinymce/ui/Panel","tinymce/ui/DomUtils"],function(e,t){return e.extend({Defaults:{layout:"absolute",defaults:{type:"panel"}},activateTab:function(e){var n;this.activeTabId&&(n=this.getEl(this.activeTabId),t.removeClass(n,this.classPrefix+"active"),n.setAttribute("aria-selected","false")),this.activeTabId="t"+e,n=this.getEl("t"+e),n.setAttribute("aria-selected","true"),t.addClass(n,this.classPrefix+"active"),this.items()[e].show().fire("showtab"),this.reflow(),this.items().each(function(t,n){e!=n&&t.hide()})},renderHtml:function(){var e=this,t=e._layout,n="",i=e.classPrefix;return e.preRender(),t.preRender(e),e.items().each(function(t,o){var r=e._id+"-t"+o;t.aria("role","tabpanel"),t.aria("labelledby",r),n+='<div id="'+r+'" class="'+i+'tab" unselectable="on" role="tab" aria-controls="'+t._id+'" aria-selected="false" tabIndex="-1">'+e.encode(t.settings.title)+"</div>"}),'<div id="'+e._id+'" class="'+e.classes()+'" hidefocus="1" tabindex="-1"><div id="'+e._id+'-head" class="'+i+'tabs" role="tablist">'+n+'</div><div id="'+e._id+'-body" class="'+e.classes("body")+'">'+t.renderHtml(e)+"</div></div>"},postRender:function(){var e=this;e._super(),e.settings.activeTab=e.settings.activeTab||0,e.activateTab(e.settings.activeTab),this.on("click",function(t){var n=t.target.parentNode;if(t.target.parentNode.id==e._id+"-head")for(var i=n.childNodes.length;i--;)n.childNodes[i]==t.target&&e.activateTab(i)})},initLayoutRect:function(){var e,n,i,o=this;n=t.getSize(o.getEl("head")).width,n=0>n?0:n,i=0,o.items().each(function(e){n=Math.max(n,e.layoutRect().minW),i=Math.max(i,e.layoutRect().minH)}),o.items().each(function(e){e.settings.x=0,e.settings.y=0,e.settings.w=n,e.settings.h=i,e.layoutRect({x:0,y:0,w:n,h:i})});var r=t.getSize(o.getEl("head")).height;return o.settings.minWidth=n,o.settings.minHeight=i+r,e=o._super(),e.deltaH+=r,e.innerH=e.h-e.deltaH,e}})}),/**
 * TextBox.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/TextBox",["tinymce/ui/Widget","tinymce/ui/DomUtils"],function(e,t){return e.extend({init:function(e){var t=this;t._super(e),t._value=e.value||"",t.addClass("textbox"),e.multiline?t.addClass("multiline"):t.on("keydown",function(e){13==e.keyCode&&t.parents().reverse().each(function(t){return e.preventDefault(),t.hasEventListeners("submit")&&t.toJSON?(t.fire("submit",{data:t.toJSON()}),!1):void 0})})},disabled:function(e){var t=this;return t._rendered&&"undefined"!=typeof e&&(t.getEl().disabled=e),t._super(e)},value:function(e){var t=this;return"undefined"!=typeof e?(t._value=e,t._rendered&&(t.getEl().value=e),t):t._rendered?t.getEl().value:t._value},repaint:function(){var e,t,n,i,o=this,r=0,a=0;e=o.getEl().style,t=o._layoutRect,i=o._lastRepaintRect||{};var s=document;return!o.settings.multiline&&s.all&&(!s.documentMode||s.documentMode<=8)&&(e.lineHeight=t.h-a+"px"),n=o._borderBox,r=n.left+n.right+8,a=n.top+n.bottom+(o.settings.multiline?8:0),t.x!==i.x&&(e.left=t.x+"px",i.x=t.x),t.y!==i.y&&(e.top=t.y+"px",i.y=t.y),t.w!==i.w&&(e.width=t.w-r+"px",i.w=t.w),t.h!==i.h&&(e.height=t.h-a+"px",i.h=t.h),o._lastRepaintRect=i,o.fire("repaint",{},!1),o},renderHtml:function(){var e=this,t=e._id,n=e.settings,i=e.encode(e._value,!1),o="";return"spellcheck"in n&&(o+=' spellcheck="'+n.spellcheck+'"'),n.maxLength&&(o+=' maxlength="'+n.maxLength+'"'),n.size&&(o+=' size="'+n.size+'"'),n.subtype&&(o+=' type="'+n.subtype+'"'),e.disabled()&&(o+=' disabled="disabled"'),n.multiline?'<textarea id="'+t+'" class="'+e.classes()+'" '+(n.rows?' rows="'+n.rows+'"':"")+' hidefocus="1"'+o+">"+i+"</textarea>":'<input id="'+t+'" class="'+e.classes()+'" value="'+i+'" hidefocus="1"'+o+" />"},postRender:function(){var e=this;return t.on(e.getEl(),"change",function(t){e.fire("change",t)}),e._super()},remove:function(){t.off(this.getEl()),this._super()}})}),/**
 * Throbber.js
 *
 * Copyright, Moxiecode Systems AB
 * Released under LGPL License.
 *
 * License: http://www.tinymce.com/license
 * Contributing: http://www.tinymce.com/contributing
 */
i("tinymce/ui/Throbber",["tinymce/ui/DomUtils","tinymce/ui/Control"],function(e,t){return function(n,i){var o,r=this,a=t.classPrefix;r.show=function(t){return r.hide(),o=!0,window.setTimeout(function(){o&&n.appendChild(e.createFragment('<div class="'+a+"throbber"+(i?" "+a+"throbber-inline":"")+'"></div>'))},t||0),r},r.hide=function(){var e=n.lastChild;return e&&-1!=e.className.indexOf("throbber")&&e.parentNode.removeChild(e),o=!1,r}}}),r(["tinymce/dom/EventUtils","tinymce/dom/Sizzle","tinymce/util/Tools","tinymce/Env","tinymce/dom/DomQuery","tinymce/html/Styles","tinymce/dom/TreeWalker","tinymce/dom/Range","tinymce/html/Entities","tinymce/dom/DOMUtils","tinymce/dom/ScriptLoader","tinymce/AddOnManager","tinymce/html/Node","tinymce/html/Schema","tinymce/html/SaxParser","tinymce/html/DomParser","tinymce/html/Writer","tinymce/html/Serializer","tinymce/dom/Serializer","tinymce/dom/TridentSelection","tinymce/util/VK","tinymce/dom/ControlSelection","tinymce/dom/BookmarkManager","tinymce/dom/Selection","tinymce/dom/ElementUtils","tinymce/Formatter","tinymce/UndoManager","tinymce/EnterKey","tinymce/ForceBlocks","tinymce/EditorCommands","tinymce/util/URI","tinymce/util/Class","tinymce/util/EventDispatcher","tinymce/ui/Selector","tinymce/ui/Collection","tinymce/ui/DomUtils","tinymce/ui/Control","tinymce/ui/Factory","tinymce/ui/KeyboardNavigation","tinymce/ui/Container","tinymce/ui/DragHelper","tinymce/ui/Scrollable","tinymce/ui/Panel","tinymce/ui/Movable","tinymce/ui/Resizable","tinymce/ui/FloatPanel","tinymce/ui/Window","tinymce/ui/MessageBox","tinymce/WindowManager","tinymce/util/Quirks","tinymce/util/Observable","tinymce/EditorObservable","tinymce/Shortcuts","tinymce/Editor","tinymce/util/I18n","tinymce/FocusManager","tinymce/EditorManager","tinymce/LegacyInput","tinymce/util/XHR","tinymce/util/JSON","tinymce/util/JSONRequest","tinymce/util/JSONP","tinymce/util/LocalStorage","tinymce/Compat","tinymce/ui/Layout","tinymce/ui/AbsoluteLayout","tinymce/ui/Tooltip","tinymce/ui/Widget","tinymce/ui/Button","tinymce/ui/ButtonGroup","tinymce/ui/Checkbox","tinymce/ui/ComboBox","tinymce/ui/ColorBox","tinymce/ui/PanelButton","tinymce/ui/ColorButton","tinymce/util/Color","tinymce/ui/ColorPicker","tinymce/ui/Path","tinymce/ui/ElementPath","tinymce/ui/FormItem","tinymce/ui/Form","tinymce/ui/FieldSet","tinymce/ui/FilePicker","tinymce/ui/FitLayout","tinymce/ui/FlexLayout","tinymce/ui/FlowLayout","tinymce/ui/FormatControls","tinymce/ui/GridLayout","tinymce/ui/Iframe","tinymce/ui/Label","tinymce/ui/Toolbar","tinymce/ui/MenuBar","tinymce/ui/MenuButton","tinymce/ui/ListBox","tinymce/ui/MenuItem","tinymce/ui/Menu","tinymce/ui/Radio","tinymce/ui/ResizeHandle","tinymce/ui/Spacer","tinymce/ui/SplitButton","tinymce/ui/StackLayout","tinymce/ui/TabPanel","tinymce/ui/TextBox","tinymce/ui/Throbber"])}(this),angular.module("mentio",[]).directive("mentio",["mentioUtil","$document","$compile","$log","$timeout",function(e,t,n,i,o){return{restrict:"A",scope:{macros:"=mentioMacros",search:"&mentioSearch",select:"&mentioSelect",items:"=mentioItems",typedTerm:"=mentioTypedTerm",altId:"=mentioId",iframeElement:"=mentioIframeElement",requireLeadingSpace:"=mentioRequireLeadingSpace",selectNotFound:"=mentioSelectNotFound",trimTerm:"=mentioTrimTerm",ngModel:"="},controller:["$scope","$timeout","$attrs",function(n,i,o){n.query=function(e,t){var i=n.triggerCharMap[e];(void 0===n.trimTerm||n.trimTerm)&&(t=t.trim()),i.showMenu(),i.search({term:t}),i.typedTerm=t},n.defaultSearch=function(e){var t=[];angular.forEach(n.items,function(n){n.label.toUpperCase().indexOf(e.term.toUpperCase())>=0&&t.push(n)}),n.localItems=t},n.bridgeSearch=function(e){var t=o.mentioSearch?n.search:n.defaultSearch;t({term:e})},n.defaultSelect=function(e){return n.defaultTriggerChar+e.item.label},n.bridgeSelect=function(e){var t=o.mentioSelect?n.select:n.defaultSelect;return t({item:e})},n.setTriggerText=function(e){n.syncTriggerText&&(n.typedTerm=void 0===n.trimTerm||n.trimTerm?e.trim():e)},n.context=function(){return n.iframeElement?{iframe:n.iframeElement}:void 0},n.replaceText=function(t,o){if(n.hideAll(),e.replaceTriggerText(n.context(),n.targetElement,n.targetElementPath,n.targetElementSelectedOffset,n.triggerCharSet,t,n.requireLeadingSpace,o),!o&&(n.setTriggerText(""),angular.element(n.targetElement).triggerHandler("change"),n.isContentEditable())){n.contentEditableMenuPasted=!0;var r=i(function(){n.contentEditableMenuPasted=!1},200);n.$on("$destroy",function(){i.cancel(r)})}},n.hideAll=function(){for(var e in n.triggerCharMap)n.triggerCharMap.hasOwnProperty(e)&&n.triggerCharMap[e].hideMenu()},n.getActiveMenuScope=function(){for(var e in n.triggerCharMap)if(n.triggerCharMap.hasOwnProperty(e)&&n.triggerCharMap[e].visible)return n.triggerCharMap[e];return null},n.selectActive=function(){for(var e in n.triggerCharMap)n.triggerCharMap.hasOwnProperty(e)&&n.triggerCharMap[e].visible&&n.triggerCharMap[e].selectActive()},n.isActive=function(){for(var e in n.triggerCharMap)if(n.triggerCharMap.hasOwnProperty(e)&&n.triggerCharMap[e].visible)return!0;return!1},n.isContentEditable=function(){return"INPUT"!==n.targetElement.nodeName&&"TEXTAREA"!==n.targetElement.nodeName},n.replaceMacro=function(t,o){o?e.replaceMacroText(n.context(),n.targetElement,n.targetElementPath,n.targetElementSelectedOffset,n.macros,n.macros[t]):(n.replacingMacro=!0,n.timer=i(function(){e.replaceMacroText(n.context(),n.targetElement,n.targetElementPath,n.targetElementSelectedOffset,n.macros,n.macros[t]),angular.element(n.targetElement).triggerHandler("change"),n.replacingMacro=!1},300),n.$on("$destroy",function(){i.cancel(n.timer)}))},n.addMenu=function(e){e.parentScope&&n.triggerCharMap.hasOwnProperty(e.triggerChar)||(n.triggerCharMap[e.triggerChar]=e,void 0===n.triggerCharSet&&(n.triggerCharSet=[]),n.triggerCharSet.push(e.triggerChar),e.setParent(n))},n.$on("menuCreated",function(e,t){(void 0!==o.id||void 0!==o.mentioId)&&(o.id===t.targetElement||void 0!==o.mentioId&&n.altId===t.targetElement)&&n.addMenu(t.scope)}),t.on("click",function(){n.isActive()&&n.$apply(function(){n.hideAll()})}),t.on("keydown keypress paste",function(e){var t=n.getActiveMenuScope();t&&((9===e.which||13===e.which)&&(e.preventDefault(),t.selectActive()),27===e.which&&(e.preventDefault(),t.$apply(function(){t.hideMenu()})),40===e.which&&(e.preventDefault(),t.$apply(function(){t.activateNextItem()}),t.adjustScroll(1)),38===e.which&&(e.preventDefault(),t.$apply(function(){t.activatePreviousItem()}),t.adjustScroll(-1)),(37===e.which||39===e.which)&&e.preventDefault())})}],link:function(t,r,a){function s(e){function n(e){e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()}var i=t.getActiveMenuScope();if(i){if(9===e.which||13===e.which)return n(e),i.selectActive(),!1;if(27===e.which)return n(e),i.$apply(function(){i.hideMenu()}),!1;if(40===e.which)return n(e),i.$apply(function(){i.activateNextItem()}),i.adjustScroll(1),!1;if(38===e.which)return n(e),i.$apply(function(){i.activatePreviousItem()}),i.adjustScroll(-1),!1;if(37===e.which||39===e.which)return n(e),!1}}if(t.triggerCharMap={},t.targetElement=r,a.$set("autocomplete","off"),a.mentioItems){t.localItems=[],t.parentScope=t;var l=a.mentioSearch?' mentio-items="items"':' mentio-items="localItems"';t.defaultTriggerChar=a.mentioTriggerChar?t.$eval(a.mentioTriggerChar):"@";var c='<mentio-menu mentio-search="bridgeSearch(term)" mentio-select="bridgeSelect(item)"'+l;a.mentioTemplateUrl&&(c=c+' mentio-template-url="'+a.mentioTemplateUrl+'"'),c=c+" mentio-trigger-char=\"'"+t.defaultTriggerChar+'\'" mentio-parent-scope="parentScope"/>';var u=n(c),d=u(t);r.parent().append(d),t.$on("$destroy",function(){d.remove()})}a.mentioTypedTerm&&(t.syncTriggerText=!0),t.$watch("iframeElement",function(e){if(e){var n=e.contentWindow.document;n.addEventListener("click",function(){t.isActive()&&t.$apply(function(){t.hideAll()})}),n.addEventListener("keydown",s,!0),t.$on("$destroy",function(){n.removeEventListener("keydown",s)})}}),t.$watch("ngModel",function(n){if(n&&""!==n||t.isActive()){if(void 0===t.triggerCharSet)return void i.error("Error, no mentio-items attribute was provided, and no separate mentio-menus were specified.  Nothing to do.");if(t.contentEditableMenuPasted)return void(t.contentEditableMenuPasted=!1);t.replacingMacro&&(o.cancel(t.timer),t.replacingMacro=!1);var r=t.isActive(),a=t.isContentEditable(),s=e.getTriggerInfo(t.context(),t.triggerCharSet,t.requireLeadingSpace,r);if(void 0!==s&&(!r||r&&(a&&s.mentionTriggerChar===t.currentMentionTriggerChar||!a&&s.mentionPosition===t.currentMentionPosition)))s.mentionSelectedElement&&(t.targetElement=s.mentionSelectedElement,t.targetElementPath=s.mentionSelectedPath,t.targetElementSelectedOffset=s.mentionSelectedOffset),t.setTriggerText(s.mentionText),t.currentMentionPosition=s.mentionPosition,t.currentMentionTriggerChar=s.mentionTriggerChar,t.query(s.mentionTriggerChar,s.mentionText);else{var l=t.typedTerm;t.setTriggerText(""),t.hideAll();var c=e.getMacroMatch(t.context(),t.macros);if(void 0!==c)t.targetElement=c.macroSelectedElement,t.targetElementPath=c.macroSelectedPath,t.targetElementSelectedOffset=c.macroSelectedOffset,t.replaceMacro(c.macroText,c.macroHasTrailingSpace);else if(t.selectNotFound&&l&&""!==l){var u=t.triggerCharMap[t.currentMentionTriggerChar];if(u){var d=u.select({item:{label:l}});"function"==typeof d.then?d.then(t.replaceText):t.replaceText(d,!0)}}}}})}}}]).directive("mentioMenu",["mentioUtil","$rootScope","$log","$window","$document",function(e,t,n,i,o){return{restrict:"E",scope:{search:"&mentioSearch",select:"&mentioSelect",items:"=mentioItems",triggerChar:"=mentioTriggerChar",forElem:"=mentioFor",parentScope:"=mentioParentScope"},templateUrl:function(e,t){return void 0!==t.mentioTemplateUrl?t.mentioTemplateUrl:"mentio-menu.tpl.html"},controller:["$scope",function(e){e.visible=!1,this.activate=e.activate=function(t){e.activeItem=t},this.isActive=e.isActive=function(t){return e.activeItem===t},this.selectItem=e.selectItem=function(t){var n=e.select({item:t});"function"==typeof n.then?n.then(e.parentMentio.replaceText):e.parentMentio.replaceText(n)},e.activateNextItem=function(){var t=e.items.indexOf(e.activeItem);this.activate(e.items[(t+1)%e.items.length])},e.activatePreviousItem=function(){var t=e.items.indexOf(e.activeItem);this.activate(e.items[0===t?e.items.length-1:t-1])},e.isFirstItemActive=function(){var t=e.items.indexOf(e.activeItem);return 0===t},e.isLastItemActive=function(){var t=e.items.indexOf(e.activeItem);return t===e.items.length-1},e.selectActive=function(){e.selectItem(e.activeItem)},e.isVisible=function(){return e.visible},e.showMenu=function(){e.visible||(e.requestVisiblePendingSearch=!0)},e.setParent=function(t){e.parentMentio=t,e.targetElement=t.targetElement}}],link:function(r,a){if(a[0].parentNode.removeChild(a[0]),o[0].body.appendChild(a[0]),r.menuElement=a,r.parentScope)r.parentScope.addMenu(r);else{if(!r.forElem)return void n.error("mentio-menu requires a target element in tbe mentio-for attribute");if(!r.triggerChar)return void n.error("mentio-menu requires a trigger char");t.$broadcast("menuCreated",{targetElement:r.forElem,scope:r})}angular.element(i).bind("resize",function(){if(r.isVisible()){var t=[];t.push(r.triggerChar),e.popUnderMention(r.parentMentio.context(),t,a,r.requireLeadingSpace)}}),r.$watch("items",function(e){e&&e.length>0?(r.activate(e[0]),!r.visible&&r.requestVisiblePendingSearch&&(r.visible=!0,r.requestVisiblePendingSearch=!1)):r.hideMenu()}),r.$watch("isVisible()",function(t){if(t){var n=[];n.push(r.triggerChar),e.popUnderMention(r.parentMentio.context(),n,a,r.requireLeadingSpace)}}),r.parentMentio.$on("$destroy",function(){a.remove()}),r.hideMenu=function(){r.visible=!1,a.css("display","none")},r.adjustScroll=function(e){var t=a[0],n=t.querySelector("ul"),i=t.querySelector("[mentio-menu-item].active");return r.isFirstItemActive()?n.scrollTop=0:r.isLastItemActive()?n.scrollTop=n.scrollHeight:void(1===e?n.scrollTop+=i.offsetHeight:n.scrollTop-=i.offsetHeight)}}}}]).directive("mentioMenuItem",function(){return{restrict:"A",scope:{item:"=mentioMenuItem"},require:"^mentioMenu",link:function(e,t,n,i){e.$watch(function(){return i.isActive(e.item)},function(e){e?t.addClass("active"):t.removeClass("active")}),t.bind("mouseenter",function(){e.$apply(function(){i.activate(e.item)})}),t.bind("click",function(){return i.selectItem(e.item),!1})}}}).filter("unsafe",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]).filter("mentioHighlight",function(){function e(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}return function(t,n,i){if(n){var o=i?'<span class="'+i+'">$&</span>':"<strong>$&</strong>";return(""+t).replace(new RegExp(e(n),"gi"),o)}return t}}),angular.module("mentio").factory("mentioUtil",["$window","$timeout",function(e,t){function n(e,n,r,a){var s,l=h(e,n,a,!1);void 0!==l?(s=o(e)?b(e,m(e).activeElement,l.mentionPosition):v(e,l.mentionPosition),r.css({top:s.top+"px",left:s.left+"px",position:"absolute",zIndex:1e4,display:"block"}),t(function(){i(e,r)},0)):r.css({display:"none"})}function i(t,n){for(var i,o=20,r=100,a=n[0];void 0===i||0===i.height;)if(i=a.getBoundingClientRect(),0===i.height&&(a=a.childNodes[0],void 0===a||!a.getBoundingClientRect))return;var s=i.top,l=s+i.height;if(0>s)e.scrollTo(0,e.pageYOffset+i.top-o);else if(l>e.innerHeight){var c=e.pageYOffset+i.top-o;c-e.pageYOffset>r&&(c=e.pageYOffset+r);var u=e.pageYOffset-(e.innerHeight-l);u>c&&(u=c),e.scrollTo(0,u)}}function o(e){var t=m(e).activeElement;if(null!==t){var n=t.nodeName,i=t.getAttribute("type");return"INPUT"===n&&"text"===i||"TEXTAREA"===n}return!1}function r(e,t,n,i){var o,r=t;if(n)for(var a=0;a<n.length;a++){if(r=r.childNodes[n[a]],void 0===r)return;for(;r.length<i;)i-=r.length,r=r.nextSibling;0!==r.childNodes.length||r.length||(r=r.previousSibling)}var s=p(e);o=m(e).createRange(),o.setStart(r,i),o.setEnd(r,i),o.collapse(!0);try{s.removeAllRanges()}catch(l){}s.addRange(o),t.focus()}function a(e,t,n,i){var o,r;r=p(e),o=m(e).createRange(),o.setStart(r.anchorNode,n),o.setEnd(r.anchorNode,i),o.deleteContents();var a=m(e).createElement("div");a.innerHTML=t;for(var s,l,c=m(e).createDocumentFragment();s=a.firstChild;)l=c.appendChild(s);o.insertNode(c),l&&(o=o.cloneRange(),o.setStartAfter(l),o.collapse(!0),r.removeAllRanges(),r.addRange(o))}function s(e,t,n,i){var o=t.nodeName;"INPUT"===o||"TEXTAREA"===o?t!==m(e).activeElement&&t.focus():r(e,t,n,i)}function l(e,t,n,i,r,l){s(e,t,n,i);var c=d(e,r);if(c.macroHasTrailingSpace&&(c.macroText=c.macroText+" ",l+=" "),void 0!==c){var u=m(e).activeElement;if(o(e)){var f=c.macroPosition,h=c.macroPosition+c.macroText.length;u.value=u.value.substring(0,f)+l+u.value.substring(h,u.value.length),u.selectionStart=f+l.length,u.selectionEnd=f+l.length}else a(e,l,c.macroPosition,c.macroPosition+c.macroText.length)}}function c(e,t,n,i,r,l,c,u){s(e,t,n,i);var d=h(e,r,c,!0,u);if(void 0!==d)if(o()){var f=m(e).activeElement;l+=" ";var p=d.mentionPosition,g=d.mentionPosition+d.mentionText.length+1;f.value=f.value.substring(0,p)+l+f.value.substring(g,f.value.length),f.selectionStart=p+l.length,f.selectionEnd=p+l.length}else l+=" ",a(e,l,d.mentionPosition,d.mentionPosition+d.mentionText.length+1)}function u(e,t){if(null===t.parentNode)return 0;for(var n=0;n<t.parentNode.childNodes.length;n++){var i=t.parentNode.childNodes[n];if(i===t)return n}}function d(e,t){var n,i,r=[];if(o(e))n=m(e).activeElement;else{var a=f(e);a&&(n=a.selected,r=a.path,i=a.offset)}var s=g(e);if(void 0!==s&&null!==s){var l,c=!1;if(s.length>0&&(" "===s.charAt(s.length-1)||" "===s.charAt(s.length-1))&&(c=!0,s=s.substring(0,s.length-1)),angular.forEach(t,function(e,t){var o=s.toUpperCase().lastIndexOf(t.toUpperCase());if(o>=0&&t.length+o===s.length){var a=o-1;(0===o||" "===s.charAt(a)||" "===s.charAt(a))&&(l={macroPosition:o,macroText:t,macroSelectedElement:n,macroSelectedPath:r,macroSelectedOffset:i,macroHasTrailingSpace:c})}}),l)return l}}function f(e){var t,n=p(e),i=n.anchorNode,o=[];if(null!=i){for(var r,a=i.contentEditable;null!==i&&"true"!==a;)r=u(e,i),o.push(r),i=i.parentNode,null!==i&&(a=i.contentEditable);return o.reverse(),t=n.getRangeAt(0).startOffset,{selected:i,path:o,offset:t}}}function h(e,t,n,i,r){var a,s,l;if(o(e))a=m(e).activeElement;else{var c=f(e);c&&(a=c.selected,s=c.path,l=c.offset)}var u=g(e);if(void 0!==u&&null!==u){var d,h=-1;if(t.forEach(function(e){var t=u.lastIndexOf(e);t>h&&(h=t,d=e)}),h>=0&&(0===h||!n||/[\xA0\s]/g.test(u.substring(h-1,h)))){var p=u.substring(h+1,u.length);d=u.substring(h,h+1);var v=p.substring(0,1),y=p.length>0&&(" "===v||" "===v);if(r&&(p=p.trim()),!y&&(i||!/[\xA0\s]/g.test(p)))return{mentionPosition:h,mentionText:p,mentionSelectedElement:a,mentionSelectedPath:s,mentionSelectedOffset:l,mentionTriggerChar:d}}}}function p(e){return e?e.iframe.contentWindow.getSelection():window.getSelection()}function m(e){return e?e.iframe.contentWindow.document:document}function g(e){var t;if(o(e)){var n=m(e).activeElement,i=n.selectionStart;t=n.value.substring(0,i)}else{var r=p(e).anchorNode;if(null!=r){var a=r.textContent,s=p(e).getRangeAt(0).startOffset;s>=0&&(t=a.substring(0,s))}}return t}function v(e,t){var n,i,o="\ufeff",r="sel_"+(new Date).getTime()+"_"+Math.random().toString().substr(2),a=p(e),s=a.getRangeAt(0);i=m(e).createRange(),i.setStart(a.anchorNode,t),i.setEnd(a.anchorNode,t),i.collapse(!1),n=m(e).createElement("span"),n.id=r,n.appendChild(m(e).createTextNode(o)),i.insertNode(n),a.removeAllRanges(),a.addRange(s);var l={left:0,top:n.offsetHeight};return y(e,n,l),n.parentNode.removeChild(n),l}function y(e,t,n){for(var i=t,o=e?e.iframe:null;i;)n.left+=i.offsetLeft,n.top+=i.offsetTop,i!==m().body&&(n.top-=i.scrollTop,n.left-=i.scrollLeft),i=i.offsetParent,!i&&o&&(i=o,o=null)}function b(e,t,n){var i=["direction","boxSizing","width","height","overflowX","overflowY","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","paddingTop","paddingRight","paddingBottom","paddingLeft","fontStyle","fontVariant","fontWeight","fontStretch","fontSize","fontSizeAdjust","lineHeight","fontFamily","textAlign","textTransform","textIndent","textDecoration","letterSpacing","wordSpacing"],o=null!==window.mozInnerScreenX,r=m(e).createElement("div");r.id="input-textarea-caret-position-mirror-div",m(e).body.appendChild(r);var a=r.style,s=window.getComputedStyle?getComputedStyle(t):t.currentStyle;a.whiteSpace="pre-wrap","INPUT"!==t.nodeName&&(a.wordWrap="break-word"),a.position="absolute",a.visibility="hidden",i.forEach(function(e){a[e]=s[e]}),o?(a.width=parseInt(s.width)-2+"px",t.scrollHeight>parseInt(s.height)&&(a.overflowY="scroll")):a.overflow="hidden",r.textContent=t.value.substring(0,n),"INPUT"===t.nodeName&&(r.textContent=r.textContent.replace(/\s/g," "));var l=m(e).createElement("span");l.textContent=t.value.substring(n)||".",r.appendChild(l);var c={top:l.offsetTop+parseInt(s.borderTopWidth)+parseInt(s.fontSize),left:l.offsetLeft+parseInt(s.borderLeftWidth)};return y(e,t,c),m(e).body.removeChild(r),c}return{popUnderMention:n,replaceMacroText:l,replaceTriggerText:c,getMacroMatch:d,getTriggerInfo:h,selectElement:r,getTextAreaOrInputUnderlinePosition:b,getTextPrecedingCurrentSelection:g,getContentEditableSelectedPath:f,getNodePositionInParent:u,getContentEditableCaretPosition:v,pasteHtml:a,resetSelection:s,scrollIntoView:i}}]),angular.module("mentio").run(["$templateCache",function(e){e.put("mentio-menu.tpl.html",'<style>\n.scrollable-menu {\n    height: auto;\n    max-height: 300px;\n    overflow: auto;\n}\n\n.menu-highlighted {\n    font-weight: bold;\n}\n</style>\n<ul class="dropdown-menu scrollable-menu" style="display:block">\n    <li mentio-menu-item="item" ng-repeat="item in items track by $index">\n        <a class="text-primary" ng-bind-html="item.label | mentioHighlight:typedTerm:\'menu-highlighted\' | unsafe"></a>\n    </li>\n</ul>')}]),/**
 * angular-strap
 * @version v2.1.6 - 2015-01-11
 * @link http://mgcrea.github.io/angular-strap
 * @author Olivier Louvignes (olivier@mg-crea.com)
 * @license MIT License, http://www.opensource.org/licenses/MIT
 */
function(e,t,n){"use strict";angular.module("mgcrea.ngStrap",["mgcrea.ngStrap.tooltip","mgcrea.ngStrap.popover"]),angular.module("mgcrea.ngStrap.helpers.dimensions",[]).factory("dimensions",["$document","$window",function(t,n){var i=(angular.element,{}),o=i.nodeName=function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()};i.css=function(t,n,i){var o;return o=t.currentStyle?t.currentStyle[n]:e.getComputedStyle?e.getComputedStyle(t)[n]:t.style[n],i===!0?parseFloat(o)||0:o},i.offset=function(t){var n=t.getBoundingClientRect(),i=t.ownerDocument;return{width:n.width||t.offsetWidth,height:n.height||t.offsetHeight,top:n.top+(e.pageYOffset||i.documentElement.scrollTop)-(i.documentElement.clientTop||0),left:n.left+(e.pageXOffset||i.documentElement.scrollLeft)-(i.documentElement.clientLeft||0)}},i.position=function(e){var t,n,a={top:0,left:0};return"fixed"===i.css(e,"position")?n=e.getBoundingClientRect():(t=r(e),n=i.offset(e),o(t,"html")||(a=i.offset(t)),a.top+=i.css(t,"borderTopWidth",!0),a.left+=i.css(t,"borderLeftWidth",!0)),{width:e.offsetWidth,height:e.offsetHeight,top:n.top-a.top-i.css(e,"marginTop",!0),left:n.left-a.left-i.css(e,"marginLeft",!0)}};var r=function(e){var t=e.ownerDocument,n=e.offsetParent||t;if(o(n,"#document"))return t.documentElement;for(;n&&!o(n,"html")&&"static"===i.css(n,"position");)n=n.offsetParent;return n||t.documentElement};return i.height=function(e,t){var n=e.offsetHeight;return t?n+=i.css(e,"marginTop",!0)+i.css(e,"marginBottom",!0):n-=i.css(e,"paddingTop",!0)+i.css(e,"paddingBottom",!0)+i.css(e,"borderTopWidth",!0)+i.css(e,"borderBottomWidth",!0),n},i.width=function(e,t){var n=e.offsetWidth;return t?n+=i.css(e,"marginLeft",!0)+i.css(e,"marginRight",!0):n-=i.css(e,"paddingLeft",!0)+i.css(e,"paddingRight",!0)+i.css(e,"borderLeftWidth",!0)+i.css(e,"borderRightWidth",!0),n},i}]),angular.module("mgcrea.ngStrap.popover",["mgcrea.ngStrap.tooltip"]).provider("$popover",function(){var e=this.defaults={animation:"am-fade",customClass:"",container:!1,target:!1,placement:"right",template:"popover/popover.tpl.html",contentTemplate:!1,trigger:"click",keyboard:!0,html:!1,title:"",content:"",delay:0,autoClose:!1};this.$get=["$bstooltip",function(t){function n(n,i){var o=angular.extend({},e,i),r=t(n,o);return o.content&&(r.$scope.content=o.content),r}return n}]}).directive("bsPopover",["$window","$sce","$popover",function(e,t,n){var i=e.requestAnimationFrame||e.setTimeout;return{restrict:"EAC",scope:!0,link:function(e,o,r){var a={scope:e};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","customClass","autoClose","id"],function(e){angular.isDefined(r[e])&&(a[e]=r[e])}),angular.forEach(["title","content"],function(n){r[n]&&r.$observe(n,function(o,r){e[n]=t.trustAsHtml(o),angular.isDefined(r)&&i(function(){s&&s.$applyPlacement()})})}),r.bsPopover&&e.$watch(r.bsPopover,function(t,n){angular.isObject(t)?angular.extend(e,t):e.content=t,angular.isDefined(n)&&i(function(){s&&s.$applyPlacement()})},!0),r.bsShow&&e.$watch(r.bsShow,function(e,t){s&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(popover),?/i)),e===!0?s.show():s.hide())});var s=n(o,a);e.$on("$destroy",function(){s&&s.destroy(),a=null,s=null})}}}]),angular.module("mgcrea.ngStrap.tooltip",["mgcrea.ngStrap.helpers.dimensions"]).provider("$bstooltip",function(){var e=this.defaults={animation:"am-fade",customClass:"",prefixClass:"tooltip",prefixEvent:"tooltip",container:!1,target:!1,placement:"top",template:"tooltip/tooltip.tpl.html",contentTemplate:!1,trigger:"hover focus",keyboard:!1,html:!1,show:!1,title:"",type:"",delay:0,autoClose:!1,bsEnabled:!0};this.$get=["$window","$rootScope","$compile","$q","$templateCache","$http","$animate","$sce","dimensions","$$rAF","$timeout",function(n,i,o,r,a,s,l,c,u,d,f){function h(n,r){function a(){M.$emit(L.prefixEvent+".show",R)}function s(){if(M.$emit(L.prefixEvent+".hide",R),F===j){if(U&&"focus"===L.trigger)return n[0].blur();N()}}function h(){var e=L.trigger.split(" ");angular.forEach(e,function(e){"click"===e?n.on("click",R.toggle):"manual"!==e&&(n.on("hover"===e?"mouseenter":"focus",R.enter),n.on("hover"===e?"mouseleave":"blur",R.leave),"button"===D&&"hover"!==e&&n.on(y?"touchstart":"mousedown",R.$onFocusElementMouseDown))})}function w(){for(var e=L.trigger.split(" "),t=e.length;t--;){var i=e[t];"click"===i?n.off("click",R.toggle):"manual"!==i&&(n.off("hover"===i?"mouseenter":"focus",R.enter),n.off("hover"===i?"mouseleave":"blur",R.leave),"button"===D&&"hover"!==i&&n.off(y?"touchstart":"mousedown",R.$onFocusElementMouseDown))}}function C(){"focus"!==L.trigger?F.on("keyup",R.$onKeyUp):n.on("keyup",R.$onFocusKeyUp)}function k(){"focus"!==L.trigger?F.off("keyup",R.$onKeyUp):n.off("keyup",R.$onFocusKeyUp)}function S(){f(function(){F.on("click",$),x.on("click",R.hide),V=!0},0,!1)}function T(){V&&(F.off("click",$),x.off("click",R.hide),V=!1)}function $(e){e.stopPropagation()}function E(e){e=e||L.target||n;var t=e[0],i=t.getBoundingClientRect();null===i.width&&(i=angular.extend({},i,{width:i.right-i.left,height:i.bottom-i.top}));var o;return o="body"===L.container?u.offset(t):u.position(t),angular.extend({},i,o)}function _(e,t,n,i){var o,r=e.split("-");switch(r[0]){case"right":o={top:t.top+t.height/2-i/2,left:t.left+t.width};break;case"bottom":o={top:t.top+t.height,left:t.left+t.width/2-n/2};break;case"left":o={top:t.top+t.height/2-i/2,left:t.left-n};break;default:o={top:t.top-i,left:t.left+t.width/2-n/2}}if(!r[1])return o;if("top"===r[0]||"bottom"===r[0])switch(r[1]){case"left":o.left=t.left;break;case"right":o.left=t.left+t.width-n}else if("left"===r[0]||"right"===r[0])switch(r[1]){case"top":o.top=t.top-i;break;case"bottom":o.top=t.top+t.height}return o}function A(e,t){F.css({top:e+"px",left:t+"px"})}function N(){clearTimeout(O),R.$isShown&&null!==F&&(L.autoClose&&T(),L.keyboard&&k()),W&&(W.$destroy(),W=null),F&&(F.remove(),F=R.$element=null)}var R={},D=n[0].nodeName.toLowerCase(),L=R.$options=angular.extend({},e,r);R.$promise=g(L.template);var M=R.$scope=L.scope&&L.scope.$new()||i.$new();if(L.delay&&angular.isString(L.delay)){var P=L.delay.split(",").map(parseFloat);L.delay=P.length>1?{show:P[0],hide:P[1]}:P[0]}R.$id=L.id||n.attr("id")||"",L.title&&(M.title=c.trustAsHtml(L.title)),M.$setEnabled=function(e){M.$$postDigest(function(){R.setEnabled(e)})},M.$hide=function(){M.$$postDigest(function(){R.hide()})},M.$show=function(){M.$$postDigest(function(){R.show()})},M.$toggle=function(){M.$$postDigest(function(){R.toggle()})},R.$isShown=M.$isShown=!1;var O,B;L.contentTemplate&&(R.$promise=R.$promise.then(function(e){var t=angular.element(e);return g(L.contentTemplate).then(function(e){var n=m('[ng-bind="content"]',t[0]);return n.length||(n=m('[ng-bind="title"]',t[0])),n.removeAttr("ng-bind").html(e),t[0].outerHTML})}));var I,F,H,z,W;R.$promise.then(function(e){angular.isObject(e)&&(e=e.data),L.html&&(e=e.replace(b,'ng-bind-html="')),e=v.apply(e),H=e,I=o(e),R.init()}),R.init=function(){L.delay&&angular.isNumber(L.delay)&&(L.delay={show:L.delay,hide:L.delay}),"self"===L.container?z=n:angular.isElement(L.container)?z=L.container:L.container&&(z=m(L.container)),h(),L.target&&(L.target=angular.isElement(L.target)?L.target:m(L.target)),L.show&&M.$$postDigest(function(){"focus"===L.trigger?n[0].focus():R.show()})},R.destroy=function(){w(),N(),M.$destroy()},R.enter=function(){return clearTimeout(O),B="in",L.delay&&L.delay.show?void(O=setTimeout(function(){"in"===B&&R.show()},L.delay.show)):R.show()},R.show=function(){if(L.bsEnabled&&!R.$isShown){M.$emit(L.prefixEvent+".show.before",R);var e,t;L.container?(e=z,t=z[0].lastChild?angular.element(z[0].lastChild):null):(e=null,t=n),F&&N(),W=R.$scope.$new(),F=R.$element=I(W,function(e,t){}),F.css({top:"-9999px",left:"-9999px",display:"block",visibility:"hidden"}),L.animation&&F.addClass(L.animation),L.type&&F.addClass(L.prefixClass+"-"+L.type),L.customClass&&F.addClass(L.customClass);var i=l.enter(F,e,t,a);i&&i.then&&i.then(a),R.$isShown=M.$isShown=!0,p(M),d(function(){R.$applyPlacement(),F&&F.css({visibility:"visible"})}),L.keyboard&&("focus"!==L.trigger&&R.focus(),C()),L.autoClose&&S()}},R.leave=function(){return clearTimeout(O),B="out",L.delay&&L.delay.hide?void(O=setTimeout(function(){"out"===B&&R.hide()},L.delay.hide)):R.hide()};var U,j;R.hide=function(e){if(R.$isShown){M.$emit(L.prefixEvent+".hide.before",R),U=e,j=F;var t=l.leave(F,s);t&&t.then&&t.then(s),R.$isShown=M.$isShown=!1,p(M),L.keyboard&&null!==F&&k(),L.autoClose&&null!==F&&T()}},R.toggle=function(){R.$isShown?R.leave():R.enter()},R.focus=function(){F[0].focus()},R.setEnabled=function(e){L.bsEnabled=e},R.$applyPlacement=function(){if(F){var i=L.placement,o=/\s?auto?\s?/i,r=o.test(i);r&&(i=i.replace(o,"")||e.placement),F.addClass(L.placement);var a=E(),s=F.prop("offsetWidth"),l=F.prop("offsetHeight");if(r){var c=i,u=L.container?angular.element(t.querySelector(L.container)):n.parent(),d=E(u);c.indexOf("bottom")>=0&&a.bottom+l>d.bottom?i=c.replace("bottom","top"):c.indexOf("top")>=0&&a.top-l<d.top&&(i=c.replace("top","bottom")),("right"===c||"bottom-left"===c||"top-left"===c)&&a.right+s>d.width?i="right"===c?"left":i.replace("left","right"):("left"===c||"bottom-right"===c||"top-right"===c)&&a.left-s<d.left&&(i="left"===c?"right":i.replace("right","left")),F.removeClass(c).addClass(i)}var f=_(i,a,s,l);A(f.top,f.left)}},R.$onKeyUp=function(e){27===e.which&&R.$isShown&&(R.hide(),e.stopPropagation())},R.$onFocusKeyUp=function(e){27===e.which&&(n[0].blur(),e.stopPropagation())},R.$onFocusElementMouseDown=function(e){e.preventDefault(),e.stopPropagation(),R.$isShown?n[0].blur():n[0].focus()};var V=!1;return R}function p(e){e.$$phase||e.$root&&e.$root.$$phase||e.$digest()}function m(e,n){return angular.element((n||t).querySelectorAll(e))}function g(e){return w[e]?w[e]:w[e]=r.when(a.get(e)||s.get(e)).then(function(t){return angular.isObject(t)?(a.put(e,t.data),t.data):t})}var v=String.prototype.trim,y="createTouch"in n.document,b=/ng-bind="/gi,x=angular.element(n.document),w={};return h}]}).directive("bsTooltip",["$window","$location","$sce","$bstooltip","$$rAF",function(e,t,n,i,o){return{restrict:"EAC",scope:!0,link:function(e,t,r,a){var s={scope:e};angular.forEach(["template","contentTemplate","placement","container","target","delay","trigger","keyboard","html","animation","backdropAnimation","type","customClass","id"],function(e){angular.isDefined(r[e])&&(s[e]=r[e])}),e.hasOwnProperty("title")||(e.title=""),r.$observe("title",function(t){if(angular.isDefined(t)||!e.hasOwnProperty("title")){var i=e.title;e.title=n.trustAsHtml(t),angular.isDefined(i)&&o(function(){l&&l.$applyPlacement()})}}),r.bsTooltip&&e.$watch(r.bsTooltip,function(t,n){angular.isObject(t)?angular.extend(e,t):e.title=t,angular.isDefined(n)&&o(function(){l&&l.$applyPlacement()})},!0),r.bsShow&&e.$watch(r.bsShow,function(e,t){l&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|,?(tooltip),?/i)),e===!0?l.show():l.hide())}),r.bsEnabled&&e.$watch(r.bsEnabled,function(e,t){l&&angular.isDefined(e)&&(angular.isString(e)&&(e=!!e.match(/true|1|,?(tooltip),?/i)),e===!1?l.setEnabled(!1):l.setEnabled(!0))});var l=i(t,s);e.$on("$destroy",function(){l&&l.destroy(),s=null,l=null})}}}])}(window,document),angular.module("formly.render",[]),angular.module("formly",["formly.render"]),angular.module("formly.render").directive("formlyField",["$http","$compile","$templateCache","formlyTemplate",function(e,t,n,i){return{restrict:"AE",transclude:!0,scope:{optionsData:"&options",editmode:"@editmode",formId:"=formId",index:"=index",value:"=formValue",toolbarConfigurationOverride:"<?"},link:function(o,r,a){function s(e){r.html(e),t(r.contents())(o)}var l=o.options.template;if(l)s(l);else{var c=o.options.type;"textarea"!=o.options.type||o.options.properties&&o.options.properties.html||(c+="_nohtml");var u=o.options.templateUrl||i.getTemplateUrl(c);u?e.get(u,{cache:n}).then(function(e){s(e.data)},function(e){window.console&&window.console.log("Formly Error: Problem loading template for "+u,e)}):window.console&&window.console.log("Formly Error: template type '"+o.options.type+"' not supported.")}},controller:["$scope",function(e){e.options=e.optionsData(),"undefined"!=typeof e.options["default"]&&(e.value=e.options["default"]);var t=e.options.type;!t&&e.options.template?t="template":!t&&e.options.templateUrl&&(t="templateUrl"),e.id=e.formId+t+e.index}]}}]),angular.module("formly.render").directive("formlyForm",["formlyOptions","$compile",function(e,t){return{restrict:"AE",templateUrl:"Webform/Templates/formly/formly-form.html",replace:!0,scope:{fields:"=",options:"=?",result:"=",formOnParentScope:"=name",toolbarConfigurationOverride:"<?"},compile:function(n,i,o,r,a){return{post:function(n,i,o,r){n.options=angular.extend(e.getOptions(),n.options),n.options.submitButtonTemplate&&i.find("button").replaceWith(t(n.options.submitButtonTemplate)(n)),n.formOnParentScope=n[o.name]}}},controller:["$scope","$element","$parse",function(e,t,n){angular.forEach(e.fields,function(t,n){if(angular.isDefined(t.watch)){var i=t.watch.expression;angular.isFunction(i)&&(i=function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(t),t.watch.expression.apply(this,e)}),e.$watch(i,function(){var e=Array.prototype.slice.call(arguments,0);return e.unshift(t),t.watch.listener.apply(this,e)})}}),e.$watch("result",function(t){angular.forEach(e.fields,function(t,i){t.hideExpression&&(t.hide=n(t.hideExpression)(e.result))})},!0)}]}}]),angular.module("formly.render").provider("formlyOptions",function(){function e(t,i){"string"==typeof t?n[t]=i:angular.forEach(t,function(t,n){e(n,t)})}function t(){return angular.copy(n)}var n={uniqueFormId:null,submitCopy:"Submit",hideSubmit:!1,submitButtonTemplate:null};this.setOption=e,this.getOptions=t,this.$get=function(){return this}}),angular.module("formly.render").provider("formlyTemplate",function(){function e(t,i){"string"==typeof t?n[t]=i:angular.forEach(t,function(t,n){e(n,t)})}function t(e){return n[e]}var n={textarea:"Webform/Templates/formly/formly-field-textarea.html",textarea_nohtml:"Webform/Templates/formly/formly-field-textarea_nohtml.html",radio:"Webform/Templates/formly/formly-field-radio.html",select:"Webform/Templates/formly/formly-field-select.html",number:"Webform/Templates/formly/formly-field-number.html",checkbox:"Webform/Templates/formly/formly-field-checkbox.html",password:"Webform/Templates/formly/formly-field-password.html",hidden:"Webform/Templates/formly/formly-field-hidden.html",email:"Webform/Templates/formly/formly-field-email.html",text:"Webform/Templates/formly/formly-field-text.html",user:"Webform/Templates/formly/formly-field-user.html",html:"Webform/Templates/formly/formly-field-html.html",datetime:"Webform/Templates/formly/formly-field-datetime.html",taxonomy:"Webform/Templates/formly/formly-field-taxonomy.html",attachment:"Webform/Templates/formly/formly-field-attachment.html",checkboxlist:"Webform/Templates/formly/formly-field-checklist.html",imagepicker:"Webform/Templates/formly/formly-field-imagepicker.html"};this.setTemplateUrl=e,this.getTemplateUrl=t,this.$get=function(){return this}}),/* Copyright (c) 2012, 2014 Hyeonje Alex Jun and other contributors
 * Licensed under the MIT License
 */
function(e){"use strict";e(jQuery)}(function(e){"use strict";var t={wheelSpeed:10,wheelPropagation:!1,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,includePadding:!1},n=function(){var e=0;return function(){var t=e;return e+=1,".perfect-scrollbar-"+t}}();e.fn.perfectScrollbar=function(i,o){return this.each(function(){var r=e.extend(!0,{},t),a=e(this);if("object"==typeof i?e.extend(!0,r,i):o=i,"update"===o)return a.data("perfect-scrollbar-update")&&a.data("perfect-scrollbar-update")(),a;if("destroy"===o)return a.data("perfect-scrollbar-destroy")&&a.data("perfect-scrollbar-destroy")(),a;if(a.data("perfect-scrollbar"))return a.data("perfect-scrollbar");a.addClass("ps-container");var s,l,c,u,d,f,h,p,m,g,v=e("<div class='ps-scrollbar-x-rail'></div>").appendTo(a),y=e("<div class='ps-scrollbar-y-rail'></div>").appendTo(a),b=e("<div class='ps-scrollbar-x'></div>").appendTo(v),x=e("<div class='ps-scrollbar-y'></div>").appendTo(y),w=parseInt(v.css("bottom"),10),C=w===w,k=C?null:parseInt(v.css("top"),10),S=parseInt(y.css("right"),10),T=S===S,$=T?null:parseInt(y.css("left"),10),E="rtl"===a.css("direction"),_=n(),A=parseInt(v.css("borderLeftWidth"),10)+parseInt(v.css("borderRightWidth"),10),N=parseInt(v.css("borderTopWidth"),10)+parseInt(v.css("borderBottomWidth"),10),R=function(e,t){var n=e+t,i=u-m;g=0>n?0:n>i?i:n;var o=parseInt(g*(f-u)/(u-m),10);a.scrollTop(o),C?v.css({bottom:w-o}):v.css({top:k+o})},D=function(e,t){var n=e+t,i=c-h;p=0>n?0:n>i?i:n;var o=parseInt(p*(d-c)/(c-h),10);a.scrollLeft(o),T?y.css({right:S-o}):y.css({left:$+o})},L=function(e){return r.minScrollbarLength&&(e=Math.max(e,r.minScrollbarLength)),r.maxScrollbarLength&&(e=Math.min(e,r.maxScrollbarLength)),e},M=function(){var e={width:c,display:s?"inherit":"none"};E?e.left=a.scrollLeft()+c-d:e.left=a.scrollLeft(),C?e.bottom=w-a.scrollTop():e.top=k+a.scrollTop(),v.css(e);var t={top:a.scrollTop(),height:u,display:l?"inherit":"none"};T?E?t.right=d-a.scrollLeft()-S-x.outerWidth():t.right=S-a.scrollLeft():E?t.left=a.scrollLeft()+2*c-d-$-x.outerWidth():t.left=$+a.scrollLeft(),y.css(t),b.css({left:p,width:h-A}),x.css({top:g,height:m-N}),s?a.addClass("ps-active-x"):a.removeClass("ps-active-x"),l?a.addClass("ps-active-y"):a.removeClass("ps-active-y")},P=function(){c=r.includePadding?a.innerWidth():a.width(),u=r.includePadding?a.innerHeight():a.height(),d=a.prop("scrollWidth"),f=a.prop("scrollHeight"),!r.suppressScrollX&&c+r.scrollXMarginOffset<d?(s=!0,h=L(parseInt(c*c/d,10)),p=parseInt(a.scrollLeft()*(c-h)/(d-c),10)):(s=!1,h=0,p=0,a.scrollLeft(0)),!r.suppressScrollY&&u+r.scrollYMarginOffset<f?(l=!0,m=L(parseInt(u*u/f,10)),g=parseInt(a.scrollTop()*(u-m)/(f-u),10)):(l=!1,m=0,g=0,a.scrollTop(0)),g>=u-m&&(g=u-m),p>=c-h&&(p=c-h),M()},O=function(){var t,n;b.bind("mousedown"+_,function(e){n=e.pageX,t=b.position().left,v.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove"+_,function(e){v.hasClass("in-scrolling")&&(D(t,e.pageX-n),e.stopPropagation(),e.preventDefault())}),e(document).bind("mouseup"+_,function(e){v.hasClass("in-scrolling")&&v.removeClass("in-scrolling")}),t=n=null},B=function(){var t,n;x.bind("mousedown"+_,function(e){n=e.pageY,t=x.position().top,y.addClass("in-scrolling"),e.stopPropagation(),e.preventDefault()}),e(document).bind("mousemove"+_,function(e){y.hasClass("in-scrolling")&&(R(t,e.pageY-n),e.stopPropagation(),e.preventDefault())}),e(document).bind("mouseup"+_,function(e){y.hasClass("in-scrolling")&&y.removeClass("in-scrolling")}),t=n=null},I=function(e,t){var n=a.scrollTop();if(0===e){if(!l)return!1;if(0===n&&t>0||n>=f-u&&0>t)return!r.wheelPropagation}var i=a.scrollLeft();if(0===t){if(!s)return!1;if(0===i&&0>e||i>=d-c&&e>0)return!r.wheelPropagation}return!0},F=function(){r.wheelSpeed/=10;var e=!1;a.bind("mousewheel"+_,function(t,n,i,o){var c=t.deltaX*t.deltaFactor||i,u=t.deltaY*t.deltaFactor||o;e=!1,r.useBothWheelAxes?l&&!s?(u?a.scrollTop(a.scrollTop()-u*r.wheelSpeed):a.scrollTop(a.scrollTop()+c*r.wheelSpeed),e=!0):s&&!l&&(c?a.scrollLeft(a.scrollLeft()+c*r.wheelSpeed):a.scrollLeft(a.scrollLeft()-u*r.wheelSpeed),e=!0):(a.scrollTop(a.scrollTop()-u*r.wheelSpeed),a.scrollLeft(a.scrollLeft()+c*r.wheelSpeed)),P(),e=e||I(c,u),e&&(t.stopPropagation(),t.preventDefault())}),a.bind("MozMousePixelScroll"+_,function(t){e&&t.preventDefault()})},H=function(){var t=!1;a.bind("mouseenter"+_,function(e){t=!0}),a.bind("mouseleave"+_,function(e){t=!1});var n=!1;e(document).bind("keydown"+_,function(i){if((!i.isDefaultPrevented||!i.isDefaultPrevented())&&t&&!e(document.activeElement).is(":input,[contenteditable]")){var o=0,r=0;switch(i.which){case 37:o=-30;break;case 38:r=30;break;case 39:o=30;break;case 40:r=-30;break;case 33:r=90;break;case 32:case 34:r=-90;break;case 35:r=-u;break;case 36:r=u;break;default:return}a.scrollTop(a.scrollTop()-r),a.scrollLeft(a.scrollLeft()+o),n=I(o,r),n&&i.preventDefault()}})},z=function(){var e=function(e){e.stopPropagation()};x.bind("click"+_,e),y.bind("click"+_,function(e){var t=parseInt(m/2,10),n=e.pageY-y.offset().top-t,i=u-m,o=n/i;0>o?o=0:o>1&&(o=1),a.scrollTop((f-u)*o)}),b.bind("click"+_,e),v.bind("click"+_,function(e){var t=parseInt(h/2,10),n=e.pageX-v.offset().left-t,i=c-h,o=n/i;0>o?o=0:o>1&&(o=1),a.scrollLeft((d-c)*o)})},W=function(){var t=function(e,t){a.scrollTop(a.scrollTop()-t),a.scrollLeft(a.scrollLeft()-e),P()},n={},i=0,o={},r=null,s=!1;e(window).bind("touchstart"+_,function(e){s=!0}),e(window).bind("touchend"+_,function(e){s=!1}),a.bind("touchstart"+_,function(e){var t=e.originalEvent.targetTouches[0];n.pageX=t.pageX,n.pageY=t.pageY,i=(new Date).getTime(),null!==r&&clearInterval(r),e.stopPropagation()}),a.bind("touchmove"+_,function(e){if(!s&&1===e.originalEvent.targetTouches.length){var r=e.originalEvent.targetTouches[0],a={};a.pageX=r.pageX,a.pageY=r.pageY;var l=a.pageX-n.pageX,c=a.pageY-n.pageY;t(l,c),n=a;var u=(new Date).getTime(),d=u-i;d>0&&(o.x=l/d,o.y=c/d,i=u),e.preventDefault()}}),a.bind("touchend"+_,function(e){clearInterval(r),r=setInterval(function(){return Math.abs(o.x)<.01&&Math.abs(o.y)<.01?void clearInterval(r):(t(30*o.x,30*o.y),o.x*=.8,void(o.y*=.8))},10)})},U=function(){a.bind("scroll"+_,function(e){P()})},j=function(){a.unbind(_),e(window).unbind(_),e(document).unbind(_),a.data("perfect-scrollbar",null),a.data("perfect-scrollbar-update",null),a.data("perfect-scrollbar-destroy",null),b.remove(),x.remove(),v.remove(),y.remove(),v=y=b=x=s=l=c=u=d=f=h=p=w=C=k=m=g=S=T=$=E=_=null},V=function(t){a.addClass("ie").addClass("ie"+t);var n=function(){var t=function(){e(this).addClass("hover")},n=function(){e(this).removeClass("hover")};a.bind("mouseenter"+_,t).bind("mouseleave"+_,n),v.bind("mouseenter"+_,t).bind("mouseleave"+_,n),y.bind("mouseenter"+_,t).bind("mouseleave"+_,n),b.bind("mouseenter"+_,t).bind("mouseleave"+_,n),x.bind("mouseenter"+_,t).bind("mouseleave"+_,n)},i=function(){M=function(){var e={left:p+a.scrollLeft(),width:h};C?e.bottom=w:e.top=k,b.css(e);var t={top:g+a.scrollTop(),height:m};T?t.right=S:t.left=$,x.css(t),b.hide().show(),x.hide().show()}};6===t&&(n(),i())},q="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,Y=function(){var e=navigator.userAgent.toLowerCase().match(/(msie) ([\w.]+)/);e&&"msie"===e[1]&&V(parseInt(e[2],10)),P(),U(),O(),B(),z(),q&&W(),a.mousewheel&&F(),r.useKeyboard&&H(),a.data("perfect-scrollbar",a),a.data("perfect-scrollbar-update",P),a.data("perfect-scrollbar-destroy",j)};return Y(),a})}}),/*! Copyright (c) 2013 Brandon Aaron (http://brandon.aaron.sh)
 * Licensed under the MIT License (LICENSE.txt).
 *
 * Version: 3.1.9
 *
 * Requires: jQuery 1.2.2+
 */
function(e){"function"==typeof define&&define.amd,"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),c=0,u=0,d=0,f=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(u=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(u=-1*d,d=0),c=0===d?u:d,"deltaY"in a&&(d=-1*a.deltaY,c=d),"deltaX"in a&&(u=a.deltaX,0===d&&(c=-1*u)),0!==d||0!==u){if(1===a.deltaMode){var h=e.data(this,"mousewheel-line-height");c*=h,d*=h,u*=h}else if(2===a.deltaMode){var p=e.data(this,"mousewheel-page-height");c*=p,d*=p,u*=p}return f=Math.max(Math.abs(d),Math.abs(u)),(!r||r>f)&&(r=f,i(a,f)&&(r/=40)),i(a,f)&&(c/=40,u/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/r),u=Math[u>=1?"floor":"ceil"](u/r),d=Math[d>=1?"floor":"ceil"](d/r),t.deltaX=u,t.deltaY=d,t.deltaFactor=r,t.deltaMode=0,s.unshift(t,c,u,d),o&&clearTimeout(o),o=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){r=null}function i(e,t){return u.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var o,r,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var c=a.length;c;)e.event.fixHooks[a[--c]]=e.event.mouseHooks;var u=e.event.special.mousewheel={version:"3.1.9",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",u.getLineHeight(this)),e.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var e=s.length;e;)this.removeEventListener(s[--e],t,!1);else this.onmousewheel=null},getLineHeight:function(t){return parseInt(e(t)["offsetParent"in e.fn?"offsetParent":"parent"]().css("fontSize"),10)},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),angular.module("perfect_scrollbar",[]).directive("perfectScrollbar",["$parse","$window",function(e,t){var n=["wheelSpeed","wheelPropagation","minScrollbarLength","useBothWheelAxes","useKeyboard","suppressScrollX","suppressScrollY","scrollXMarginOffset","scrollYMarginOffset","includePadding"];return{restrict:"EA",transclude:!0,template:"<div><div ng-transclude></div></div>",replace:!0,link:function(i,o,r){function a(e){i.$evalAsync(function(){"true"==r.scrollDown&&"mouseenter"!=e&&setTimeout(function(){$(o).scrollTop($(o).prop("scrollHeight"))},100),o.perfectScrollbar("update")})}for(var s=angular.element(t),l={},c=0,u=n.length;u>c;c++){var d=n[c];void 0!==r[d]&&(l[d]=e(r[d])())}i.$evalAsync(function(){o.perfectScrollbar(l);var t=e(r.onScroll);o.scroll(function(){var e=o.scrollTop(),n=o.prop("scrollHeight")-o.height();i.$apply(function(){t(i,{scrollTop:e,scrollHeight:n})})})}),o.bind("mouseenter",a("mouseenter")),r.refreshOnChange&&i.$watchCollection(r.refreshOnChange,function(){a()}),r.refreshOnResize&&s.on("resize",a),o.bind("$destroy",function(){s.off("resize",a),o.perfectScrollbar("destroy")})}}}]),/*!
 @package noty - jQuery Notification Plugin
 @version version: 2.3.0
 @contributors https://github.com/needim/noty/graphs/contributors

 @documentation Examples and Documentation - http://needim.github.com/noty/

 @license Licensed under the MIT licenses: http://www.opensource.org/licenses/mit-license.php
 */
"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t});var NotyObject={init:function(e){return this.options=$.extend({},$.noty.defaults,e),this.options.layout=this.options.custom?$.noty.layouts.inline:$.noty.layouts[this.options.layout],$.noty.themes[this.options.theme]?this.options.theme=$.noty.themes[this.options.theme]:e.themeClassName=this.options.theme,delete e.layout,delete e.theme,this.options=$.extend({},this.options,this.options.layout.options),this.options.id="noty_"+(new Date).getTime()*Math.floor(1e6*Math.random()),this.options=$.extend({},this.options,e),this._build(),this},_build:function(){var e=$('<div class="noty_bar noty_type_'+this.options.type+'"></div>').attr("id",this.options.id);if(e.append(this.options.template).find(".noty_text").html(this.options.text),this.$bar=null!==this.options.layout.parent.object?$(this.options.layout.parent.object).css(this.options.layout.parent.css).append(e):e,this.options.themeClassName&&this.$bar.addClass(this.options.themeClassName).addClass("noty_container_type_"+this.options.type),this.options.buttons){this.options.closeWith=[],this.options.timeout=!1;var t=$("<div/>").addClass("noty_buttons");null!==this.options.layout.parent.object?this.$bar.find(".noty_bar").append(t):this.$bar.append(t);var n=this;$.each(this.options.buttons,function(e,t){var i=$("<button/>").addClass(t.addClass?t.addClass:"gray").html(t.text).attr("id",t.id?t.id:"button-"+e).appendTo(n.$bar.find(".noty_buttons")).on("click",function(){$.isFunction(t.onClick)&&t.onClick.call(i,n)})})}this.$message=this.$bar.find(".noty_message"),this.$closeButton=this.$bar.find(".noty_close"),this.$buttons=this.$bar.find(".noty_buttons"),$.noty.store[this.options.id]=this},show:function(){var e=this;return e.options.custom?e.options.custom.find(e.options.layout.container.selector).append(e.$bar):$(e.options.layout.container.selector).append(e.$bar),e.options.theme&&e.options.theme.style&&e.options.theme.style.apply(e),"function"===$.type(e.options.layout.css)?this.options.layout.css.apply(e.$bar):e.$bar.css(this.options.layout.css||{}),e.$bar.addClass(e.options.layout.addClass),e.options.layout.container.style.apply($(e.options.layout.container.selector)),e.showing=!0,e.options.theme&&e.options.theme.style&&e.options.theme.callback.onShow.apply(this),$.inArray("click",e.options.closeWith)>-1&&e.$bar.css("cursor","pointer").one("click",function(t){e.stopPropagation(t),e.options.callback.onCloseClick&&e.options.callback.onCloseClick.apply(e),e.close()}),$.inArray("hover",e.options.closeWith)>-1&&e.$bar.one("mouseenter",function(){e.close()}),$.inArray("button",e.options.closeWith)>-1&&e.$closeButton.one("click",function(t){e.stopPropagation(t),e.close()}),-1==$.inArray("button",e.options.closeWith)&&e.$closeButton.remove(),e.options.callback.onShow&&e.options.callback.onShow.apply(e),"string"==typeof e.options.animation.open?(e.$bar.css("height",e.$bar.innerHeight()),e.$bar.show().addClass(e.options.animation.open).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.showing=!1,e.shown=!0})):e.$bar.animate(e.options.animation.open,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterShow&&e.options.callback.afterShow.apply(e),e.showing=!1,e.shown=!0}),e.options.timeout&&e.$bar.delay(e.options.timeout).promise().done(function(){e.close()}),this},close:function(){if(!(this.closed||this.$bar&&this.$bar.hasClass("i-am-closing-now"))){var e=this;if(this.showing)return void e.$bar.queue(function(){e.close.apply(e)});if(this.$bar.dequeue(),!this.shown&&!this.showing){var t=[];return $.each($.noty.queue,function(n,i){i.options.id!=e.options.id&&t.push(i)}),void($.noty.queue=t)}e.$bar.addClass("i-am-closing-now"),e.options.callback.onClose&&e.options.callback.onClose.apply(e),"string"==typeof e.options.animation.close?e.$bar.addClass(e.options.animation.close).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e),e.closeCleanUp()}):e.$bar.clearQueue().stop().animate(e.options.animation.close,e.options.animation.speed,e.options.animation.easing,function(){e.options.callback.afterClose&&e.options.callback.afterClose.apply(e)}).promise().done(function(){e.closeCleanUp()})}},closeCleanUp:function(){var e=this;e.options.modal&&($.notyRenderer.setModalCount(-1),0==$.notyRenderer.getModalCount()&&$(".noty_modal").fadeOut("fast",function(){$(this).remove()})),$.notyRenderer.setLayoutCountFor(e,-1),0==$.notyRenderer.getLayoutCountFor(e)&&$(e.options.layout.container.selector).remove(),"undefined"!=typeof e.$bar&&null!==e.$bar&&("string"==typeof e.options.animation.close?(e.$bar.css("transition","all 100ms ease").css("border",0).css("margin",0).height(0),e.$bar.one("transitionend webkitTransitionEnd oTransitionEnd MSTransitionEnd",function(){e.$bar.remove(),e.$bar=null,e.closed=!0,e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e)})):(e.$bar.remove(),e.$bar=null,e.closed=!0)),delete $.noty.store[e.options.id],e.options.theme.callback&&e.options.theme.callback.onClose&&e.options.theme.callback.onClose.apply(e),e.options.dismissQueue||($.noty.ontap=!0,$.notyRenderer.render()),e.options.maxVisible>0&&e.options.dismissQueue&&$.notyRenderer.render()},setText:function(e){return this.closed||(this.options.text=e,this.$bar.find(".noty_text").html(e)),this},setType:function(e){return this.closed||(this.options.type=e,this.options.theme.style.apply(this),this.options.theme.callback.onShow.apply(this)),this},setTimeout:function(e){if(!this.closed){var t=this;this.options.timeout=e,t.$bar.delay(t.options.timeout).promise().done(function(){t.close()})}return this},stopPropagation:function(e){e=e||window.event,"undefined"!=typeof e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},closed:!1,showing:!1,shown:!1};$.notyRenderer={},$.notyRenderer.init=function(e){var t=Object.create(NotyObject).init(e);return t.options.killer&&$.noty.closeAll(),t.options.force?$.noty.queue.unshift(t):$.noty.queue.push(t),$.notyRenderer.render(),"object"==$.noty.returns?t:t.options.id},$.notyRenderer.render=function(){var e=$.noty.queue[0];"object"===$.type(e)?e.options.dismissQueue?e.options.maxVisible>0?$(e.options.layout.container.selector+" li").length<e.options.maxVisible&&$.notyRenderer.show($.noty.queue.shift()):$.notyRenderer.show($.noty.queue.shift()):$.noty.ontap&&($.notyRenderer.show($.noty.queue.shift()),$.noty.ontap=!1):$.noty.ontap=!0},$.notyRenderer.show=function(e){e.options.modal&&($.notyRenderer.createModalFor(e),$.notyRenderer.setModalCount(1)),e.options.custom?0==e.options.custom.find(e.options.layout.container.selector).length?e.options.custom.append($(e.options.layout.container.object).addClass("i-am-new")):e.options.custom.find(e.options.layout.container.selector).removeClass("i-am-new"):0==$(e.options.layout.container.selector).length?$("body").append($(e.options.layout.container.object).addClass("i-am-new")):$(e.options.layout.container.selector).removeClass("i-am-new"),$.notyRenderer.setLayoutCountFor(e,1),e.show()},$.notyRenderer.createModalFor=function(e){if(0==$(".noty_modal").length){var t=$("<div/>").addClass("noty_modal").addClass(e.options.theme).data("noty_modal_count",0);e.options.theme.modal&&e.options.theme.modal.css&&t.css(e.options.theme.modal.css),t.prependTo($("body")).fadeIn("fast"),$.inArray("backdrop",e.options.closeWith)>-1&&t.on("click",function(e){$.noty.closeAll()})}},$.notyRenderer.getLayoutCountFor=function(e){return $(e.options.layout.container.selector).data("noty_layout_count")||0},$.notyRenderer.setLayoutCountFor=function(e,t){return $(e.options.layout.container.selector).data("noty_layout_count",$.notyRenderer.getLayoutCountFor(e)+t)},$.notyRenderer.getModalCount=function(){return $(".noty_modal").data("noty_modal_count")||0},$.notyRenderer.setModalCount=function(e){return $(".noty_modal").data("noty_modal_count",$.notyRenderer.getModalCount()+e)},$.fn.noty=function(e){return e.custom=$(this),$.notyRenderer.init(e)},$.noty={},$.noty.queue=[],$.noty.ontap=!0,$.noty.layouts={},$.noty.themes={},$.noty.returns="object",$.noty.store={},$.noty.get=function(e){return $.noty.store.hasOwnProperty(e)?$.noty.store[e]:!1},$.noty.close=function(e){return $.noty.get(e)?$.noty.get(e).close():!1},$.noty.setText=function(e,t){return $.noty.get(e)?$.noty.get(e).setText(t):!1},$.noty.setType=function(e,t){return $.noty.get(e)?$.noty.get(e).setType(t):!1},$.noty.clearQueue=function(){$.noty.queue=[]},$.noty.closeAll=function(){$.noty.clearQueue(),$.each($.noty.store,function(e,t){t.close()})};var windowAlert=window.alert;$.noty.consumeAlert=function(e){window.alert=function(t){e?e.text=t:e={text:t},$.notyRenderer.init(e)}},$.noty.stopConsumeAlert=function(){window.alert=windowAlert},$.noty.defaults={layout:"top",theme:"defaultTheme",type:"alert",text:"",dismissQueue:!0,template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',animation:{open:{height:"toggle"},close:{height:"toggle"},easing:"swing",speed:500},timeout:!1,force:!1,modal:!1,maxVisible:5,killer:!1,closeWith:["click"],callback:{onShow:function(){},afterShow:function(){},onClose:function(){},afterClose:function(){},onCloseClick:function(){}},buttons:!1},$(window).on("resize",function(){try{$.each($.noty.layouts,function(e,t){t.container.style.apply($(t.container.selector))})}catch(e){}}),window.noty=function(e){return jQuery.notyRenderer.init(e)},$.noty.layouts.bottom={name:"bottom",options:{},container:{object:'<ul id="noty_bottom_layout_container" />',selector:"ul#noty_bottom_layout_container",style:function(){$(this).css({bottom:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},$.noty.layouts.bottomCenter={name:"bottomCenter",options:{},container:{object:'<ul id="noty_bottomCenter_layout_container" />',selector:"ul#noty_bottomCenter_layout_container",style:function(){$(this).css({bottom:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),$(this).css({left:($(window).width()-$(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},$.noty.layouts.bottomLeft={name:"bottomLeft",options:{},container:{object:'<ul id="noty_bottomLeft_layout_container" />',selector:"ul#noty_bottomLeft_layout_container",style:function(){$(this).css({bottom:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&$(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},$.noty.layouts.bottomRight={name:"bottomRight",options:{},container:{object:'<ul id="noty_bottomRight_layout_container" />',selector:"ul#noty_bottomRight_layout_container",style:function(){$(this).css({bottom:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&$(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},$.noty.layouts.center={name:"center",options:{},container:{object:'<ul id="noty_center_layout_container" />',selector:"ul#noty_center_layout_container",style:function(){$(this).css({position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=$(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");$("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var t=e.height();e.remove(),$(this).hasClass("i-am-new")?$(this).css({left:($(window).width()-$(this).outerWidth(!1))/2+"px",top:($(window).height()-t)/2+"px"}):$(this).animate({left:($(window).width()-$(this).outerWidth(!1))/2+"px",top:($(window).height()-t)/2+"px"},500)}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},$.noty.layouts.centerLeft={name:"centerLeft",options:{},container:{object:'<ul id="noty_centerLeft_layout_container" />',selector:"ul#noty_centerLeft_layout_container",style:function(){$(this).css({left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=$(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");$("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var t=e.height();e.remove(),$(this).hasClass("i-am-new")?$(this).css({top:($(window).height()-t)/2+"px"}):$(this).animate({top:($(window).height()-t)/2+"px"},500),window.innerWidth<600&&$(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},$.noty.layouts.centerRight={name:"centerRight",options:{},container:{object:'<ul id="noty_centerRight_layout_container" />',selector:"ul#noty_centerRight_layout_container",style:function(){$(this).css({right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7});var e=$(this).clone().css({visibility:"hidden",display:"block",position:"absolute",top:0,left:0}).attr("id","dupe");$("body").append(e),e.find(".i-am-closing-now").remove(),e.find("li").css("display","block");var t=e.height();e.remove(),$(this).hasClass("i-am-new")?$(this).css({top:($(window).height()-t)/2+"px"}):$(this).animate({top:($(window).height()-t)/2+"px"},500),window.innerWidth<600&&$(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},$.noty.layouts.inline={name:"inline",options:{},container:{object:'<ul class="noty_inline_layout_container" />',selector:"ul.noty_inline_layout_container",style:function(){$(this).css({width:"100%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},$.noty.layouts.top={name:"top",options:{},container:{object:'<ul id="noty_top_layout_container" />',selector:"ul#noty_top_layout_container",style:function(){$(this).css({top:0,left:"5%",position:"fixed",width:"90%",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:9999999})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none"},addClass:""},$.noty.layouts.topCenter={name:"topCenter",options:{},container:{object:'<ul id="noty_topCenter_layout_container" />',selector:"ul#noty_topCenter_layout_container",style:function(){$(this).css({top:20,left:0,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),$(this).css({left:($(window).width()-$(this).outerWidth(!1))/2+"px"})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},$.noty.layouts.topLeft={name:"topLeft",options:{},container:{object:'<ul id="noty_topLeft_layout_container" />',selector:"ul#noty_topLeft_layout_container",style:function(){$(this).css({top:20,left:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&$(this).css({left:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},$.noty.layouts.topRight={name:"topRight",options:{},container:{object:'<ul id="noty_topRight_layout_container" />',selector:"ul#noty_topRight_layout_container",style:function(){$(this).css({top:20,right:20,position:"fixed",width:"310px",height:"auto",margin:0,padding:0,listStyleType:"none",zIndex:1e7}),window.innerWidth<600&&$(this).css({right:5})}},parent:{object:"<li />",selector:"li",css:{}},css:{display:"none",width:"310px"},addClass:""},$.noty.themes.bootstrapTheme={name:"bootstrapTheme",modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){var e=this.options.layout.container.selector;switch($(e).addClass("list-group"),this.$closeButton.append('<span aria-hidden="true">&times;</span><span class="sr-only">Close</span>'),this.$closeButton.addClass("close"),this.$bar.addClass("list-group-item").css("padding","0px"),this.options.type){case"alert":case"notification":this.$bar.addClass("list-group-item-info");break;case"warning":this.$bar.addClass("list-group-item-warning");break;case"error":this.$bar.addClass("list-group-item-danger");break;case"information":this.$bar.addClass("list-group-item-info");break;case"success":this.$bar.addClass("list-group-item-success")}this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"})},callback:{onShow:function(){},onClose:function(){}}},$.noty.themes.defaultTheme={name:"defaultTheme",helpers:{borderFix:function(){if(this.options.dismissQueue){var e=this.options.layout.container.selector+" "+this.options.layout.parent.selector;switch(this.options.layout.name){case"top":$(e).css({borderRadius:"0px 0px 0px 0px"}),$(e).last().css({borderRadius:"0px 0px 5px 5px"});break;case"topCenter":case"topLeft":case"topRight":case"bottomCenter":case"bottomLeft":case"bottomRight":case"center":case"centerLeft":case"centerRight":case"inline":$(e).css({borderRadius:"0px 0px 0px 0px"}),$(e).first().css({"border-top-left-radius":"5px","border-top-right-radius":"5px"}),$(e).last().css({"border-bottom-left-radius":"5px","border-bottom-right-radius":"5px"});break;case"bottom":$(e).css({borderRadius:"0px 0px 0px 0px"}),$(e).first().css({borderRadius:"5px 5px 0px 0px"})}}}},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",background:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAoCAQAAAClM0ndAAAAhklEQVR4AdXO0QrCMBBE0bttkk38/w8WRERpdyjzVOc+HxhIHqJGMQcFFkpYRQotLLSw0IJ5aBdovruMYDA/kT8plF9ZKLFQcgF18hDj1SbQOMlCA4kao0iiXmah7qBWPdxpohsgVZyj7e5I9KcID+EhiDI5gxBYKLBQYKHAQoGFAoEks/YEGHYKB7hFxf0AAAAASUVORK5CYII=') repeat-x scroll left top #fff"}),this.$message.css({fontSize:"13px",lineHeight:"16px",textAlign:"center",padding:"8px 10px 9px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){$(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){$(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderRadius:"0px 0px 5px 5px",borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({borderRadius:"5px",border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderRadius:"5px 5px 0px 0px",borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"red",borderColor:"darkred",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#57B7E2",borderColor:"#0B90C4",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"lightgreen",borderColor:"#50C24E",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){$.noty.themes.defaultTheme.helpers.borderFix.apply(this)},onClose:function(){$.noty.themes.defaultTheme.helpers.borderFix.apply(this)}}},$.noty.themes.relax={name:"relax",helpers:{},modal:{css:{position:"fixed",width:"100%",height:"100%",backgroundColor:"#000",zIndex:1e4,opacity:.6,display:"none",left:0,top:0}},style:function(){switch(this.$bar.css({overflow:"hidden",margin:"4px 0",borderRadius:"2px"}),this.$message.css({fontSize:"14px",lineHeight:"16px",textAlign:"center",padding:"10px",width:"auto",position:"relative"}),this.$closeButton.css({position:"absolute",top:4,right:4,width:10,height:10,background:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAoAAAAKCAQAAAAnOwc2AAAAxUlEQVR4AR3MPUoDURSA0e++uSkkOxC3IAOWNtaCIDaChfgXBMEZbQRByxCwk+BasgQRZLSYoLgDQbARxry8nyumPcVRKDfd0Aa8AsgDv1zp6pYd5jWOwhvebRTbzNNEw5BSsIpsj/kurQBnmk7sIFcCF5yyZPDRG6trQhujXYosaFoc+2f1MJ89uc76IND6F9BvlXUdpb6xwD2+4q3me3bysiHvtLYrUJto7PD/ve7LNHxSg/woN2kSz4txasBdhyiz3ugPGetTjm3XRokAAAAASUVORK5CYII=)",display:"none",cursor:"pointer"}),this.$buttons.css({padding:5,textAlign:"right",borderTop:"1px solid #ccc",backgroundColor:"#fff"}),this.$buttons.find("button").css({marginLeft:5}),this.$buttons.find("button:first").css({marginLeft:0}),this.$bar.on({mouseenter:function(){$(this).find(".noty_close").stop().fadeTo("normal",1)},mouseleave:function(){$(this).find(".noty_close").stop().fadeTo("normal",0)}}),this.options.layout.name){case"top":this.$bar.css({borderBottom:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderTop:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"});break;case"topCenter":case"center":case"bottomCenter":case"inline":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"center"});break;case"topLeft":case"topRight":case"bottomLeft":case"bottomRight":case"centerLeft":case"centerRight":this.$bar.css({border:"1px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"}),this.$message.css({fontSize:"13px",textAlign:"left"});break;case"bottom":this.$bar.css({borderTop:"2px solid #eee",borderLeft:"2px solid #eee",borderRight:"2px solid #eee",borderBottom:"2px solid #eee",boxShadow:"0 -2px 4px rgba(0, 0, 0, 0.1)"});break;default:this.$bar.css({border:"2px solid #eee",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"})}switch(this.options.type){case"alert":case"notification":this.$bar.css({backgroundColor:"#FFF",borderColor:"#dedede",color:"#444"});break;case"warning":this.$bar.css({backgroundColor:"#FFEAA8",borderColor:"#FFC237",color:"#826200"}),this.$buttons.css({borderTop:"1px solid #FFC237"});break;case"error":this.$bar.css({backgroundColor:"#FF8181",borderColor:"#e25353",color:"#FFF"}),this.$message.css({fontWeight:"bold"}),this.$buttons.css({borderTop:"1px solid darkred"});break;case"information":this.$bar.css({backgroundColor:"#78C5E7",borderColor:"#3badd6",color:"#FFF"}),this.$buttons.css({borderTop:"1px solid #0B90C4"});break;case"success":this.$bar.css({backgroundColor:"#BCF5BC",borderColor:"#7cdd77",color:"darkgreen"}),this.$buttons.css({borderTop:"1px solid #50C24E"});break;default:this.$bar.css({backgroundColor:"#FFF",borderColor:"#CCC",color:"#444"})}},callback:{onShow:function(){},onClose:function(){}}},/*!
 * Chart.js
 * http://chartjs.org/
 * Version: 1.0.2
 *
 * Copyright 2015 Nick Downie
 * Released under the MIT license
 * https://github.com/nnnick/Chart.js/blob/master/LICENSE.md
 */
function(){"use strict";var e=this,t=e.Chart,n=function(e){this.canvas=e.canvas,this.ctx=e;var t=function(e,t){return e["offset"+t]?e["offset"+t]:document.defaultView.getComputedStyle(e).getPropertyValue(t)},n=this.width=t(e.canvas,"Width"),o=this.height=t(e.canvas,"Height");e.canvas.width=n,e.canvas.height=o;var n=this.width=e.canvas.width,o=this.height=e.canvas.height;return this.aspectRatio=this.width/this.height,i.retinaScale(this),this};n.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},n.types={};var i=n.helpers={},o=i.each=function(e,t,n){var i=Array.prototype.slice.call(arguments,3);if(e)if(e.length===+e.length){var o;for(o=0;o<e.length;o++)t.apply(n,[e[o],o].concat(i))}else for(var r in e)t.apply(n,[e[r],r].concat(i))},r=i.clone=function(e){var t={};return o(e,function(n,i){e.hasOwnProperty(i)&&(t[i]=n)}),t},a=i.extend=function(e){return o(Array.prototype.slice.call(arguments,1),function(t){o(t,function(n,i){t.hasOwnProperty(i)&&(e[i]=n)})}),e},s=i.merge=function(e,t){var n=Array.prototype.slice.call(arguments,0);return n.unshift({}),a.apply(null,n)},l=i.indexOf=function(e,t){if(Array.prototype.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(e[n]===t)return n;return-1},c=(i.where=function(e,t){var n=[];return i.each(e,function(e){t(e)&&n.push(e)}),n},i.findNextWhere=function(e,t,n){n||(n=-1);for(var i=n+1;i<e.length;i++){var o=e[i];if(t(o))return o}},i.findPreviousWhere=function(e,t,n){n||(n=e.length);for(var i=n-1;i>=0;i--){var o=e[i];if(t(o))return o}},i.inherits=function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=t.prototype,n.prototype=new i,n.extend=c,e&&a(n.prototype,e),n.__super__=t.prototype,n}),u=i.noop=function(){},d=i.uid=function(){var e=0;return function(){return"chart-"+e++}}(),f=i.warn=function(e){window.console&&"function"==typeof window.console.warn&&console.warn(e)},h=i.amd="function"==typeof define&&define.amd&&!1,p=i.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},m=i.max=function(e){return Math.max.apply(Math,e)},g=i.min=function(e){return Math.min.apply(Math,e)},v=(i.cap=function(e,t,n){if(p(t)){if(e>t)return t}else if(p(n)&&n>e)return n;return e},i.getDecimalPlaces=function(e){return e%1!==0&&p(e)?e.toString().split(".")[1].length:0}),y=i.radians=function(e){return e*(Math.PI/180)},b=(i.getAngleFromPoint=function(e,t){var n=t.x-e.x,i=t.y-e.y,o=Math.sqrt(n*n+i*i),r=2*Math.PI+Math.atan2(i,n);return 0>n&&0>i&&(r+=2*Math.PI),{angle:r,distance:o}},i.aliasPixel=function(e){return e%2===0?0:.5}),x=(i.splineCurve=function(e,t,n,i){var o=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2)),r=Math.sqrt(Math.pow(n.x-t.x,2)+Math.pow(n.y-t.y,2)),a=i*o/(o+r),s=i*r/(o+r);return{inner:{x:t.x-a*(n.x-e.x),y:t.y-a*(n.y-e.y)},outer:{x:t.x+s*(n.x-e.x),y:t.y+s*(n.y-e.y)}}},i.calculateOrderOfMagnitude=function(e){return Math.floor(Math.log(e)/Math.LN10)}),w=(i.calculateScaleRange=function(e,t,n,i,o){var r=2,a=Math.floor(t/(1.5*n)),s=r>=a,l=m(e),c=g(e);l===c&&(l+=.5,c>=.5&&!i?c-=.5:l+=.5);for(var u=Math.abs(l-c),d=x(u),f=Math.ceil(l/(1*Math.pow(10,d)))*Math.pow(10,d),h=i?0:Math.floor(c/(1*Math.pow(10,d)))*Math.pow(10,d),p=f-h,v=Math.pow(10,d),y=Math.round(p/v);(y>a||a>2*y)&&!s;)if(y>a)v*=2,y=Math.round(p/v),y%1!==0&&(s=!0);else if(o&&d>=0){if(v/2%1!==0)break;v/=2,y=Math.round(p/v)}else v/=2,y=Math.round(p/v);return s&&(y=r,v=p/y),{steps:y,stepValue:v,min:h,max:h+y*v}},i.template=function(e,t){function n(e,t){var n=/\W/.test(e)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+e.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[e]=i[e];return t?n(t):n}if(e instanceof Function)return e(t);var i={};return n(e,t)}),C=(i.generateLabels=function(e,t,n,i){var r=new Array(t);return labelTemplateString&&o(r,function(t,o){r[o]=w(e,{value:n+i*(o+1)})}),r},i.easingEffects={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-1*e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-0.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return 1*((e=e/1-1)*e*e+1)},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-1*((e=e/1-1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-0.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return 1*(e/=1)*e*e*e*e},easeOutQuint:function(e){return 1*((e=e/1-1)*e*e*e*e+1)},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return-1*Math.cos(e/1*(Math.PI/2))+1},easeOutSine:function(e){return 1*Math.sin(e/1*(Math.PI/2))},easeInOutSine:function(e){return-0.5*(Math.cos(Math.PI*e/1)-1)},easeInExpo:function(e){return 0===e?1:1*Math.pow(2,10*(e/1-1))},easeOutExpo:function(e){return 1===e?1:1*(-Math.pow(2,-10*e/1)+1)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return e>=1?e:-1*(Math.sqrt(1-(e/=1)*e)-1)},easeOutCirc:function(e){return 1*Math.sqrt(1-(e=e/1-1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-0.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)))},easeOutElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:1==(e/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*e)*Math.sin((1*e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,i=1;return 0===e?0:2==(e/=.5)?1:(n||(n=1*(.3*1.5)),i<Math.abs(1)?(i=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/i),1>e?-.5*(i*Math.pow(2,10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)):i*Math.pow(2,-10*(e-=1))*Math.sin((1*e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return 1*(e/=1)*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return 1*((e=e/1-1)*e*((t+1)*e+t)+1)},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},easeInBounce:function(e){return 1-C.easeOutBounce(1-e)},easeOutBounce:function(e){return(e/=1)<1/2.75?1*(7.5625*e*e):2/2.75>e?1*(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?1*(7.5625*(e-=2.25/2.75)*e+.9375):1*(7.5625*(e-=2.625/2.75)*e+.984375)},easeInOutBounce:function(e){return.5>e?.5*C.easeInBounce(2*e):.5*C.easeOutBounce(2*e-1)+.5}}),k=i.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),S=i.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(e){return window.clearTimeout(e,1e3/60)}}(),T=(i.animationLoop=function(e,t,n,i,o,r){var a=0,s=C[n]||C.linear,l=function(){a++;var n=a/t,c=s(n);e.call(r,c,n,a),i.call(r,c,n),t>a?r.animationFrame=k(l):o.apply(r)};k(l)},i.getRelativePosition=function(e){var t,n,i=e.originalEvent||e,o=e.currentTarget||e.srcElement,r=o.getBoundingClientRect();return i.touches?(t=i.touches[0].clientX-r.left,n=i.touches[0].clientY-r.top):(t=i.clientX-r.left,n=i.clientY-r.top),{x:t,y:n}},i.addEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n}),$=i.removeEvent=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=u},E=(i.bindEvents=function(e,t,n){e.events||(e.events={}),o(t,function(t){e.events[t]=function(){n.apply(e,arguments)},T(e.chart.canvas,t,e.events[t])})},i.unbindEvents=function(e,t){o(t,function(t,n){$(e.chart.canvas,n,t)})}),_=i.getMaximumWidth=function(e){var t=e.parentNode;return t.clientWidth},A=i.getMaximumHeight=function(e){var t=e.parentNode;return t.clientHeight},N=(i.getMaximumSize=i.getMaximumWidth,i.retinaScale=function(e){var t=e.ctx,n=e.canvas.width,i=e.canvas.height;window.devicePixelRatio&&(t.canvas.style.width=n+"px",t.canvas.style.height=i+"px",t.canvas.height=i*window.devicePixelRatio,t.canvas.width=n*window.devicePixelRatio,t.scale(window.devicePixelRatio,window.devicePixelRatio))}),R=i.clear=function(e){e.ctx.clearRect(0,0,e.width,e.height)},D=i.fontString=function(e,t,n){return t+" "+e+"px "+n},L=i.longestText=function(e,t,n){e.font=t;var i=0;return o(n,function(t){var n=e.measureText(t).width;i=n>i?n:i}),i},M=i.drawRoundedRectangle=function(e,t,n,i,o,r){e.beginPath(),e.moveTo(t+r,n),e.lineTo(t+i-r,n),e.quadraticCurveTo(t+i,n,t+i,n+r),e.lineTo(t+i,n+o-r),e.quadraticCurveTo(t+i,n+o,t+i-r,n+o),e.lineTo(t+r,n+o),e.quadraticCurveTo(t,n+o,t,n+o-r),e.lineTo(t,n+r),e.quadraticCurveTo(t,n,t+r,n),e.closePath()};n.instances={},n.Type=function(e,t,i){this.options=t,this.chart=i,this.id=d(),n.instances[this.id]=this,t.responsive&&this.resize(),this.initialize.call(this,e)},a(n.Type.prototype,{initialize:function(){return this},clear:function(){return R(this.chart),this},stop:function(){return S(this.animationFrame),this},resize:function(e){this.stop();var t=this.chart.canvas,n=_(this.chart.canvas),i=this.options.maintainAspectRatio?n/this.chart.aspectRatio:A(this.chart.canvas);return t.width=this.chart.width=n,t.height=this.chart.height=i,N(this.chart),"function"==typeof e&&e.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:u,render:function(e){return e&&this.reflow(),this.options.animation&&!e?i.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return w(this.options.legendTemplate,this)},destroy:function(){this.clear(),E(this,this.events);var e=this.chart.canvas;e.width=this.chart.width,e.height=this.chart.height,e.style.removeProperty?(e.style.removeProperty("width"),e.style.removeProperty("height")):(e.style.removeAttribute("width"),e.style.removeAttribute("height")),delete n.instances[this.id]},showTooltip:function(e,t){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var r=function(e){var t=!1;return e.length!==this.activeElements.length?t=!0:(o(e,function(e,n){e!==this.activeElements[n]&&(t=!0)},this),t)}.call(this,e);if(r||t){if(this.activeElements=e,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),e.length>0)if(this.datasets&&this.datasets.length>1){for(var a,s,c=this.datasets.length-1;c>=0&&(a=this.datasets[c].points||this.datasets[c].bars||this.datasets[c].segments,s=l(a,e[0]),-1===s);c--);var u=[],d=[],f=function(e){var t,n,o,r,a,l=[],c=[],f=[];return i.each(this.datasets,function(e){t=e.points||e.bars||e.segments,t[s]&&t[s].hasValue()&&l.push(t[s])}),i.each(l,function(e){c.push(e.x),f.push(e.y),u.push(i.template(this.options.multiTooltipTemplate,e)),d.push({fill:e._saved.fillColor||e.fillColor,stroke:e._saved.strokeColor||e.strokeColor})},this),a=g(f),o=m(f),r=g(c),n=m(c),{x:r>this.chart.width/2?r:n,y:(a+o)/2}}.call(this,s);new n.MultiTooltip({x:f.x,y:f.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:u,legendColors:d,legendColorBackground:this.options.multiTooltipKeyBackground,title:e[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else o(e,function(e){var t=e.tooltipPosition();new n.Tooltip({x:Math.round(t.x),y:Math.round(t.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:w(this.options.tooltipTemplate,e),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),n.Type.extend=function(e){var t=this,i=function(){return t.apply(this,arguments)};if(i.prototype=r(t.prototype),a(i.prototype,e),i.extend=n.Type.extend,e.name||t.prototype.name){var o=e.name||t.prototype.name,l=n.defaults[t.prototype.name]?r(n.defaults[t.prototype.name]):{};n.defaults[o]=a(l,e.defaults),n.types[o]=i,n.prototype[o]=function(e,t){var r=s(n.defaults.global,n.defaults[o],t||{});return new i(e,r,this)}}else f("Name not provided for this chart, so it hasn't been registered");return t},n.Element=function(e){a(this,e),this.initialize.apply(this,arguments),this.save()},a(n.Element.prototype,{initialize:function(){},restore:function(e){return e?o(e,function(e){this[e]=this._saved[e]},this):a(this,this._saved),this},save:function(){return this._saved=r(this),delete this._saved._saved,this},update:function(e){return o(e,function(e,t){this._saved[t]=this[t],this[t]=e},this),this},transition:function(e,t){return o(e,function(e,n){this[n]=(e-this._saved[n])*t+this._saved[n]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return p(this.value)}}),n.Element.extend=c,n.Point=n.Element.extend({display:!0,inRange:function(e,t){var n=this.hitDetectionRadius+this.radius;return Math.pow(e-this.x,2)+Math.pow(t-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.radius,0,2*Math.PI),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.stroke()}}}),n.Arc=n.Element.extend({inRange:function(e,t){var n=i.getAngleFromPoint(this,{x:e,y:t}),o=n.angle>=this.startAngle&&n.angle<=this.endAngle,r=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return o&&r},tooltipPosition:function(){var e=this.startAngle+(this.endAngle-this.startAngle)/2,t=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(e)*t,y:this.y+Math.sin(e)*t}},draw:function(e){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),t.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.lineJoin="bevel",this.showStroke&&t.stroke()}}),n.Rectangle=n.Element.extend({draw:function(){var e=this.ctx,t=this.width/2,n=this.x-t,i=this.x+t,o=this.base-(this.base-this.y),r=this.strokeWidth/2;this.showStroke&&(n+=r,i-=r,o+=r),e.beginPath(),e.fillStyle=this.fillColor,e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.moveTo(n,this.base),e.lineTo(n,o),e.lineTo(i,o),e.lineTo(i,this.base),e.fill(),this.showStroke&&e.stroke()},height:function(){return this.base-this.y},inRange:function(e,t){return e>=this.x-this.width/2&&e<=this.x+this.width/2&&t>=this.y&&t<=this.base}}),n.Tooltip=n.Element.extend({draw:function(){var e=this.chart.ctx;e.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var t=this.caretPadding=2,n=e.measureText(this.text).width+2*this.xPadding,i=this.fontSize+2*this.yPadding,o=i+this.caretHeight+t;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-o<0&&(this.yAlign="below");var r=this.x-n/2,a=this.y-o;if(e.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":e.beginPath(),e.moveTo(this.x,this.y-t),e.lineTo(this.x+this.caretHeight,this.y-(t+this.caretHeight)),e.lineTo(this.x-this.caretHeight,this.y-(t+this.caretHeight)),e.closePath(),e.fill();break;case"below":a=this.y+t+this.caretHeight,e.beginPath(),e.moveTo(this.x,this.y+t),e.lineTo(this.x+this.caretHeight,this.y+t+this.caretHeight),e.lineTo(this.x-this.caretHeight,this.y+t+this.caretHeight),e.closePath(),e.fill()}switch(this.xAlign){case"left":r=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":r=this.x-(this.cornerRadius+this.caretHeight)}M(e,r,a,n,i,this.cornerRadius),e.fill(),e.fillStyle=this.textColor,e.textAlign="center",e.textBaseline="middle",e.fillText(this.text,r+n/2,a+i/2)}}}),n.MultiTooltip=n.Element.extend({initialize:function(){this.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=D(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var e=this.ctx.measureText(this.title).width,t=L(this.ctx,this.font,this.labels)+this.fontSize+3,n=m([t,e]);this.width=n+2*this.xPadding;var i=this.height/2;this.y-i<0?this.y=i:this.y+i>this.chart.height&&(this.y=this.chart.height-i),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(e){var t=this.y-this.height/2+this.yPadding,n=e-1;return 0===e?t+this.titleFontSize/2:t+(1.5*this.fontSize*n+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{M(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var e=this.ctx;e.fillStyle=this.fillColor,e.fill(),e.closePath(),e.textAlign="left",e.textBaseline="middle",e.fillStyle=this.titleTextColor,e.font=this.titleFont,e.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),e.font=this.font,i.each(this.labels,function(t,n){e.fillStyle=this.textColor,e.fillText(t,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(n+1)),e.fillStyle=this.legendColorBackground,e.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize),e.fillStyle=this.legendColors[n].fill,e.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),n.Scale=n.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var e=v(this.stepValue),t=0;t<=this.steps;t++)this.yLabels.push(w(this.templateString,{value:(this.min+t*this.stepValue).toFixed(e)}));this.yLabelWidth=this.display&&this.showLabels?L(this.ctx,this.font,this.yLabels):0},addXLabel:function(e){this.xLabels.push(e),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var e,t=this.endPoint-this.startPoint;for(this.calculateYRange(t),this.buildYLabels(),this.calculateXLabelRotation();t>this.endPoint-this.startPoint;)t=this.endPoint-this.startPoint,e=this.yLabelWidth,this.calculateYRange(t),this.buildYLabels(),e<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var e,t,n=this.ctx.measureText(this.xLabels[0]).width,i=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=i/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var o,r=L(this.ctx,this.font,this.xLabels);this.xLabelWidth=r;for(var a=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>a&&0===this.xLabelRotation||this.xLabelWidth>a&&this.xLabelRotation<=90&&this.xLabelRotation>0;)o=Math.cos(y(this.xLabelRotation)),e=o*n,t=o*i,e+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=e+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=o*r;this.xLabelRotation>0&&(this.endPoint-=Math.sin(y(this.xLabelRotation))*r+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:u,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(e){var t=this.drawingArea()/(this.min-this.max);return this.endPoint-t*(e-this.min)},calculateX:function(e){var t=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),n=t/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),i=n*e+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=n/2),Math.round(i)},update:function(e){i.extend(this,e),this.fit()},draw:function(){var e=this.ctx,t=(this.endPoint-this.startPoint)/this.steps,n=Math.round(this.xScalePaddingLeft);this.display&&(e.fillStyle=this.textColor,e.font=this.font,o(this.yLabels,function(o,r){var a=this.endPoint-t*r,s=Math.round(a),l=this.showHorizontalLines;e.textAlign="right",e.textBaseline="middle",this.showLabels&&e.fillText(o,n-10,a),0!==r||l||(l=!0),l&&e.beginPath(),r>0?(e.lineWidth=this.gridLineWidth,e.strokeStyle=this.gridLineColor):(e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor),s+=i.aliasPixel(e.lineWidth),l&&(e.moveTo(n,s),e.lineTo(this.width,s),e.stroke(),e.closePath()),e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor,e.beginPath(),e.moveTo(n-5,s),e.lineTo(n,s),e.stroke(),e.closePath()},this),o(this.xLabels,function(t,n){var i=this.calculateX(n)+b(this.lineWidth),o=this.calculateX(n-(this.offsetGridLines?.5:0))+b(this.lineWidth),r=this.xLabelRotation>0,a=this.showVerticalLines;0!==n||a||(a=!0),a&&e.beginPath(),n>0?(e.lineWidth=this.gridLineWidth,e.strokeStyle=this.gridLineColor):(e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor),a&&(e.moveTo(o,this.endPoint),e.lineTo(o,this.startPoint-3),e.stroke(),e.closePath()),e.lineWidth=this.lineWidth,e.strokeStyle=this.lineColor,e.beginPath(),e.moveTo(o,this.endPoint),e.lineTo(o,this.endPoint+5),e.stroke(),e.closePath(),e.save(),e.translate(i,r?this.endPoint+12:this.endPoint+8),e.rotate(-1*y(this.xLabelRotation)),e.font=this.font,e.textAlign=r?"right":"center",e.textBaseline=r?"middle":"top",e.fillText(t,0,0),e.restore()},this))}}),n.RadialScale=n.Element.extend({initialize:function(){this.size=g([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(e){var t=this.drawingArea/(this.max-this.min);return(e-this.min)*t},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var e=v(this.stepValue),t=0;t<=this.steps;t++)this.yLabels.push(w(this.templateString,{value:(this.min+t*this.stepValue).toFixed(e)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var e,t,n,i,o,r,a,s,l,c,u,d,f=g([this.height/2-this.pointLabelFontSize-5,this.width/2]),h=this.width,m=0;for(this.ctx.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t=0;t<this.valuesCount;t++)e=this.getPointPosition(t,f),n=this.ctx.measureText(w(this.templateString,{value:this.labels[t]})).width+5,0===t||t===this.valuesCount/2?(i=n/2,e.x+i>h&&(h=e.x+i,o=t),e.x-i<m&&(m=e.x-i,a=t)):t<this.valuesCount/2?e.x+n>h&&(h=e.x+n,o=t):t>this.valuesCount/2&&e.x-n<m&&(m=e.x-n,a=t);l=m,c=Math.ceil(h-this.width),r=this.getIndexAngle(o),s=this.getIndexAngle(a),u=c/Math.sin(r+Math.PI/2),d=l/Math.sin(s+Math.PI/2),u=p(u)?u:0,d=p(d)?d:0,this.drawingArea=f-(d+u)/2,this.setCenterPoint(d,u)},setCenterPoint:function(e,t){var n=this.width-t-this.drawingArea,i=e+this.drawingArea;this.xCenter=(i+n)/2,this.yCenter=this.height/2},getIndexAngle:function(e){var t=2*Math.PI/this.valuesCount;return e*t-Math.PI/2},getPointPosition:function(e,t){var n=this.getIndexAngle(e);return{x:Math.cos(n)*t+this.xCenter,y:Math.sin(n)*t+this.yCenter}},draw:function(){if(this.display){var e=this.ctx;if(o(this.yLabels,function(t,n){if(n>0){var i,o=n*(this.drawingArea/this.steps),r=this.yCenter-o;if(this.lineWidth>0)if(e.strokeStyle=this.lineColor,e.lineWidth=this.lineWidth,this.lineArc)e.beginPath(),e.arc(this.xCenter,this.yCenter,o,0,2*Math.PI),e.closePath(),e.stroke();else{e.beginPath();for(var a=0;a<this.valuesCount;a++)i=this.getPointPosition(a,this.calculateCenterOffset(this.min+n*this.stepValue)),0===a?e.moveTo(i.x,i.y):e.lineTo(i.x,i.y);e.closePath(),e.stroke()}if(this.showLabels){if(e.font=D(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var s=e.measureText(t).width;e.fillStyle=this.backdropColor,e.fillRect(this.xCenter-s/2-this.backdropPaddingX,r-this.fontSize/2-this.backdropPaddingY,s+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.fontColor,e.fillText(t,this.xCenter,r)}}},this),!this.lineArc){e.lineWidth=this.angleLineWidth,e.strokeStyle=this.angleLineColor;for(var t=this.valuesCount-1;t>=0;t--){if(this.angleLineWidth>0){var n=this.getPointPosition(t,this.calculateCenterOffset(this.max));e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(n.x,n.y),e.stroke(),e.closePath()}var i=this.getPointPosition(t,this.calculateCenterOffset(this.max)+5);e.font=D(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e.fillStyle=this.pointLabelFontColor;var r=this.labels.length,a=this.labels.length/2,s=a/2,l=s>t||t>r-s,c=t===s||t===r-s;0===t?e.textAlign="center":t===a?e.textAlign="center":a>t?e.textAlign="left":e.textAlign="right",c?e.textBaseline="middle":l?e.textBaseline="bottom":e.textBaseline="top",e.fillText(this.labels[t],i.x,i.y)}}}}}),i.addEvent(window,"resize",function(){var e;return function(){clearTimeout(e),e=setTimeout(function(){o(n.instances,function(e){e.options.responsive&&e.resize(e.render,!0)})},50)}}()),h?define(function(){return n}):"object"==typeof module&&module.exports&&(module.exports=n),e.Chart=n,n.noConflict=function(){return e.Chart=t,n}}.call(this),function(){"use strict";var e=this,t=e.Chart,n=t.helpers,i={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Bar",defaults:i,initialize:function(e){var i=this.options;this.ScaleClass=t.Scale.extend({offsetGridLines:!0,calculateBarX:function(e,t,n){var o=this.calculateBaseWidth(),r=this.calculateX(n)-o/2,a=this.calculateBarWidth(e);return r+a*t+t*i.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*i.barValueSpacing},calculateBarWidth:function(e){var t=this.calculateBaseWidth()-(e-1)*i.barDatasetSpacing;return t/e}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getBarsAtEvent(e):[];this.eachBars(function(e){e.restore(["fillColor","strokeColor"])}),n.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),this.BarClass=t.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),n.each(e.datasets,function(t,i){var o={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,bars:[]};this.datasets.push(o),n.each(t.data,function(n,i){o.bars.push(new this.BarClass({value:n,label:e.labels[i],datasetLabel:t.label,strokeColor:t.strokeColor,fillColor:t.fillColor,highlightFill:t.highlightFill||t.fillColor,highlightStroke:t.highlightStroke||t.strokeColor}))},this)},this),this.buildScale(e.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(e,t,i){n.extend(e,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,i,t),y:this.scale.endPoint}),e.save()},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(e){e.restore(["fillColor","strokeColor"])}),this.eachBars(function(e){e.save()}),this.render()},eachBars:function(e){n.each(this.datasets,function(t,i){n.each(t.bars,e,this,i)},this)},getBarsAtEvent:function(e){for(var t,i=[],o=n.getRelativePosition(e),r=function(e){i.push(e.bars[t])},a=0;a<this.datasets.length;a++)for(t=0;t<this.datasets[a].bars.length;t++)if(this.datasets[a].bars[t].inRange(o.x,o.y))return n.each(this.datasets,r),i;return i},buildScale:function(e){var t=this,i=function(){var e=[];return t.eachBars(function(t){e.push(t.value)}),e},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:e.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(e){var t=n.calculateScaleRange(i(),e,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,t)},xLabels:e,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(o,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(o)},addData:function(e,t){n.each(e,function(e,n){this.datasets[n].bars.push(new this.BarClass({value:e,label:t,x:this.scale.calculateBarX(this.datasets.length,n,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),
base:this.scale.endPoint,strokeColor:this.datasets[n].strokeColor,fillColor:this.datasets[n].fillColor}))},this),this.scale.addXLabel(t),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(e){e.bars.shift()},this),this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var e=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(e)},draw:function(e){var t=e||1;this.clear();this.chart.ctx;this.scale.draw(t),n.each(this.datasets,function(e,i){n.each(e.bars,function(e,n){e.hasValue()&&(e.base=this.scale.endPoint,e.transition({x:this.scale.calculateBarX(this.datasets.length,i,n),y:this.scale.calculateY(e.value),width:this.scale.calculateBarWidth(this.datasets.length)},t).draw())},this)},this)}})}.call(this),function(){"use strict";var e=this,t=e.Chart,n=t.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Doughnut",defaults:i,initialize:function(e){this.segments=[],this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=t.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getSegmentsAtEvent(e):[];n.each(this.segments,function(e){e.restore(["fillColor"])}),n.each(t,function(e){e.fillColor=e.highlightColor}),this.showTooltip(t)}),this.calculateTotal(e),n.each(e,function(e,t){this.addData(e,t,!0)},this),this.render()},getSegmentsAtEvent:function(e){var t=[],i=n.getRelativePosition(e);return n.each(this.segments,function(e){e.inRange(i.x,i.y)&&t.push(e)},this),t},addData:function(e,t,n){var i=t||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({value:e.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:e.color,highlightColor:e.highlight||e.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(e.value),label:e.label})),n||(this.reflow(),this.update())},calculateCircumference:function(e){return 2*Math.PI*(Math.abs(e)/this.total)},calculateTotal:function(e){this.total=0,n.each(e,function(e){this.total+=Math.abs(e.value)},this)},update:function(){this.calculateTotal(this.segments),n.each(this.activeElements,function(e){e.restore(["fillColor"])}),n.each(this.segments,function(e){e.save()}),this.render()},removeData:function(e){var t=n.isNumber(e)?e:this.segments.length-1;this.segments.splice(t,1),this.reflow(),this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,n.each(this.segments,function(e){e.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(e){var t=e?e:1;this.clear(),n.each(this.segments,function(e,n){e.transition({circumference:this.calculateCircumference(e.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},t),e.endAngle=e.startAngle+e.circumference,e.draw(),0===n&&(e.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=e.endAngle)},this)}}),t.types.Doughnut.extend({name:"Pie",defaults:n.merge(i,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var e=this,t=e.Chart,n=t.helpers,i={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"Line",defaults:i,initialize:function(e){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(e){return Math.pow(e-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getPointsAtEvent(e):[];this.eachPoints(function(e){e.restore(["fillColor","strokeColor"])}),n.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),n.each(e.datasets,function(t){var i={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(i),n.each(t.data,function(n,o){i.points.push(new this.PointClass({value:n,label:e.labels[o],datasetLabel:t.label,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this),this.buildScale(e.labels),this.eachPoints(function(e,t){n.extend(e,{x:this.scale.calculateX(t),y:this.scale.endPoint}),e.save()},this)},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(e){e.restore(["fillColor","strokeColor"])}),this.eachPoints(function(e){e.save()}),this.render()},eachPoints:function(e){n.each(this.datasets,function(t){n.each(t.points,e,this)},this)},getPointsAtEvent:function(e){var t=[],i=n.getRelativePosition(e);return n.each(this.datasets,function(e){n.each(e.points,function(e){e.inRange(i.x,i.y)&&t.push(e)})},this),t},buildScale:function(e){var i=this,o=function(){var e=[];return i.eachPoints(function(t){e.push(t.value)}),e},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:e.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(e){var t=n.calculateScaleRange(o(),e,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,t)},xLabels:e,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(r,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new t.Scale(r)},addData:function(e,t){n.each(e,function(e,n){this.datasets[n].points.push(new this.PointClass({value:e,label:t,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.addXLabel(t),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(e){e.points.shift()},this),this.update()},reflow:function(){var e=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(e)},draw:function(e){var t=e||1;this.clear();var i=this.chart.ctx,o=function(e){return null!==e.value},r=function(e,t,i){return n.findNextWhere(t,o,i)||e},a=function(e,t,i){return n.findPreviousWhere(t,o,i)||e};this.scale.draw(t),n.each(this.datasets,function(e){var s=n.where(e.points,o);n.each(e.points,function(e,n){e.hasValue()&&e.transition({y:this.scale.calculateY(e.value),x:this.scale.calculateX(n)},t)},this),this.options.bezierCurve&&n.each(s,function(e,t){var i=t>0&&t<s.length-1?this.options.bezierCurveTension:0;e.controlPoints=n.splineCurve(a(e,s,t),e,r(e,s,t),i),e.controlPoints.outer.y>this.scale.endPoint?e.controlPoints.outer.y=this.scale.endPoint:e.controlPoints.outer.y<this.scale.startPoint&&(e.controlPoints.outer.y=this.scale.startPoint),e.controlPoints.inner.y>this.scale.endPoint?e.controlPoints.inner.y=this.scale.endPoint:e.controlPoints.inner.y<this.scale.startPoint&&(e.controlPoints.inner.y=this.scale.startPoint)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=e.strokeColor,i.beginPath(),n.each(s,function(e,t){if(0===t)i.moveTo(e.x,e.y);else if(this.options.bezierCurve){var n=a(e,s,t);i.bezierCurveTo(n.controlPoints.outer.x,n.controlPoints.outer.y,e.controlPoints.inner.x,e.controlPoints.inner.y,e.x,e.y)}else i.lineTo(e.x,e.y)},this),i.stroke(),this.options.datasetFill&&s.length>0&&(i.lineTo(s[s.length-1].x,this.scale.endPoint),i.lineTo(s[0].x,this.scale.endPoint),i.fillStyle=e.fillColor,i.closePath(),i.fill()),n.each(s,function(e){e.draw()})},this)}})}.call(this),function(){"use strict";var e=this,t=e.Chart,n=t.helpers,i={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};t.Type.extend({name:"PolarArea",defaults:i,initialize:function(e){this.segments=[],this.SegmentArc=t.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:e.length}),this.updateScaleRange(e),this.scale.update(),n.each(e,function(e,t){this.addData(e,t,!0)},this),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getSegmentsAtEvent(e):[];n.each(this.segments,function(e){e.restore(["fillColor"])}),n.each(t,function(e){e.fillColor=e.highlightColor}),this.showTooltip(t)}),this.render()},getSegmentsAtEvent:function(e){var t=[],i=n.getRelativePosition(e);return n.each(this.segments,function(e){e.inRange(i.x,i.y)&&t.push(e)},this),t},addData:function(e,t,n){var i=t||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({fillColor:e.color,highlightColor:e.highlight||e.color,label:e.label,value:e.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(e.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),n||(this.reflow(),this.update())},removeData:function(e){var t=n.isNumber(e)?e:this.segments.length-1;this.segments.splice(t,1),this.reflow(),this.update()},calculateTotal:function(e){this.total=0,n.each(e,function(e){this.total+=e.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(e){var t=[];n.each(e,function(e){t.push(e.value)});var i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(t,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),n.each(this.segments,function(e){e.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),n.each(this.segments,function(e){e.update({outerRadius:this.scale.calculateCenterOffset(e.value)})},this)},draw:function(e){var t=e||1;this.clear(),n.each(this.segments,function(e,n){e.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(e.value)},t),e.endAngle=e.startAngle+e.circumference,0===n&&(e.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=e.endAngle),e.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var e=this,t=e.Chart,n=t.helpers;t.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(e){this.PointClass=t.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(e),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(e){var t="mouseout"!==e.type?this.getPointsAtEvent(e):[];this.eachPoints(function(e){e.restore(["fillColor","strokeColor"])}),n.each(t,function(e){e.fillColor=e.highlightFill,e.strokeColor=e.highlightStroke}),this.showTooltip(t)}),n.each(e.datasets,function(t){var i={label:t.label||null,fillColor:t.fillColor,strokeColor:t.strokeColor,pointColor:t.pointColor,pointStrokeColor:t.pointStrokeColor,points:[]};this.datasets.push(i),n.each(t.data,function(n,o){var r;this.scale.animation||(r=this.scale.getPointPosition(o,this.scale.calculateCenterOffset(n))),i.points.push(new this.PointClass({value:n,label:e.labels[o],datasetLabel:t.label,x:this.options.animation?this.scale.xCenter:r.x,y:this.options.animation?this.scale.yCenter:r.y,strokeColor:t.pointStrokeColor,fillColor:t.pointColor,highlightFill:t.pointHighlightFill||t.pointColor,highlightStroke:t.pointHighlightStroke||t.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(e){n.each(this.datasets,function(t){n.each(t.points,e,this)},this)},getPointsAtEvent:function(e){var t=n.getRelativePosition(e),i=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},t),o=2*Math.PI/this.scale.valuesCount,r=Math.round((i.angle-1.5*Math.PI)/o),a=[];return(r>=this.scale.valuesCount||0>r)&&(r=0),i.distance<=this.scale.drawingArea&&n.each(this.datasets,function(e){a.push(e.points[r])}),a},buildScale:function(e){this.scale=new t.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:e.labels,valuesCount:e.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(e.datasets),this.scale.buildYLabels()},updateScaleRange:function(e){var t=function(){var t=[];return n.each(e,function(e){e.data?t=t.concat(e.data):n.each(e.points,function(e){t.push(e.value)})}),t}(),i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(t,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i)},addData:function(e,t){this.scale.valuesCount++,n.each(e,function(e,n){var i=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(e));this.datasets[n].points.push(new this.PointClass({value:e,label:t,x:i.x,y:i.y,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.labels.push(t),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),n.each(this.datasets,function(e){e.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(e){e.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(e){var t=e||1,i=this.chart.ctx;this.clear(),this.scale.draw(),n.each(this.datasets,function(e){n.each(e.points,function(e,n){e.hasValue()&&e.transition(this.scale.getPointPosition(n,this.scale.calculateCenterOffset(e.value)),t)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=e.strokeColor,i.beginPath(),n.each(e.points,function(e,t){0===t?i.moveTo(e.x,e.y):i.lineTo(e.x,e.y)},this),i.closePath(),i.stroke(),i.fillStyle=e.fillColor,i.fill(),n.each(e.points,function(e){e.hasValue()&&e.draw()})},this)}})}.call(this),/**
 * tc-angular-chartjs - v1.0.9 - 2014-10-14
 * Copyright (c) 2014 Carl Craig <carlcraig@3c-studios.com>
 * Dual licensed with the Apache-2.0 or MIT license.
 */
function(){"use strict";function e(e){return new e}function t(e){return new e("line")}function n(e){return new e("bar")}function i(e){return new e("radar")}function o(e){return new e("polararea")}function r(e){return new e("pie")}function a(e){return new e("doughnut")}function s(){return function(e){function t(t,i,o){var r,a=i[0].getContext("2d"),s=new Chart(a),l=!1,c=!1,u=!1,d=null;for(var f in o)"chartLegend"===f?l=!0:"chart"===f?u=!0:"autoLegend"===f&&(c=!0);t.$watch("data",function(o){if(o){if(r&&r.destroy(),e)r=s[n(e)](t.data,t.options);else{if(!t.type)throw"Error creating chart: Chart type required.";r=s[n(t.type)](t.data,t.options)}l&&(t.legend=r.generateLegend()),c&&(d&&d.remove(),angular.element(i[0]).after(r.generateLegend()),d=angular.element(i[0]).next()),u&&(t.chart=r)}},!0)}function n(e){var t=e.toLowerCase();switch(t){case"line":return"Line";case"bar":return"Bar";case"radar":return"Radar";case"polararea":return"PolarArea";case"pie":return"Pie";case"doughnut":return"Doughnut";default:return e}}var i={restrict:"A",scope:{data:"=chartData",options:"=chartOptions",type:"@chartType",legend:"=chartLegend",chart:"=chart"},link:t};return i}}function l(){function e(e,t){e.$watch("legend",function(e){e&&t.html(e)},!0)}var t={restrict:"A",scope:{legend:"=chartLegend"},link:e};return t}angular.module("tc.chartjs",[]).directive("tcChartjs",e).directive("tcChartjsLine",t).directive("tcChartjsBar",n).directive("tcChartjsRadar",i).directive("tcChartjsPolararea",o).directive("tcChartjsPie",r).directive("tcChartjsDoughnut",a).directive("tcChartjsLegend",l).factory("TcChartjsFactory",s),e.$inject=["TcChartjsFactory"],t.$inject=["TcChartjsFactory"],n.$inject=["TcChartjsFactory"],i.$inject=["TcChartjsFactory"],o.$inject=["TcChartjsFactory"],r.$inject=["TcChartjsFactory"],a.$inject=["TcChartjsFactory"]}(),/*!
 * angular-bootstrap-colorpicker
 * Michal Zielenkiewicz
 * https://github.com/buberdds/angular-bootstrap-colorpicker
 * License: MIT
 */
angular.module("colorpicker.module",[]).factory("Helper",function(){"use strict";return{closestSlider:function(e){var t=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector;return t.bind(e)("I")?e.parentNode:e},getOffset:function(e,t){for(var n=0,i=0,o=0,r=0;e&&!isNaN(e.offsetLeft)&&!isNaN(e.offsetTop);)n+=e.offsetLeft,i+=e.offsetTop,t||"BODY"!==e.tagName?(o+=e.scrollLeft,r+=e.scrollTop):(o+=document.documentElement.scrollLeft||e.scrollLeft,r+=document.documentElement.scrollTop||e.scrollTop),e=e.offsetParent;return{top:i,left:n,scrollX:o,scrollY:r}},stringParsers:[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}}]}}).factory("Color",["Helper",function(e){"use strict";return{value:{h:1,s:1,b:1,a:1},rgb:function(){var e=this.toRGB();return"rgb("+e.r+","+e.g+","+e.b+")"},rgba:function(){var e=this.toRGB();return"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"},hex:function(){return this.toHex()},RGBtoHSB:function(e,t,n,i){e/=255,t/=255,n/=255;var o,r,a,s;return a=Math.max(e,t,n),s=a-Math.min(e,t,n),o=0===s?null:a===e?(t-n)/s:a===t?(n-e)/s+2:(e-t)/s+4,o=(o+360)%6*60/360,r=0===s?0:s/a,{h:o||1,s:r,b:a,a:i||1}},setColor:function(t){t=t.toLowerCase();for(var n in e.stringParsers)if(e.stringParsers.hasOwnProperty(n)){var i=e.stringParsers[n],o=i.re.exec(t),r=o&&i.parse(o);if(r)return this.value=this.RGBtoHSB.apply(null,r),!1}},setHue:function(e){this.value.h=1-e},setSaturation:function(e){this.value.s=e},setLightness:function(e){this.value.b=1-e},setAlpha:function(e){this.value.a=parseInt(100*(1-e),10)/100},toRGB:function(e,t,n,i){e||(e=this.value.h,t=this.value.s,n=this.value.b),e*=360;var o,r,a,s,l;return e=e%360/60,l=n*t,s=l*(1-Math.abs(e%2-1)),o=r=a=n-l,e=~~e,o+=[l,s,0,0,s,l][e],r+=[s,l,l,s,0,0][e],a+=[0,0,s,l,l,s][e],{r:Math.round(255*o),g:Math.round(255*r),b:Math.round(255*a),a:i||this.value.a}},toHex:function(e,t,n,i){var o=this.toRGB(e,t,n,i);return"#"+(1<<24|parseInt(o.r,10)<<16|parseInt(o.g,10)<<8|parseInt(o.b,10)).toString(16).substr(1)}}}]).factory("Slider",["Helper",function(e){"use strict";var t={maxLeft:0,maxTop:0,callLeft:null,callTop:null,knob:{top:0,left:0}},n={};return{getSlider:function(){return t},getLeftPosition:function(e){return Math.max(0,Math.min(t.maxLeft,t.left+((e.pageX||n.left)-n.left)))},getTopPosition:function(e){return Math.max(0,Math.min(t.maxTop,t.top+((e.pageY||n.top)-n.top)))},setSlider:function(i,o){var r=e.closestSlider(i.target),a=e.getOffset(r,o),s=r.getBoundingClientRect(),l=i.clientX-s.left,c=i.clientY-s.top;t.knob=r.children[0].style,t.left=i.pageX-a.left-window.pageXOffset+a.scrollX,t.top=i.pageY-a.top-window.pageYOffset+a.scrollY,n={left:i.pageX-(l-t.left),top:i.pageY-(c-t.top)}},setSaturation:function(e,n){t={maxLeft:100,maxTop:100,callLeft:"setSaturation",callTop:"setLightness"},this.setSlider(e,n)},setHue:function(e,n){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setHue"},this.setSlider(e,n)},setAlpha:function(e,n){t={maxLeft:0,maxTop:100,callLeft:!1,callTop:"setAlpha"},this.setSlider(e,n)},setKnob:function(e,n){t.knob.top=e+"px",t.knob.left=n+"px"}}}]).directive("colorpicker",["$document","$compile","Color","Slider","Helper",function(e,t,n,i,o){"use strict";return{require:"?ngModel",restrict:"A",link:function(r,a,s,l){var c,u=s.colorpicker?s.colorpicker:"hex",d=angular.isDefined(s.colorpickerPosition)?s.colorpickerPosition:"bottom",f=angular.isDefined(s.colorpickerInline)?s.colorpickerInline:!1,h=angular.isDefined(s.colorpickerFixedPosition)?s.colorpickerFixedPosition:!1,p=angular.isDefined(s.colorpickerParent)?a.parent():angular.element(document.body),m=angular.isDefined(s.colorpickerWithInput)?s.colorpickerWithInput:!1,g=m?'<input type="text" name="colorpicker-input">':"",v=f?"":'<button type="button" class="close close-colorpicker">&times;</button>',y='<div class="colorpicker dropdown bootstrap-wrapper"><div class="dropdown-menu"><colorpicker-saturation><i></i></colorpicker-saturation><colorpicker-hue><i></i></colorpicker-hue><colorpicker-alpha><i></i></colorpicker-alpha><colorpicker-preview></colorpicker-preview>'+g+v+"</div></div>",b=angular.element(y),x=n,w=b.find("colorpicker-hue"),C=b.find("colorpicker-saturation"),k=b.find("colorpicker-preview"),S=b.find("i");if(t(b)(r),m){var T=b.find("input");T.on("mousedown",function(e){e.stopPropagation()}).on("keyup",function(e){var t=this.value;a.val(t),l&&r.$apply(l.$setViewValue(t)),e.stopPropagation(),e.preventDefault()}),a.on("keyup",function(){T.val(a.val())})}var $=function(){e.on("mousemove",_),e.on("mouseup",A)};"rgba"===u&&(b.addClass("alpha"),c=b.find("colorpicker-alpha"),c.on("click",function(e){i.setAlpha(e,h),_(e)}).on("mousedown",function(e){i.setAlpha(e,h),$()}).on("mouseup",function(e){M("colorpicker-selected-alpha")})),w.on("click",function(e){i.setHue(e,h),_(e)}).on("mousedown",function(e){i.setHue(e,h),$()}).on("mouseup",function(e){M("colorpicker-selected-hue")}),C.on("click",function(e){i.setSaturation(e,h),_(e),angular.isDefined(s.colorpickerCloseOnSelect)&&P()}).on("mousedown",function(e){i.setSaturation(e,h),$()}).on("mouseup",function(e){M("colorpicker-selected-saturation")}),h&&b.addClass("colorpicker-fixed-position"),b.addClass("colorpicker-position-"+d),"true"===f&&b.addClass("colorpicker-inline"),p.append(b),l&&(l.$render=function(){a.val(l.$viewValue)},r.$watch(s.ngModel,function(e){N(),m&&T.val(e)})),a.on("$destroy",function(){b.remove()});var E=function(){try{k.css("backgroundColor",x[u]())}catch(e){k.css("backgroundColor",x.toHex())}C.css("backgroundColor",x.toHex(x.value.h,1,1,1)),"rgba"===u&&(c.css.backgroundColor=x.toHex())},_=function(e){var t=i.getLeftPosition(e),n=i.getTopPosition(e),o=i.getSlider();i.setKnob(n,t),o.callLeft&&x[o.callLeft].call(x,t/100),o.callTop&&x[o.callTop].call(x,n/100),E();var s=x[u]();return a.val(s),l&&r.$apply(l.$setViewValue(s)),m&&T.val(s),!1},A=function(){M("colorpicker-selected"),e.off("mousemove",_),e.off("mouseup",A)},N=function(){x.setColor(a.val()),S.eq(0).css({left:100*x.value.s+"px",top:100-100*x.value.b+"px"}),S.eq(1).css("top",100*(1-x.value.h)+"px"),S.eq(2).css("top",100*(1-x.value.a)+"px"),E()},R=function(){var e,t=o.getOffset(a[0]);return angular.isDefined(s.colorpickerParent)&&(t.left=0,t.top=0),"top"===d?e={top:t.top-147,left:t.left}:"right"===d?e={top:t.top,left:t.left+126}:"bottom"===d?e={top:t.top+a[0].offsetHeight+2,left:t.left}:"left"===d&&(e={top:t.top,left:t.left-150}),{top:e.top+"px",left:e.left+"px"}},D=function(){P()},L=function(){b.hasClass("colorpicker-visible")||(N(),b.addClass("colorpicker-visible").css(R()),M("colorpicker-shown"),f===!1&&e.on("mousedown",D),s.colorpickerIsOpen&&(r[s.colorpickerIsOpen]=!0,r.$$phase||r.$digest()))};f===!1?a.on("click",L):L(),b.on("mousedown",function(e){e.stopPropagation(),e.preventDefault()});var M=function(e){l&&r.$emit(e,{name:s.ngModel,value:l.$modelValue})},P=function(){b.hasClass("colorpicker-visible")&&(b.removeClass("colorpicker-visible"),M("colorpicker-closed"),e.off("mousedown",D),s.colorpickerIsOpen&&(r[s.colorpickerIsOpen]=!1,r.$$phase||r.$digest()))};b.find("button").on("click",function(){P()}),s.colorpickerIsOpen&&r.$watch(s.colorpickerIsOpen,function(e){e===!0?L():e===!1&&P()})}}}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="treeControl"),function(e){"use strict";function t(e){return function(){for(var t,n=[],i=e;i&&i.node!==e.synteticRoot;)t!==i.node&&n.push(i.node),t=i.node,i=i.$parent;return n}}e.module("treeControl",[]).constant("treeConfig",{templateUrl:null}).directive("treecontrol",["$compile",function(n){function i(e,t){return e?t?'class="'+e+'"':e:""}function o(e,t,n){e.hasOwnProperty(t)||(e[t]=n)}return{restrict:"EA",require:"treecontrol",transclude:!0,scope:{treeModel:"=",selectedNode:"=?",selectedNodes:"=?",expandedNodes:"=?",onSelection:"&",onNodeToggle:"&",options:"=?",orderBy:"=?",reverseOrder:"@",filterExpression:"=?",filterComparator:"=?"},controller:["$scope","$templateCache","$interpolate","treeConfig",function(r,a,s,l){function c(e){return!e[r.options.nodeChildren]||0===e[r.options.nodeChildren].length}function u(t,n){if(e.isArray(t)){n=n||[];for(var i=0;i<t.length;i++)n[i]=t[i]}else if(e.isObject(t)){n=n||{};for(var o in t)!hasOwnProperty.call(t,o)||"$"===o.charAt(0)&&"$"===o.charAt(1)||(n[o]=t[o])}return n||t}function d(t,n){return t&&n?(t=u(t),t[r.options.nodeChildren]=[],n=u(n),n[r.options.nodeChildren]=[],e.equals(t,n)):!1}function f(){return!0}function h(e){if(!r.options.multiSelection&&r.options.equality(e,r.selectedNode))return!0;if(r.options.multiSelection&&r.selectedNodes){for(var t=0;t<r.selectedNodes.length;t++)if(r.options.equality(e,r.selectedNodes[t]))return!0;return!1}}r.options=r.options||{},o(r.options,"multiSelection",!1),o(r.options,"nodeChildren","children"),o(r.options,"dirSelectable","true"),o(r.options,"injectClasses",{}),o(r.options.injectClasses,"ul",""),o(r.options.injectClasses,"li",""),o(r.options.injectClasses,"liSelected",""),o(r.options.injectClasses,"iExpanded",""),o(r.options.injectClasses,"iCollapsed",""),o(r.options.injectClasses,"iLeaf",""),o(r.options.injectClasses,"label",""),o(r.options.injectClasses,"labelSelected",""),o(r.options,"equality",d),o(r.options,"isLeaf",c),o(r.options,"allowDeselect",!0),o(r.options,"isSelectable",f),r.selectedNodes=r.selectedNodes||[],r.expandedNodes=r.expandedNodes||[],r.expandedNodesMap={};for(var p=0;p<r.expandedNodes.length;p++)r.expandedNodesMap[""+p]=r.expandedNodes[p];r.parentScopeOfTree=r.$parent,r.headClass=function(e){var t=i(r.options.injectClasses.liSelected,!1),n="";return t&&h(e)&&(n=" "+t),r.options.isLeaf(e)?"tree-leaf"+n:r.expandedNodesMap[this.$id]?"tree-expanded"+n:"tree-collapsed"+n},r.iBranchClass=function(){return i(r.expandedNodesMap[this.$id]?r.options.injectClasses.iExpanded:r.options.injectClasses.iCollapsed)},r.nodeExpanded=function(){return!!r.expandedNodesMap[this.$id]},r.selectNodeHead=function(){var e=this,n=void 0===r.expandedNodesMap[e.$id];if(r.expandedNodesMap[e.$id]=n?e.node:void 0,n)r.expandedNodes.push(e.node);else{for(var i,o=0;o<r.expandedNodes.length&&!i;o++)r.options.equality(r.expandedNodes[o],e.node)&&(i=o);void 0!==i&&r.expandedNodes.splice(i,1)}if(r.onNodeToggle){var a=e.$parent.node===e.synteticRoot?null:e.$parent.node,s=t(e);r.onNodeToggle({node:e.node,$parentNode:a,$path:s,$index:e.$index,$first:e.$first,$middle:e.$middle,$last:e.$last,$odd:e.$odd,$even:e.$even,expanded:n})}},r.selectNodeLabel=function(e){var n=this;if(r.options.isLeaf(e)||r.options.dirSelectable&&r.options.isSelectable(e)){if(r.options.isLeaf(e)&&!r.options.isSelectable(e))return;var i=!1;if(r.options.multiSelection){for(var o=-1,a=0;a<r.selectedNodes.length;a++)if(r.options.equality(e,r.selectedNodes[a])){o=a;break}-1===o?(r.selectedNodes.push(e),i=!0):r.selectedNodes.splice(o,1)}else r.options.equality(e,r.selectedNode)&&r.options.allowDeselect?r.selectedNode=void 0:(r.selectedNode=e,i=!0);if(r.onSelection){var s=n.$parent.node===n.synteticRoot?null:n.$parent.node,l=t(n);r.onSelection({node:e,selected:i,$parentNode:s,$path:l,$index:n.$index,$first:n.$first,$middle:n.$middle,$last:n.$last,$odd:n.$odd,$even:n.$even})}}else this.selectNodeHead()},r.selectedClass=function(){var e=h(this.node),t=i(r.options.injectClasses.labelSelected,!1),n="";return t&&e&&(n=" "+t),e?"tree-selected"+n:""},r.unselectableClass=function(){var e=!r.options.isSelectable(this.node),t=i(r.options.injectClasses.labelUnselectable,!1);return e?"tree-unselectable "+t:""},r.isReverse=function(){return!("false"===r.reverseOrder||"False"===r.reverseOrder||""===r.reverseOrder||r.reverseOrder===!1)},r.orderByFunc=function(){return r.orderBy};var m,g={orderBy:r.orderBy?" | orderBy:orderByFunc():isReverse()":"",ulClass:i(r.options.injectClasses.ul,!0),nodeChildren:r.options.nodeChildren,liClass:i(r.options.injectClasses.li,!0),iLeafClass:i(r.options.injectClasses.iLeaf,!1),labelClass:i(r.options.injectClasses.label,!1)},v=r.options.templateUrl||l.templateUrl;v&&(m=a.get(v)),m||(m='<ul {{options.ulClass}} ><li ng-repeat="node in node.{{options.nodeChildren}} | filter:filterExpression:filterComparator {{options.orderBy}}" ng-class="headClass(node)" {{options.liClass}}set-node-to-data><i class="tree-branch-head" ng-class="iBranchClass()" ng-click="selectNodeHead(node)"></i><i class="tree-leaf-head {{options.iLeafClass}}"></i><div class="tree-label {{options.labelClass}}" ng-class="[selectedClass(), unselectableClass()]" ng-click="selectNodeLabel(node)" tree-transclude></div><treeitem ng-if="nodeExpanded()"></treeitem></li></ul>'),this.template=n(s(m)({options:g}))}],compile:function(t,n,i){return function(t,n,o,r){t.$watch("treeModel",function(n){if(e.isArray(n)){if(e.isDefined(t.node)&&e.equals(t.node[t.options.nodeChildren],n))return;t.node={},t.synteticRoot=t.node,t.node[t.options.nodeChildren]=n}else{if(e.equals(t.node,n))return;t.node=n}}),t.$watchCollection("expandedNodes",function(i,o){var r=0,a={},s=n.find("li"),l=[];e.forEach(s,function(t){var n=e.element(t),i={$id:n.data("scope-id"),node:n.data("node")};l.push(i)}),e.forEach(i,function(e){for(var n=!1,i=0;i<l.length&&!n;i++){var o=l[i];t.options.equality(e,o.node)&&(a[o.$id]=o.node,n=!0)}n||(a[r++]=e)}),t.expandedNodesMap=a}),r.template(t,function(e){n.html("").append(e)}),t.$treeTransclude=i}}}}]).directive("setNodeToData",["$parse",function(e){return{restrict:"A",link:function(e,t,n){t.data("node",e.node),t.data("scope-id",e.$id)}}}]).directive("treeitem",function(){return{restrict:"E",require:"^treecontrol",link:function(e,t,n,i){i.template(e,function(e){t.html("").append(e)})}}}).directive("treeTransclude",function(){return{link:function(n,i,o,r){if(n.options.isLeaf(n.node)||e.forEach(n.expandedNodesMap,function(e,t){n.options.equality(e,n.node)&&(n.expandedNodesMap[n.$id]=n.node,n.expandedNodesMap[t]=void 0)}),!n.options.multiSelection&&n.options.equality(n.node,n.selectedNode))n.selectedNode=n.node;else if(n.options.multiSelection){for(var a=[],s=0;s<n.selectedNodes.length;s++)n.options.equality(n.node,n.selectedNodes[s])&&a.push(n.node);n.selectedNodes=a}n.transcludeScope=n.parentScopeOfTree.$new(),n.transcludeScope.node=n.node,n.transcludeScope.$path=t(n),n.transcludeScope.$parentNode=n.$parent.node===n.synteticRoot?null:n.$parent.node,n.transcludeScope.$index=n.$index,n.transcludeScope.$first=n.$first,n.transcludeScope.$middle=n.$middle,n.transcludeScope.$last=n.$last,n.transcludeScope.$odd=n.$odd,n.transcludeScope.$even=n.$even,n.$on("$destroy",function(){n.transcludeScope.$destroy()}),n.$treeTransclude(n.transcludeScope,function(e){i.empty(),i.append(e)})}}})}(angular),/*!
 * angular-vertilize 1.0.0
 * Christopher Collins
 * https://github.com/Sixthdim/angular-vertilize.git
 * License: MIT
 */
function(){"use strict";var e=angular.module("angular.vertilize",[]);e.directive("vertilizeContainer",[function(){return{restrict:"EA",controller:["$scope","$window",function(e,t){var n=this;n.childrenHeights=[],n.allocateMe=function(){return n.childrenHeights.push(0),n.childrenHeights.length-1},n.updateMyHeight=function(e,t){n.childrenHeights[e]=t},n.getTallestHeight=function(){for(var e=0,t=0;t<n.childrenHeights.length;t+=1)e=Math.max(e,n.childrenHeights[t]);return e},angular.element(t).bind("resize",function(){return e.$apply()})}]}}]),e.directive("vertilize",[function(){return{restrict:"EA",require:"^vertilizeContainer",link:function(e,t,n,i){var o=i.allocateMe(),r=function(){var e=t.clone().removeAttr("vertilize").css({height:"",width:t.width(),position:"fixed",top:0,left:0,visibility:"hidden"});t.after(e);var n=e.height();return e.remove(),n};e.$watch(r,function(e){e&&i.updateMyHeight(o,e)}),e.$watch(i.getTallestHeight,function(e){e&&t.css("height",e)})}}}])}(),/**
 * oclazyload - Load modules on demand (lazy load) with angularJS
 * @version v1.0.10
 * @link https://github.com/ocombe/ocLazyLoad
 * @license MIT
 * @author Olivier Combe <olivier.combe@gmail.com>
 * Modified by Benjamin Kristensen <bwk@webtop.dk>
 */
function(e,t){"use strict";var n=["ng","oc.lazyLoad"],i={},o=[],r=[],a=[],s=[],l=e.noop,c={},u=[],d=e.module("oc.lazyLoad",["ng"]);d.provider("$ocLazyLoad",["$controllerProvider","$provide","$compileProvider","$filterProvider","$injector","$animateProvider",function(d,f,m,g,v,y){function b(t,i,o){if(i){var r,s,d,f=[];for(r=i.length-1;r>=0;r--)if(s=i[r],e.isString(s)||(s=C(s)),s&&-1===u.indexOf(s)&&(!S[s]||-1!==a.indexOf(s))){var h=-1===n.indexOf(s);if(d=p(s),h&&(n.push(s),b(t,d.requires,o)),d._runBlocks.length>0)for(c[s]=[];d._runBlocks.length>0;)c[s].push(d._runBlocks.shift());e.isDefined(c[s])&&(h||o.rerun)&&(f=f.concat(c[s])),w(t,d._invokeQueue,s,o.reconfig),w(t,d._configBlocks,s,o.reconfig),l(h?"ocLazyLoad.moduleLoaded":"ocLazyLoad.moduleReloaded",s),i.pop(),u.push(s)}var m=t.getInstanceInjector();e.forEach(f,function(e){m.invoke(e)})}}function x(t,n){function o(t,n){var i,o=!0;return n.length&&(i=r(t),e.forEach(n,function(e){o=o&&r(e)!==i})),o}function r(t){return e.isArray(t)?R(t.toString()):e.isObject(t)?R(N(t)):e.isDefined(t)&&null!==t?R(t.toString()):t}var a=t[2][0],s=t[1],c=!1;e.isUndefined(i[n])&&(i[n]={}),e.isUndefined(i[n][s])&&(i[n][s]={});var u=function(e,t){i[n][s].hasOwnProperty(e)||(i[n][s][e]=[]),o(t,i[n][s][e])&&(c=!0,i[n][s][e].push(t),l("ocLazyLoad.componentLoaded",[n,s,e]))};if(e.isString(a))u(a,t[2][1]);else{if(!e.isObject(a))return!1;e.forEach(a,function(t,n){e.isString(t)?u(t,a[1]):u(n,t)})}return c}function w(t,n,i,r){if(n){var a,s,l,c;for(a=0,s=n.length;s>a;a++)if(l=n[a],e.isArray(l)){if(null!==t){if(!t.hasOwnProperty(l[0]))throw new Error("unsupported provider "+l[0]);c=t[l[0]]}var u=x(l,i);if("invoke"!==l[1])u&&e.isDefined(c)&&c[l[1]].apply(c,l[2]);else{var d=function(t){var n=o.indexOf(i+"-"+t);(-1===n||r)&&(-1===n&&o.push(i+"-"+t),e.isDefined(c)&&c[l[1]].apply(c,l[2]))};if(e.isFunction(l[2][0]))d(l[2][0]);else if(e.isArray(l[2][0]))for(var f=0,h=l[2][0].length;h>f;f++)e.isFunction(l[2][0][f])&&d(l[2][0][f])}}}}function C(t){var n=null;return e.isString(t)?n=t:e.isObject(t)&&t.hasOwnProperty("name")&&e.isString(t.name)&&(n=t.name),n}function k(t){if(!e.isString(t))return!1;try{return p(t)}catch(n){if(/No module/.test(n)||n.message.indexOf("$injector:nomod")>-1)return!1}}var S={},T={$controllerProvider:d,$compileProvider:m,$filterProvider:g,$provide:f,$injector:v,$animateProvider:y},$=!1,E=!1,_=[],A={};_.push=function(e){-1===this.indexOf(e)&&Array.prototype.push.apply(this,arguments)},this.config=function(t){e.isDefined(t.modules)&&(e.isArray(t.modules)?e.forEach(t.modules,function(e){S[e.name]=e}):S[t.modules.name]=t.modules),e.isDefined(t.debug)&&($=t.debug),e.isDefined(t.events)&&(E=t.events)},this._init=function(i){if(0===r.length){var o=[i],a=["ng:app","ng-app","x-ng-app","data-ng-app"],l=/\sng[:\-]app(:\s*([\w\d_]+);?)?\s/,c=function(e){return e&&o.push(e)};e.forEach(a,function(t){a[t]=!0,c(document.getElementById(t)),t=t.replace(":","\\:"),"undefined"!=typeof i[0]&&i[0].querySelectorAll&&(e.forEach(i[0].querySelectorAll("."+t),c),e.forEach(i[0].querySelectorAll("."+t+"\\:"),c),e.forEach(i[0].querySelectorAll("["+t+"]"),c))}),e.forEach(o,function(t){if(0===r.length){var n=" "+i.className+" ",o=l.exec(n);o?r.push((o[2]||"").replace(/\s+/g,",")):e.forEach(t.attributes,function(e){0===r.length&&a[e.name]&&r.push(e.value)})}})}0!==r.length||(t.jasmine||t.mocha)&&e.isDefined(e.mock)||console.error("No module found during bootstrap, unable to init ocLazyLoad. You should always use the ng-app directive or angular.boostrap when you use ocLazyLoad.");var u=function d(t){if(-1===n.indexOf(t)){n.push(t);var i=e.module(t);w(null,i._invokeQueue,t),w(null,i._configBlocks,t),e.forEach(i.requires,d)}};e.forEach(r,function(e){u(e)}),r=[],s.pop()};var N=function(t){try{return JSON.stringify(t)}catch(n){var i=[];return JSON.stringify(t,function(t,n){if(e.isObject(n)&&null!==n){if(-1!==i.indexOf(n))return;i.push(n)}return n})}},R=function(e){var t,n,i,o=0;if(0==e.length)return o;for(t=0,i=e.length;i>t;t++)n=e.charCodeAt(t),o=(o<<5)-o+n,o|=0;return o};this.$get=["$log","$rootElement","$rootScope","$cacheFactory","$q",function(t,o,a,c,d){function f(e){var n=d.defer();return t.error(e.message),n.reject(e),n.promise}var m,g=c("ocLazyLoad");return $||(t={},t.error=e.noop,t.warn=e.noop,t.info=e.noop),T.getInstanceInjector=function(){return m?m:m=o.data("$injector")||e.injector()},l=function(e,n){E&&a.$broadcast(e,n),$&&t.info(e,n)},{_broadcast:l,_$log:t,_getFilesCache:function(){return g},toggleWatch:function(e){e?s.push(!0):s.pop()},getModuleConfig:function(t){if(!e.isString(t))throw new Error("You need to give the name of the module to get");return S[t]?e.copy(S[t]):null},setModuleConfig:function(t){if(!e.isObject(t))throw new Error("You need to give the module config object to set");return S[t.name]=t,t},getLoadedModules:function(){return n},getModules:function(){var e=[];for(var t in S)e.push(t);return e},isLoaded:function(t){var i=function(e){var t=n.indexOf(e)>-1;return t||(t=!!k(e)),t};if(e.isString(t)&&(t=[t]),e.isArray(t)){var o,r;for(o=0,r=t.length;r>o;o++)if(!i(t[o]))return!1;return!0}throw new Error("You need to define the module(s) name(s)")},_getModuleName:C,_getModule:function(e){try{return p(e)}catch(t){throw(/No module/.test(t)||t.message.indexOf("$injector:nomod")>-1)&&(t.message='The module "'+N(e)+'" that you are trying to load does not exist. '+t.message),t}},moduleExists:k,_loadDependencies:function(t,n){var i,o,r,a=[],s=this;if(t=s._getModuleName(t),null===t)return d.when();try{i=s._getModule(t)}catch(l){return f(l)}return o=s.getRequires(i),e.forEach(o,function(i){if(e.isString(i)){var o=s.getModuleConfig(i);if(null===o)return void _.push(i);i=o,o.name=void 0}if(s.moduleExists(i.name))return r=i.files.filter(function(e){return s.getModuleConfig(i.name).files.indexOf(e)<0}),0!==r.length&&s._$log.warn('Module "',t,'" attempted to redefine configuration for dependency. "',i.name,'"\n Additional Files Loaded:',r),e.isDefined(s.filesLoader)?void a.push(s.filesLoader(i,n).then(function(){return s._loadDependencies(i)})):f(new Error("Error: New dependencies need to be loaded from external files ("+i.files+"), but no loader has been defined."));if(e.isArray(i)){var l=[];e.forEach(i,function(e){var t=s.getModuleConfig(e);null===t?l.push(e):t.files&&(l=l.concat(t.files))}),l.length>0&&(i={files:l})}else e.isObject(i)&&i.hasOwnProperty("name")&&i.name&&(s.setModuleConfig(i),_.push(i.name));if(e.isDefined(i.files)&&0!==i.files.length){if(!e.isDefined(s.filesLoader))return f(new Error('Error: the module "'+i.name+'" is defined in external files ('+i.files+"), but no loader has been defined."));a.push(s.filesLoader(i,n).then(function(){return s._loadDependencies(i)}))}}),d.all(a)},inject:function(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments.length<=2||void 0===arguments[2]?!1:arguments[2],o=this,a=d.defer();if(e.isDefined(t)&&null!==t){if(e.isArray(t)){var s=[];return e.forEach(t,function(e){s.push(o.inject(e,n,i))}),d.all(s)}o._addToLoadList(o._getModuleName(t),!0,i)}if(r.length>0){var l=r.slice(),c=function f(e){_.push(e),A[e]=a.promise,o._loadDependencies(e,n).then(function(){try{u=[],b(T,_,n)}catch(e){return o._$log.error(e.message),void a.reject(e)}r.length>0?f(r.shift()):a.resolve(l)},function(e){a.reject(e)})};c(r.shift())}else{if(n&&n.name&&A[n.name])return A[n.name];a.resolve()}return a.promise},getRequires:function(t){var i=[];return e.forEach(t.requires,function(e){-1===n.indexOf(e)&&i.push(e)}),i},_invokeQueue:w,_registerInvokeList:x,_register:b,_addToLoadList:h,_unregister:function(t){e.isDefined(t)&&e.isArray(t)&&e.forEach(t,function(e){i[e]=void 0})}}}],this._init(e.element(t.document))}]);var f=e.bootstrap;e.bootstrap=function(t,d,p){return n=["ng","oc.lazyLoad"],i={},o=[],r=[],a=[],s=[],l=e.noop,c={},u=[],e.forEach(d.slice(),function(e){h(e,!0,!0)}),f(t,d,p)};var h=function(t,n,i){(s.length>0||n)&&e.isString(t)&&-1===r.indexOf(t)&&(r.push(t),i&&a.push(t))},p=e.module;e.module=function(e,t,n){return h(e,!1,!0),p(e,t,n)},"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="oc.lazyLoad")}(angular,window),function(e){"use strict";e.module("oc.lazyLoad").directive("ocLazyLoad",["$ocLazyLoad","$compile","$animate","$parse","$timeout",function(t,n,i,o,r){return{restrict:"A",terminal:!0,priority:1e3,compile:function(r,a){var s=r[0].innerHTML;return r.html(""),function(r,a,l){var c=o(l.ocLazyLoad);r.$watch(function(){return c(r)||l.ocLazyLoad},function(o){e.isDefined(o)&&t.load(o).then(function(){i.enter(s,a),n(a.contents())(r)})},!0)}}}}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q","$window","$interval",function(t,n,i,o){var r=!1,a=!1,s=i.document.getElementsByTagName("head")[0]||i.document.getElementsByTagName("body")[0];return t.buildElement=function(l,c,u){var d,f,h=n.defer(),p=t._getFilesCache(),m=function(e){var t=(new Date).getTime();return e.indexOf("?")>=0?"&"===e.substring(0,e.length-1)?e+"_dc="+t:e+"&_dc="+t:e+"?_dc="+t};switch(e.isUndefined(p.get(c))&&p.put(c,h.promise),l){case"css":d=i.document.createElement("link"),d.type="text/css",d.rel="stylesheet",d.href=u.cache===!1?m(c):c;break;case"js":d=i.document.createElement("script"),d.src=u.cache===!1?m(c):c;break;default:p.remove(c),h.reject(new Error('Requested type "'+l+'" is not known. Could not inject "'+c+'"'))}d.onload=d.onreadystatechange=function(e){d.readyState&&!/^c|loade/.test(d.readyState)||f||(d.onload=d.onreadystatechange=null,f=1,t._broadcast("ocLazyLoad.fileLoaded",c),h.resolve(d))},d.onerror=function(){p.remove(c),h.reject(new Error("Unable to load "+c))},d.async=u.serie?0:1;var g=s.lastChild;if(u.insertBefore){var v=e.element(e.isDefined(window.jQuery)?u.insertBefore:document.querySelector(u.insertBefore));v&&v.length>0&&(g=v[0])}if(g.parentNode.insertBefore(d,g),"css"==l){if(!r){var y=i.navigator.userAgent.toLowerCase();if(y.indexOf("phantomjs/1.9")>-1)a=!0;else if(/iP(hone|od|ad)/.test(i.navigator.platform)){var b=i.navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),x=parseFloat([parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)].join("."));a=6>x}else if(y.indexOf("android")>-1){var w=parseFloat(y.slice(y.indexOf("android")+8));a=4.4>w}else if(y.indexOf("safari")>-1){var C=y.match(/version\/([\.\d]+)/i);a=C&&C[1]&&parseFloat(C[1])<6}}if(a)var k=1e3,S=o(function(){try{d.sheet.cssRules,o.cancel(S),d.onload()}catch(e){--k<=0&&d.onerror()}},20)}return h.promise},t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.filesLoader=function(i){var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=[],a=[],s=[],l=[],c=null,u=t._getFilesCache();t.toggleWatch(!0),e.extend(o,i);var d=function(n){var i,d=null;if(e.isObject(n)&&(d=n.type,n=n.path),c=u.get(n),e.isUndefined(c)||o.cache===!1){if(null!==(i=/^(css|less|html|htm|js)?(?=!)/.exec(n))&&(d=i[1],n=n.substr(i[1].length+1,n.length)),!d)if(null!==(i=/[.](css|less|html|htm|js)?((\?|#).*)?$/.exec(n)))d=i[1];else{if(t.jsLoader.hasOwnProperty("ocLazyLoadLoader")||!t.jsLoader.hasOwnProperty("requirejs"))return void t._$log.error("File type could not be determined. "+n);d="js"}"css"!==d&&"less"!==d||-1!==r.indexOf(n)?"html"!==d&&"htm"!==d||-1!==a.indexOf(n)?"js"===d||-1===s.indexOf(n)?s.push(n):t._$log.error("File type is not valid. "+n):a.push(n):r.push(n)}else c&&l.push(c)};if(o.serie?d(o.files.shift()):e.forEach(o.files,function(e){d(e)}),r.length>0){var f=n.defer();t.cssLoader(r,function(n){e.isDefined(n)&&t.cssLoader.hasOwnProperty("ocLazyLoadLoader")?(t._$log.error(n),f.reject(n)):f.resolve()},o),l.push(f.promise)}if(a.length>0){var h=n.defer();t.templatesLoader(a,function(n){e.isDefined(n)&&t.templatesLoader.hasOwnProperty("ocLazyLoadLoader")?(t._$log.error(n),h.reject(n)):h.resolve()},o),l.push(h.promise)}if(s.length>0){var p=n.defer();t.jsLoader(s,function(n){e.isDefined(n)&&(t.jsLoader.hasOwnProperty("ocLazyLoadLoader")||t.jsLoader.hasOwnProperty("requirejs"))?(t._$log.error(n),p.reject(n)):p.resolve()},o),l.push(p.promise)}if(0===l.length){var m=n.defer(),g="Error: no file to load has been found, if you're trying to load an existing module you should use the 'inject' method instead of 'load'.";return t._$log.error(g),m.reject(g),m.promise}return o.serie&&o.files.length>0?n.all(l).then(function(){return t.filesLoader(i,o)}):n.all(l)["finally"](function(e){return t.toggleWatch(!1),e})},t.load=function(i){var o,r=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],a=this,s=null,l=[],c=n.defer(),u=e.copy(i),d=e.copy(r);if(e.isArray(u))return e.forEach(u,function(e){l.push(a.load(e,d))}),n.all(l).then(function(e){c.resolve(e)},function(e){c.reject(e)}),c.promise;if(e.isString(u)?(s=a.getModuleConfig(u),s||(s={files:[u]})):e.isObject(u)&&(s=e.isDefined(u.path)&&e.isDefined(u.type)?{files:[u]}:a.setModuleConfig(u)),null===s){var f=a._getModuleName(u);return o='Module "'+(f||"unknown")+'" is not configured, cannot load.',t._$log.error(o),c.reject(new Error(o)),c.promise}e.isDefined(s.template)&&(e.isUndefined(s.files)&&(s.files=[]),e.isString(s.template)?s.files.push(s.template):e.isArray(s.template)&&s.files.concat(s.template));var h=e.extend({},d,s);return e.isUndefined(s.files)&&e.isDefined(s.name)&&t.moduleExists(s.name)?t.inject(s.name,h,!0):(t.filesLoader(s,h).then(function(){t.inject(null,h).then(function(e){c.resolve(e)},function(e){c.reject(e)})},function(e){c.reject(e)}),c.promise)},t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.cssLoader=function(i,o,r){var a=[];e.forEach(i,function(e){a.push(t.buildElement("css",e,r))}),n.all(a).then(function(){o()},function(e){o(e)})},t.cssLoader.ocLazyLoadLoader=!0,t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$q",function(t,n){return t.jsLoader=function(i,o,r){var a=[];e.forEach(i,function(e){a.push(t.buildElement("js",e,r))}),n.all(a).then(function(){o()},function(e){o(e)})},t.jsLoader.ocLazyLoadLoader=!0,t}])}])}(angular),function(e){"use strict";e.module("oc.lazyLoad").config(["$provide",function(t){t.decorator("$ocLazyLoad",["$delegate","$templateCache","$q","$http",function(t,n,i,o){return t.templatesLoader=function(r,a,s){var l=[],c=t._getFilesCache();return e.forEach(r,function(t){var r=i.defer();l.push(r.promise),o.get(t,s).then(function(i){var o=i.data;e.isString(o)&&o.length>0&&e.forEach(e.element(o),function(e){"SCRIPT"===e.nodeName&&"text/ng-template"===e.type&&n.put(e.id,e.innerHTML)}),e.isUndefined(c.get(t))&&c.put(t,!0),r.resolve()})["catch"](function(e){r.reject(new Error('Unable to load template file "'+t+'": '+e.data))})}),i.all(l).then(function(){a()},function(e){a(e)})},t.templatesLoader.ocLazyLoadLoader=!0,t}])}])}(angular),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){var n;if(null==this)throw new TypeError('"this" is null or not defined');var i=Object(this),o=i.length>>>0;if(0===o)return-1;var r=+t||0;if(Math.abs(r)===1/0&&(r=0),r>=o)return-1;for(n=Math.max(r>=0?r:o-Math.abs(r),0);o>n;){if(n in i&&i[n]===e)return n;n++}return-1}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(null==this)throw new TypeError('"this" is null or not defined');var t=Object(this),n=t.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var i=arguments[1],o=0;n>o;){var r=t[o];if(e.call(i,r,o,t))return r;o++}},configurable:!0,writable:!0});